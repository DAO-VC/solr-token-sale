import{PublicKey as e,Transaction as t,TransactionInstruction as n,SendTransactionError as r,SYSVAR_RENT_PUBKEY as o,SystemProgram as i}from"@solana/web3.js";import s,{Buffer as a}from"buffer";import c from"bn.js";import u from"bs58";import*as l from"base64-js";import d from"camelcase";import{sha256 as h}from"js-sha256";import*as f from"@project-serum/borsh";import{inflate as p}from"pako";import m from"eventemitter3";import*as y from"assert";var g=Object.freeze({__proto__:null,encode:function(e){return e.reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),"0x")},decode:function(e){0===e.indexOf("0x")&&(e=e.substr(2)),e.length%2==1&&(e="0"+e);let t=e.match(/.{2}/g);return null===t?a.from([]):a.from(t.map((e=>parseInt(e,16))))}});function w(e){return new TextDecoder("utf-8").decode(e)}function v(e){return(new TextEncoder).encode(e)}var b=Object.freeze({__proto__:null,decode:w,encode:v});function E(e){return u.encode(e)}var S=Object.freeze({__proto__:null,encode:E,decode:function(e){return u.decode(e)}});function A(e){return a.from(l.toByteArray(e))}var _=Object.freeze({__proto__:null,encode:function(e){return l.fromByteArray(e)},decode:A}),k=Object.freeze({__proto__:null,hex:g,utf8:b,bs58:S,base64:_});function x(e){const t=new Map;return e.errors&&e.errors.forEach((e=>{var n;let r=null!==(n=e.msg)&&void 0!==n?n:e.name;t.set(e.code,r)})),t}function I(e,...t){if(e.args.length!=t.length)throw new Error("Invalid argument length");const n={};let r=0;return e.args.forEach((e=>{n[e.name]=t[r],r+=1})),n}function T(e,t={}){e.forEach((e=>{if("accounts"in e)T(e.accounts,t[e.name]);else if(void 0===t[e.name])throw new Error(`Invalid arguments: ${e.name} not provided.`)}))}function L(t){return t instanceof e?t:new e(t)}class M extends TypeError{constructor(e,t){let n;const{message:r,...o}=e,{path:i}=e;super(0===i.length?r:"At path: "+i.join(".")+" -- "+r),this.value=void 0,this.key=void 0,this.type=void 0,this.refinement=void 0,this.path=void 0,this.branch=void 0,this.failures=void 0,Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>{var r;return null!=(r=n)?r:n=[e,...t()]}}}function P(e){return"object"==typeof e&&null!=e}function B(e){return"string"==typeof e?JSON.stringify(e):""+e}function O(e,t,n,r){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});const{path:o,branch:i}=t,{type:s}=n,{refinement:a,message:c="Expected a value of type `"+s+"`"+(a?" with refinement `"+a+"`":"")+", but received: `"+B(r)+"`"}=e;return{value:r,type:s,refinement:a,key:o[o.length-1],path:o,branch:i,...e,message:c}}function*U(e,t,n,r){var o;P(o=e)&&"function"==typeof o[Symbol.iterator]||(e=[e]);for(const o of e){const e=O(o,t,n,r);e&&(yield e)}}function*D(e,t,n){void 0===n&&(n={});const{path:r=[],branch:o=[e],coerce:i=!1,mask:s=!1}=n,a={path:r,branch:o};if(i&&(e=t.coercer(e,a),s&&"type"!==t.type&&P(t.schema)&&P(e)&&!Array.isArray(e)))for(const n in e)void 0===t.schema[n]&&delete e[n];let c=!0;for(const n of t.validator(e,a))c=!1,yield[n,void 0];for(let[n,u,l]of t.entries(e,a)){const t=D(u,l,{path:void 0===n?r:[...r,n],branch:void 0===n?o:[...o,u],coerce:i,mask:s});for(const r of t)r[0]?(c=!1,yield[r[0],void 0]):i&&(u=r[1],void 0===n?e=u:e instanceof Map?e.set(n,u):e instanceof Set?e.add(u):P(e)&&(e[n]=u))}if(c)for(const n of t.refiner(e,a))c=!1,yield[n,void 0];c&&(yield[void 0,e])}class N{constructor(e){this.TYPE=void 0,this.type=void 0,this.schema=void 0,this.coercer=void 0,this.validator=void 0,this.refiner=void 0,this.entries=void 0;const{type:t,schema:n,validator:r,refiner:o,coercer:i=(e=>e),entries:s=function*(){}}=e;this.type=t,this.schema=n,this.entries=s,this.coercer=i,this.validator=r?(e,t)=>U(r(e,t),t,this,e):()=>[],this.refiner=o?(e,t)=>U(o(e,t),t,this,e):()=>[]}assert(e){return function(e,t){const n=z(e,t);if(n[0])throw n[0]}(e,this)}create(e){return C(e,this)}is(e){return R(e,this)}mask(e){return function(e,t){const n=z(e,t,{coerce:!0,mask:!0});if(n[0])throw n[0];return n[1]}(e,this)}validate(e,t){return void 0===t&&(t={}),z(e,this,t)}}function C(e,t){const n=z(e,t,{coerce:!0});if(n[0])throw n[0];return n[1]}function R(e,t){return!z(e,t)[0]}function z(e,t,n){void 0===n&&(n={});const r=D(e,t,n),o=function(e){const{done:t,value:n}=e.next();return t?void 0:n}(r);return o[0]?[new M(o[0],(function*(){for(const e of r)e[0]&&(yield e[0])})),void 0]:[void 0,o[1]]}function j(e,t){return new N({type:e,schema:null,validator:t})}function V(e){return new N({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[n,r]of t.entries())yield[n,r,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||"Expected an array value, but received: "+B(e)})}function $(e){const t=B(e),n=typeof e;return new N({type:"literal",schema:"string"===n||"number"===n||"boolean"===n?e:null,validator:n=>n===e||"Expected the literal `"+t+"`, but received: "+B(n)})}function F(e){return new N({...e,validator:(t,n)=>null===t||e.validator(t,n),refiner:(t,n)=>null===t||e.refiner(t,n)})}function q(){return j("number",(e=>"number"==typeof e&&!isNaN(e)||"Expected a number, but received: "+B(e)))}function K(e){return new N({...e,validator:(t,n)=>void 0===t||e.validator(t,n),refiner:(t,n)=>void 0===t||e.refiner(t,n)})}function G(){return j("string",(e=>"string"==typeof e||"Expected a string, but received: "+B(e)))}function W(e){const t=Object.keys(e);return new N({type:"type",schema:e,*entries(n){if(P(n))for(const r of t)yield[r,n[r],e[r]]},validator:e=>P(e)||"Expected an object, but received: "+B(e)})}function H(e){const t=e.map((e=>e.type)).join(" | ");return new N({type:"union",schema:null,coercer:(t,n)=>(e.find((e=>{const[n]=e.validate(t,{coerce:!0});return!n}))||J()).coercer(t,n),validator(n,r){const o=[];for(const t of e){const[...e]=D(n,t,r),[i]=e;if(!i[0])return[];for(const[t]of e)t&&o.push(t)}return["Expected the value to satisfy a union of `"+t+"`, but received: "+B(n),...o]}})}function J(){return j("unknown",(()=>!0))}async function Z(e,t,n){if(t.length<=99)return await X(e,t,n);{const r=function(e,t){return Array.apply(0,new Array(Math.ceil(e.length/99))).map(((t,n)=>e.slice(99*n,99*(n+1))))}(t);return(await Promise.all(r.map((t=>X(e,t,n))))).flat()}}async function X(e,t,n){const r=null!=n?n:e.commitment;return(await e.getMultipleAccountsInfo(t,r)).map(((e,n)=>null===e?null:{publicKey:t[n],account:e}))}async function Q(e,t,n,o,i){n&&n.length>0&&t.sign(...n);const s=t._compile(),a=s.serialize(),c=t._serialize(a).toString("base64"),u={encoding:"base64",commitment:null!=o?o:e.commitment};if(i){const e=(Array.isArray(i)?i:s.nonProgramIds()).map((e=>e.toBase58()));u.accounts={encoding:"base64",addresses:e}}n&&(u.sigVerify=!0);const l=[c,u],d=C(await e._rpcRequest("simulateTransaction",l),te);if("error"in d){let e;if("data"in d.error&&(e=d.error.data.logs,e&&Array.isArray(e))){const t="\n    ",n=t+e.join(t);console.error(d.error.message,n)}throw new r("failed to simulate transaction: "+d.error.message,e)}return d.result}const Y=ee(J());function ee(e){return H([W({jsonrpc:$("2.0"),id:G(),result:e}),W({jsonrpc:$("2.0"),id:G(),error:W({code:J(),message:G(),data:K(j("any",(()=>!0)))})})])}const te=(ne=W({err:F(H([W({}),G()])),logs:F(V(G())),accounts:K(F(V(F(W({executable:j("boolean",(e=>"boolean"==typeof e)),owner:G(),lamports:q(),data:V(G()),rentEpoch:K(q())}))))),unitsConsumed:K(q())}),function(e){return function(e,t,n){return new N({...e,coercer:(r,o)=>R(r,t)?e.coercer(n(r),o):e.coercer(r,o)})}(ee(e),Y,(t=>"error"in t?t:{...t,result:C(t.result,e)}))}(W({context:W({slot:q()}),value:ne})));var ne,re=Object.freeze({__proto__:null,invoke:async function(e,r,o,i){e=L(e),i||(i=ce());const s=new t;if(s.add(new n({programId:e,keys:null!=r?r:[],data:o})),void 0===i.sendAndConfirm)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");return await i.sendAndConfirm(s,[])},getMultipleAccounts:Z,simulateTransaction:Q});class oe{constructor(e,t,n){this.connection=e,this.wallet=t,this.opts=n,this.publicKey=t.publicKey}static defaultOptions(){return{preflightCommitment:"processed",commitment:"processed"}}static local(e,t){throw new Error("Provider local is not available on browser.")}static env(){throw new Error("Provider env is not available on browser.")}async sendAndConfirm(e,t,n){var o;void 0===n&&(n=this.opts),e.feePayer=this.wallet.publicKey,e.recentBlockhash=(await this.connection.getRecentBlockhash(n.preflightCommitment)).blockhash,e=await this.wallet.signTransaction(e),(null!=t?t:[]).forEach((t=>{e.partialSign(t)}));const i=e.serialize();try{return await se(this.connection,i,n)}catch(t){if(t instanceof ae){const n=await this.connection.getTransaction(E(e.signature),{commitment:"confirmed"});if(n){const e=null===(o=n.meta)||void 0===o?void 0:o.logMessages;throw e?new r(t.message,e):t}throw t}throw t}}async sendAll(e,t){void 0===t&&(t=this.opts);const n=await this.connection.getRecentBlockhash(t.preflightCommitment);let r=e.map((e=>{var t;let r=e.tx,o=null!==(t=e.signers)&&void 0!==t?t:[];return r.feePayer=this.wallet.publicKey,r.recentBlockhash=n.blockhash,o.forEach((e=>{r.partialSign(e)})),r}));const o=await this.wallet.signAllTransactions(r),i=[];for(let e=0;e<r.length;e+=1){const n=o[e].serialize();i.push(await se(this.connection,n,t))}return i}async simulate(e,t,n,r){e.feePayer=this.wallet.publicKey,e.recentBlockhash=(await this.connection.getLatestBlockhash(null!=n?n:this.connection.commitment)).blockhash,e=await this.wallet.signTransaction(e);const o=await Q(this.connection,e,t,n,r);if(o.value.err)throw new ie(o.value);return o.value}}class ie extends Error{constructor(e,t){super(t),this.simulationResponse=e}}async function se(e,t,n){const r=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment},o=await e.sendRawTransaction(t,r),i=(await e.confirmTransaction(o,n&&n.commitment)).value;if(i.err)throw new ae(`Raw transaction ${o} failed (${JSON.stringify(i)})`);return o}class ae extends Error{constructor(e){super(e)}}function ce(){return null===ue?oe.local():ue}let ue=null;const le=new Set(["anchor-deprecated-state","debug-logs"]),de=new Map;function he(e){return void 0!==de.get(e)}var fe=Object.freeze({__proto__:null,set:function(e){if(!le.has(e))throw new Error("Invalid feature");de.set(e,!0)},isSet:he});class pe extends Error{constructor(e){super(e),this.name="IdlError"}}class me{constructor(e){this.stack=e}static parse(t){var n;const r=/^Program (\w*) invoke/,o=/^Program \w* success/,i=[];for(let s=0;s<t.length;s++){if(o.exec(t[s])){i.pop();continue}const a=null===(n=r.exec(t[s]))||void 0===n?void 0:n[1];a&&i.push(new e(a))}return new me(i)}}class ye extends Error{constructor(e,t,n,r,o,i){super(n.join("\n").replace("Program log: ","")),this.errorLogs=n,this.logs=r,this.error={errorCode:e,errorMessage:t,comparedValues:i,origin:o},this._programErrorStack=me.parse(r)}static parse(t){if(!t)return null;const n=t.findIndex((e=>e.startsWith("Program log: AnchorError")));if(-1===n)return null;const r=t[n],o=[r];let i;if(n+1<t.length)if("Program log: Left:"===t[n+1]){const r=/^Program log: (.*)$/,s=r.exec(t[n+2])[1],a=r.exec(t[n+4])[1];i=[new e(s),new e(a)],o.push(...t.slice(n+1,n+5))}else if(t[n+1].startsWith("Program log: Left:")){const e=/^Program log: (Left|Right): (.*)$/,r=e.exec(t[n+1])[2],s=e.exec(t[n+2])[2];o.push(...t.slice(n+1,n+3)),i=[r,s]}const s=/^Program log: AnchorError occurred\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(r),a=/^Program log: AnchorError thrown in (.*):(\d*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(r),c=/^Program log: AnchorError caused by account: (.*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(r);if(s){const[e,n,r]=s.slice(1,4),a={code:e,number:parseInt(n)};return new ye(a,r,o,t,void 0,i)}if(a){const[e,n,r,s,c]=a.slice(1,6),u={code:r,number:parseInt(s)},l={file:e,line:parseInt(n)};return new ye(u,c,o,t,l,i)}if(c){const[e,n,r,s]=c.slice(1,5),a=e,u={code:n,number:parseInt(r)};return new ye(u,s,o,t,a,i)}return null}get program(){return this._programErrorStack.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){return this._programErrorStack.stack}toString(){return this.message}}class ge extends Error{constructor(e,t,n){super(),this.code=e,this.msg=t,this.logs=n,n&&(this._programErrorStack=me.parse(n))}static parse(e,t){const n=e.toString();let r,o;if(n.includes("custom program error:")){let e=n.split("custom program error: ");if(2!==e.length)return null;r=e[1]}else{const e=n.match(/"Custom":([0-9]+)}/g);if(!e||e.length>1)return null;r=e[0].match(/([0-9]+)/g)[0]}try{o=parseInt(r)}catch(e){return null}let i=t.get(o);return void 0!==i?new ge(o,i,e.logs):(i=ve.get(o),void 0!==i?new ge(o,i,e.logs):null)}get program(){var e;return null===(e=this._programErrorStack)||void 0===e?void 0:e.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){var e;return null===(e=this._programErrorStack)||void 0===e?void 0:e.stack}toString(){return this.msg}}function we(e,t){he("debug-logs")&&console.log("Translating error:",e);const n=ye.parse(e.logs);if(n)return n;const r=ge.parse(e,t);if(r)return r;if(e.logs){const t={get:function(t,n){return"programErrorStack"===n?t.programErrorStack.stack:"program"===n?t.programErrorStack.stack[e.programErrorStack.stack.length-1]:Reflect.get(...arguments)}};return e.programErrorStack=me.parse(e.logs),new Proxy(e,t)}return e}const ve=new Map([[100,"8 byte instruction identifier not provided"],[101,"Fallback functions are not supported"],[102,"The program could not deserialize the given instruction"],[103,"The program could not serialize the given instruction"],[1e3,"The program was compiled without idl instructions"],[1001,"The transaction was given an invalid program for the IDL instruction"],[2e3,"A mut constraint was violated"],[2001,"A has_one constraint was violated"],[2002,"A signer constraint was violated"],[2003,"A raw constraint was violated"],[2004,"An owner constraint was violated"],[2005,"A rent exemption constraint was violated"],[2006,"A seeds constraint was violated"],[2007,"An executable constraint was violated"],[2008,"A state constraint was violated"],[2009,"An associated constraint was violated"],[2010,"An associated init constraint was violated"],[2011,"A close constraint was violated"],[2012,"An address constraint was violated"],[2013,"Expected zero account discriminant"],[2014,"A token mint constraint was violated"],[2015,"A token owner constraint was violated"],[2016,"A mint mint authority constraint was violated"],[2017,"A mint freeze authority constraint was violated"],[2018,"A mint decimals constraint was violated"],[2019,"A space constraint was violated"],[2500,"A require expression was violated"],[2501,"A require_eq expression was violated"],[2502,"A require_keys_eq expression was violated"],[2503,"A require_neq expression was violated"],[2504,"A require_keys_neq expression was violated"],[2505,"A require_gt expression was violated"],[2506,"A require_gte expression was violated"],[3e3,"The account discriminator was already set on this account"],[3001,"No 8 byte discriminator was found on the account"],[3002,"8 byte discriminator did not match what was expected"],[3003,"Failed to deserialize the account"],[3004,"Failed to serialize the account"],[3005,"Not enough account keys given to the instruction"],[3006,"The given account is not mutable"],[3007,"The given account is owned by a different program than expected"],[3008,"Program ID was not as expected"],[3009,"Program account is not executable"],[3010,"The given account did not sign"],[3011,"The given account is not owned by the system program"],[3012,"The program expected this account to be already initialized"],[3013,"The given account is not a program data account"],[3014,"The given account is not the associated token account"],[3015,"The given public key does not match the required sysvar"],[3016,"The account reallocation exceeds the MAX_PERMITTED_DATA_INCREASE limit"],[3017,"The account was duplicated for more than one reallocation"],[4e3,"The given state account does not have the correct address"],[4100,"The declared program id does not match the actual program id"],[5e3,"The API being used is deprecated and should no longer be used"]]);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var be=function(){return be=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},be.apply(this,arguments)};function Ee(e){return e.toLowerCase()}var Se=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],Ae=/[^A-Z0-9]+/gi;function _e(e,t,n){return t instanceof RegExp?e.replace(t,n):t.reduce((function(e,t){return e.replace(t,n)}),e)}class ke{static fieldLayout(e,t){const n=void 0!==e.name?d(e.name):void 0;switch(e.type){case"bool":return f.bool(n);case"u8":return f.u8(n);case"i8":return f.i8(n);case"u16":return f.u16(n);case"i16":return f.i16(n);case"u32":return f.u32(n);case"i32":return f.i32(n);case"f32":return f.f32(n);case"u64":return f.u64(n);case"i64":return f.i64(n);case"f64":return f.f64(n);case"u128":return f.u128(n);case"i128":return f.i128(n);case"bytes":return f.vecU8(n);case"string":return f.str(n);case"publicKey":return f.publicKey(n);default:if("vec"in e.type)return f.vec(ke.fieldLayout({name:void 0,type:e.type.vec},t),n);if("option"in e.type)return f.option(ke.fieldLayout({name:void 0,type:e.type.option},t),n);if("defined"in e.type){const r=e.type.defined;if(void 0===t)throw new pe("User defined types not provided");const o=t.filter((e=>e.name===r));if(1!==o.length)throw new pe(`Type not found: ${JSON.stringify(e)}`);return ke.typeDefLayout(o[0],t,n)}if("array"in e.type){let r=e.type.array[0],o=e.type.array[1],i=ke.fieldLayout({name:void 0,type:r},t);return f.array(i,o,n)}throw new Error(`Not yet implemented: ${e}`)}}static typeDefLayout(e,t=[],n){if("struct"===e.type.kind){const r=e.type.fields.map((e=>ke.fieldLayout(e,t)));return f.struct(r,n)}if("enum"===e.type.kind){let r=e.type.variants.map((e=>{const n=d(e.name);if(void 0===e.fields)return f.struct([],n);const r=e.fields.map((e=>{if(!e.hasOwnProperty("name"))throw new Error("Tuple enum variants not yet implemented.");return ke.fieldLayout(e,t)}));return f.struct(r,n)}));return void 0!==n?f.rustEnum(r).replicate(n):f.rustEnum(r,n)}throw new Error(`Unknown type kint: ${e}`)}}class xe{constructor(e){this.idl=e,this.ixLayout=xe.parseIxLayout(e);const t=new Map;e.instructions.forEach((e=>{const n=Te("global",e.name);t.set(u.encode(n),{layout:this.ixLayout.get(e.name),name:e.name})})),e.state&&e.state.methods.map((e=>{const n=Te("state",e.name);t.set(u.encode(n),{layout:this.ixLayout.get(e.name),name:e.name})})),this.sighashLayouts=t}encode(e,t){return this._encode("global",e,t)}encodeState(e,t){return this._encode("state",e,t)}_encode(e,t,n){const r=a.alloc(1e3),o=d(t),i=this.ixLayout.get(o);if(!i)throw new Error(`Unknown method: ${o}`);const s=i.encode(n,r),c=r.slice(0,s);return a.concat([Te(e,t),c])}static parseIxLayout(e){const t=(e.state?e.state.methods:[]).map((t=>{let n=t.args.map((t=>{var n,r;return ke.fieldLayout(t,Array.from([...null!==(n=e.accounts)&&void 0!==n?n:[],...null!==(r=e.types)&&void 0!==r?r:[]]))}));const r=d(t.name);return[r,f.struct(n,r)]})).concat(e.instructions.map((t=>{let n=t.args.map((t=>{var n,r;return ke.fieldLayout(t,Array.from([...null!==(n=e.accounts)&&void 0!==n?n:[],...null!==(r=e.types)&&void 0!==r?r:[]]))}));const r=d(t.name);return[r,f.struct(n,r)]})));return new Map(t)}decode(e,t="hex"){"string"==typeof e&&(e="hex"===t?a.from(e,"hex"):u.decode(e));let n=u.encode(e.slice(0,8)),r=e.slice(8);const o=this.sighashLayouts.get(n);return o?{data:o.layout.decode(r),name:o.name}:null}format(e,t){return Ie.format(e,t,this.idl)}}class Ie{static format(e,t,n){const r=n.instructions.filter((t=>e.name===t.name))[0];if(void 0===r)return console.error("Invalid instruction given"),null;const o=r.args.map((t=>({name:t.name,type:Ie.formatIdlType(t.type),data:Ie.formatIdlData(t,e.data[t.name],n.types)}))),i=Ie.flattenIdlAccounts(r.accounts);return{args:o,accounts:t.map(((e,t)=>t<i.length?{name:i[t].name,...e}:{name:void 0,...e}))}}static formatIdlType(e){if("string"==typeof e)return e;if("vec"in e)return`Vec<${this.formatIdlType(e.vec)}>`;if("option"in e)return`Option<${this.formatIdlType(e.option)}>`;if("defined"in e)return e.defined;if("array"in e)return`Array<${e.array[0]}; ${e.array[1]}>`;throw new Error(`Unknown IDL type: ${e}`)}static formatIdlData(e,t,n){if("string"==typeof e.type)return t.toString();if(e.type.hasOwnProperty("vec"))return"["+t.map((t=>this.formatIdlData({name:"",type:e.type.vec},t))).join(", ")+"]";if(e.type.hasOwnProperty("option"))return null===t?"null":this.formatIdlData({name:"",type:e.type.option},t,n);if(e.type.hasOwnProperty("defined")){if(void 0===n)throw new Error("User defined types not provided");const r=n.filter((t=>t.name===e.type.defined));if(1!==r.length)throw new Error(`Type not found: ${e.type.defined}`);return Ie.formatIdlDataDefined(r[0],t,n)}return"unknown"}static formatIdlDataDefined(e,t,n){if("struct"===e.type.kind){const r=e.type;return"{ "+Object.keys(t).map((e=>{const o=r.fields.filter((t=>t.name===e))[0];if(void 0===o)throw new Error("Unable to find type");return e+": "+Ie.formatIdlData(o,t[e],n)})).join(", ")+" }"}if(0===e.type.variants.length)return"{}";if(e.type.variants[0].name){const r=e.type.variants,o=Object.keys(t)[0],i=t[o],s=Object.keys(i).map((e=>{var t;const s=i[e],a=null===(t=r[o])||void 0===t?void 0:t.filter((t=>t.name===e))[0];if(void 0===a)throw new Error("Unable to find variant");return e+": "+Ie.formatIdlData(a,s,n)})).join(", "),a=d(o,{pascalCase:!0});return 0===s.length?a:`${a} { ${s} }`}return"Tuple formatting not yet implemented"}static flattenIdlAccounts(e,t){return e.map((e=>{const n=function(e){const t=e.replace(/([A-Z])/g," $1");return t.charAt(0).toUpperCase()+t.slice(1)}(e.name);if(e.hasOwnProperty("accounts")){const r=t?`${t} > ${n}`:n;return Ie.flattenIdlAccounts(e.accounts,r)}return{...e,name:t?`${t} > ${n}`:n}})).flat()}}function Te(e,t){var n;let r=`${e}:${void 0===n&&(n={}),function(e,t){return void 0===t&&(t={}),function(e,t){void 0===t&&(t={});for(var n=t.splitRegexp,r=void 0===n?Se:n,o=t.stripRegexp,i=void 0===o?Ae:o,s=t.transform,a=void 0===s?Ee:s,c=t.delimiter,u=void 0===c?" ":c,l=_e(_e(e,r,"$1\0$2"),i,"\0"),d=0,h=l.length;"\0"===l.charAt(d);)d++;for(;"\0"===l.charAt(h-1);)h--;return l.slice(d,h).split("\0").map(a).join(u)}(e,be({delimiter:"."},t))}(t,be({delimiter:"_"},n))}`;return a.from(h.digest(r)).slice(0,8)}function Le(e,t){if("enum"===t.type.kind){let n=t.type.variants.map((t=>void 0===t.fields?0:t.fields.map((t=>{if("object"!=typeof t||!("name"in t))throw new Error("Tuple enum variants not yet implemented.");return Me(e,t.type)})).reduce(((e,t)=>e+t))));return Math.max(...n)+1}return void 0===t.type.fields?0:t.type.fields.map((t=>Me(e,t.type))).reduce(((e,t)=>e+t),0)}function Me(e,t){var n,r;switch(t){case"bool":case"u8":case"i8":case"bytes":case"string":return 1;case"i16":case"u16":return 2;case"u32":case"i32":case"f32":return 4;case"u64":case"i64":case"f64":return 8;case"u128":case"i128":return 16;case"publicKey":return 32;default:if("vec"in t)return 1;if("option"in t)return 1+Me(e,t.option);if("coption"in t)return 4+Me(e,t.coption);if("defined"in t){const o=null!==(r=null===(n=e.types)||void 0===n?void 0:n.filter((e=>e.name===t.defined)))&&void 0!==r?r:[];if(1!==o.length)throw new pe(`Type not found: ${JSON.stringify(t)}`);return Le(e,o[0])}if("array"in t){let n=t.array[0],r=t.array[1];return Me(e,n)*r}throw new Error(`Invalid type ${JSON.stringify(t)}`)}}class Pe{constructor(e){if(void 0===e.accounts)return void(this.accountLayouts=new Map);const t=e.accounts.map((t=>[t.name,ke.typeDefLayout(t,e.types)]));this.accountLayouts=new Map(t),this.idl=e}async encode(e,t){const n=a.alloc(1e3),r=this.accountLayouts.get(e);if(!r)throw new Error(`Unknown account: ${e}`);const o=r.encode(t,n);let i=n.slice(0,o),s=Pe.accountDiscriminator(e);return a.concat([s,i])}decode(e,t){if(Pe.accountDiscriminator(e).compare(t.slice(0,8)))throw new Error("Invalid account discriminator");return this.decodeUnchecked(e,t)}decodeUnchecked(e,t){const n=t.slice(8),r=this.accountLayouts.get(e);if(!r)throw new Error(`Unknown account: ${e}`);return r.decode(n)}memcmp(e,t){const n=Pe.accountDiscriminator(e);return{offset:0,bytes:u.encode(t?a.concat([n,t]):n)}}size(e){var t;return 8+(null!==(t=Le(this.idl,e))&&void 0!==t?t:0)}static accountDiscriminator(e){return a.from(h.digest(`account:${d(e,{pascalCase:!0})}`)).slice(0,8)}}class Be{constructor(e){if(void 0===e.events)return void(this.layouts=new Map);const t=e.events.map((t=>{let n={name:t.name,type:{kind:"struct",fields:t.fields.map((e=>({name:e.name,type:e.type})))}};return[t.name,ke.typeDefLayout(n,e.types)]}));this.layouts=new Map(t),this.discriminators=new Map(void 0===e.events?[]:e.events.map((e=>[l.fromByteArray(Oe(e.name)),e.name])))}decode(e){let t;try{t=a.from(l.toByteArray(e))}catch(e){return null}const n=l.fromByteArray(t.slice(0,8)),r=this.discriminators.get(n);if(void 0===r)return null;const o=this.layouts.get(r);if(!o)throw new Error(`Unknown event: ${r}`);return{data:o.decode(t.slice(8)),name:r}}}function Oe(e){return a.from(h.digest(`event:${e}`)).slice(0,8)}class Ue{constructor(e){if(void 0===e.state)throw new Error("Idl state not defined.");this.layout=ke.typeDefLayout(e.state.struct,e.types)}async encode(e,t){const n=a.alloc(1e3),r=this.layout.encode(t,n),o=await De(e),i=n.slice(0,r);return a.concat([o,i])}decode(e){const t=e.slice(8);return this.layout.decode(t)}}async function De(e){let t=he("anchor-deprecated-state")?"account":"state";return a.from(h.digest(`${t}:${e}`)).slice(0,8)}class Ne{constructor(e){if(void 0===e.types)return void(this.typeLayouts=new Map);const t=e.types.map((t=>[t.name,ke.typeDefLayout(t,e.types)]));this.typeLayouts=new Map(t),this.idl=e}encode(e,t){const n=a.alloc(1e3),r=this.typeLayouts.get(e);if(!r)throw new Error(`Unknown type: ${e}`);const o=r.encode(t,n);return n.slice(0,o)}decode(e,t){const n=this.typeLayouts.get(e);if(!n)throw new Error(`Unknown type: ${e}`);return n.decode(t)}}class Ce{constructor(e){this.instruction=new xe(e),this.accounts=new Pe(e),this.events=new Be(e),e.state&&(this.state=new Ue(e)),this.types=new Ne(e)}}var Re="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};class ze{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}decode(e,t){throw new Error("Layout is abstract")}encode(e,t,n){throw new Error("Layout is abstract")}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}var je=ze;class Ve extends ze{isCount(){throw new Error("ExternalLayout is abstract")}}class $e extends Ve{constructor(e,t,n){if(!(e instanceof ze))throw new TypeError("layout must be a Layout");if(void 0===t)t=0;else if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,n||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof Fe||this.layout instanceof qe}decode(e,t){return void 0===t&&(t=0),this.layout.decode(e,t+this.offset)}encode(e,t,n){return void 0===n&&(n=0),this.layout.encode(e,t,n+this.offset)}}class Fe extends ze{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return void 0===t&&(t=0),e.readUIntLE(t,this.span)}encode(e,t,n){return void 0===n&&(n=0),t.writeUIntLE(e,n,this.span),this.span}}class qe extends ze{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return void 0===t&&(t=0),e.readUIntBE(t,this.span)}encode(e,t,n){return void 0===n&&(n=0),t.writeUIntBE(e,n,this.span),this.span}}const Ke=Math.pow(2,32);function Ge(e){const t=Math.floor(e/Ke);return{hi32:t,lo32:e-t*Ke}}function We(e,t){return e*Ke+t}class He extends ze{constructor(e){super(8,e)}decode(e,t){void 0===t&&(t=0);const n=e.readUInt32LE(t);return We(e.readUInt32LE(t+4),n)}encode(e,t,n){void 0===n&&(n=0);const r=Ge(e);return t.writeUInt32LE(r.lo32,n),t.writeUInt32LE(r.hi32,n+4),8}}class Je extends ze{constructor(e){super(8,e)}decode(e,t){void 0===t&&(t=0);const n=e.readUInt32LE(t);return We(e.readInt32LE(t+4),n)}encode(e,t,n){void 0===n&&(n=0);const r=Ge(e);return t.writeUInt32LE(r.lo32,n),t.writeInt32LE(r.hi32,n+4),8}}class Ze extends ze{constructor(e,t,n){if(!Array.isArray(e)||!e.reduce(((e,t)=>e&&t instanceof ze),!0))throw new TypeError("fields must be array of Layout instances");"boolean"==typeof t&&void 0===n&&(n=t,t=void 0);for(const t of e)if(0>t.span&&void 0===t.property)throw new Error("fields cannot contain unnamed variable-length layout");let r=-1;try{r=e.reduce(((e,t)=>e+t.getSpan()),0)}catch(e){}super(r,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);let n=0;try{n=this.fields.reduce(((n,r)=>{const o=r.getSpan(e,t);return t+=o,n+o}),0)}catch(e){throw new RangeError("indeterminate span")}return n}decode(e,t){void 0===t&&(t=0);const n=this.makeDestinationObject();for(const r of this.fields)if(void 0!==r.property&&(n[r.property]=r.decode(e,t)),t+=r.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return n}encode(e,t,n){void 0===n&&(n=0);const r=n;let o=0,i=0;for(const r of this.fields){let s=r.span;if(i=0<s?s:0,void 0!==r.property){const o=e[r.property];void 0!==o&&(i=r.encode(o,t,n),0>s&&(s=r.getSpan(t,n)))}o=n,n+=s}return o+i-r}fromArray(e){const t=this.makeDestinationObject();for(const n of this.fields)void 0!==n.property&&0<e.length&&(t[n.property]=e.shift());return t}layoutFor(e){if("string"!=typeof e)throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if("string"!=typeof e)throw new TypeError("property must be string");let t=0;for(const n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}}class Xe{constructor(e){this.property=e}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class Qe extends Xe{constructor(e,t){if(!(e instanceof Ve&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,n){return this.layout.encode(e,t,n)}}class Ye extends ze{constructor(e,t,n){const r=e instanceof Fe||e instanceof qe;if(r)e=new Qe(new $e(e));else if(e instanceof Ve&&e.isCount())e=new Qe(e);else if(!(e instanceof Xe))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(void 0===t&&(t=null),!(null===t||t instanceof ze))throw new TypeError("defaultLayout must be null or a Layout");if(null!==t){if(0>t.span)throw new Error("defaultLayout must have constant span");void 0===t.property&&(t=t.replicate("content"))}let o=-1;t&&(o=t.span,0<=o&&r&&(o+=e.layout.span)),super(o,n),this.discriminator=e,this.usesPrefixDiscriminator=r,this.defaultLayout=t,this.registry={};let i=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(e){return i(e)},this.configGetSourceVariant=function(e){i=e.bind(this)}}getSpan(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);const n=this.getVariant(e,t);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,t)}defaultGetSourceVariant(e){if(e.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&e.hasOwnProperty(this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||e.hasOwnProperty(t.property)))return t}else for(const t in this.registry){const n=this.registry[t];if(e.hasOwnProperty(n.property))return n}throw new Error("unable to infer src variant")}decode(e,t){let n;void 0===t&&(t=0);const r=this.discriminator,o=r.decode(e,t);let i=this.registry[o];if(void 0===i){let s=0;i=this.defaultLayout,this.usesPrefixDiscriminator&&(s=r.layout.span),n=this.makeDestinationObject(),n[r.property]=o,n[i.property]=this.defaultLayout.decode(e,t+s)}else n=i.decode(e,t);return n}encode(e,t,n){void 0===n&&(n=0);const r=this.getSourceVariant(e);if(void 0===r){const r=this.discriminator,o=this.defaultLayout;let i=0;return this.usesPrefixDiscriminator&&(i=r.layout.span),r.encode(e[r.property],t,n),i+o.encode(e[o.property],t,n+i)}return r.encode(e,t,n)}addVariant(e,t,n){const r=new et(this,e,t,n);return this.registry[e]=r,r}getVariant(e,t){let n=e;return Buffer.isBuffer(e)&&(void 0===t&&(t=0),n=this.discriminator.decode(e,t)),this.registry[n]}}class et extends ze{constructor(e,t,n,r){if(!(e instanceof Ye))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if("string"==typeof n&&void 0===r&&(r=n,n=null),n){if(!(n instanceof ze))throw new TypeError("layout must be a Layout");if(null!==e.defaultLayout&&0<=n.span&&n.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!=typeof r)throw new TypeError("variant must have a String property")}let o=e.span;0>e.span&&(o=n?n.span:0,0<=o&&e.usesPrefixDiscriminator&&(o+=e.discriminator.layout.span)),super(o,r),this.union=e,this.variant=t,this.layout=n||null}getSpan(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),n+this.layout.getSpan(e,t+n)}decode(e,t){const n=this.makeDestinationObject();if(void 0===t&&(t=0),this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,t+r):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(e,t,n){void 0===n&&(n=0);let r=0;if(this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout&&!e.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,n);let o=r;if(this.layout&&(this.layout.encode(e[this.property],t,n+r),o+=this.layout.getSpan(t,n+r),0<=this.union.span&&o>this.union.span))throw new Error("encoded variant overruns containing union");return o}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}class tt extends ze{constructor(e,t){if(!(e instanceof Ve&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof Ve||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e,t){void 0===t&&(t=0);let n=this.span;return 0>n&&(n=this.length.decode(e,t)),e.slice(t,t+n)}encode(e,t,n){let r=this.length;if(this.length instanceof Ve&&(r=e.length),!Buffer.isBuffer(e)||r!==e.length)throw new TypeError((o="Blob.encode",(this.property?o+"["+this.property+"]":o)+" requires (length "+r+") Buffer as src"));var o;if(n+r>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),n,r,"hex"),this.length instanceof Ve&&this.length.encode(r,t,n),r}}var nt=(e,t,n)=>new $e(e,t,n),rt=e=>new Fe(1,e),ot=e=>new Fe(4,e),it=e=>new He(e),st=e=>new Je(e),at=(e,t,n)=>new Ze(e,t,n),ct=(e,t,n)=>new Ye(e,t,n),ut=(e,t)=>new tt(e,t);class lt{constructor(e){}encode(t,n){switch(d(t)){case"initializeMint":return function({decimals:t,mintAuthority:n,freezeAuthority:r}){return ft({initializeMint:{decimals:t,mintAuthority:n.toBuffer(),freezeAuthorityOption:!!r,freezeAuthority:(r||e.default).toBuffer()}})}(n);case"initializeAccount":return ft({initializeAccount:{}});case"initializeMultisig":return function({m:e}){return ft({initializeMultisig:{m:e}})}(n);case"transfer":return function({amount:e}){return ft({transfer:{amount:e}})}(n);case"approve":return function({amount:e}){return ft({approve:{amount:e}})}(n);case"revoke":return ft({revoke:{}});case"setAuthority":return function({authorityType:e,newAuthority:t}){return ft({setAuthority:{authorityType:e,newAuthority:t}})}(n);case"mintTo":return function({amount:e}){return ft({mintTo:{amount:e}})}(n);case"burn":return function({amount:e}){return ft({burn:{amount:e}})}(n);case"closeAccount":return ft({closeAccount:{}});case"freezeAccount":return ft({freezeAccount:{}});case"thawAccount":return ft({thawAccount:{}});case"transferChecked":return function({amount:e,decimals:t}){return ft({transferChecked:{amount:e,decimals:t}})}(n);case"approvedChecked":return function({amount:e,decimals:t}){return ft({approveChecked:{amount:e,decimals:t}})}(n);case"mintToChecked":return function({amount:e,decimals:t}){return ft({mintToChecked:{amount:e,decimals:t}})}(n);case"burnChecked":return function({amount:e,decimals:t}){return ft({burnChecked:{amount:e,decimals:t}})}(n);case"intializeAccount2":return function({authority:e}){return ft({initilaizeAccount2:{authority:e}})}(n);case"syncNative":return ft({syncNative:{}});case"initializeAccount3":return function({authority:e}){return ft({initializeAccount3:{authority:e}})}(n);case"initializeMultisig2":return function({m:e}){return ft({initializeMultisig2:{m:e}})}(n);case"initializeMint2":return function({decimals:e,mintAuthority:t,freezeAuthority:n}){return ft({encodeInitializeMint2:{decimals:e,mintAuthority:t,freezeAuthority:n}})}(n);default:throw new Error(`Invalid instruction: ${t}`)}}encodeState(e,t){throw new Error("SPL token does not have state")}}const dt=ct(rt("instruction"));function ht(e){return ut(32,e)}function ft(e){let t=Buffer.alloc(pt),n=dt.encode(e,t);return t.slice(0,n)}dt.addVariant(0,at([rt("decimals"),ut(32,"mintAuthority"),rt("freezeAuthorityOption"),ht("freezeAuthority")]),"initializeMint"),dt.addVariant(1,at([]),"initializeAccount"),dt.addVariant(2,at([rt("m")]),"initializeMultisig"),dt.addVariant(3,at([it("amount")]),"transfer"),dt.addVariant(4,at([it("amount")]),"approve"),dt.addVariant(5,at([]),"revoke"),dt.addVariant(6,at([rt("authorityType"),rt("newAuthorityOption"),ht("newAuthority")]),"setAuthority"),dt.addVariant(7,at([it("amount")]),"mintTo"),dt.addVariant(8,at([it("amount")]),"burn"),dt.addVariant(9,at([]),"closeAccount"),dt.addVariant(10,at([]),"freezeAccount"),dt.addVariant(11,at([]),"thawAccount"),dt.addVariant(12,at([it("amount"),rt("decimals")]),"transferChecked"),dt.addVariant(13,at([it("amount"),rt("decimals")]),"approvedChecked"),dt.addVariant(14,at([it("amount"),rt("decimals")]),"mintToChecked"),dt.addVariant(15,at([it("amount"),rt("decimals")]),"burnedChecked"),dt.addVariant(16,at([ht("authority")]),"InitializeAccount2"),dt.addVariant(17,at([]),"syncNative"),dt.addVariant(18,at([ht("authority")]),"initializeAccount3"),dt.addVariant(19,at([rt("m")]),"initializeMultisig2"),dt.addVariant(20,at([rt("decimals"),ht("mintAuthority"),rt("freezeAuthorityOption"),ht("freezeAuthority")]),"initializeMint2");const pt=Math.max(...Object.values(dt.registry).map((e=>e.span)));class mt{constructor(e){}encode(e,t){throw new Error("SPL token does not have state")}decode(e){throw new Error("SPL token does not have state")}}function yt(e){return new vt(ut(8),(e=>Et.fromBuffer(e)),(e=>e.toBuffer()),e)}function gt(t){return new vt(ut(32),(t=>new e(t)),(e=>e.toBuffer()),t)}function wt(e,t){return new bt(e,t)}class vt extends je{constructor(e,t,n,r){super(e.span,r),this.layout=e,this.decoder=t,this.encoder=n}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,n){return this.layout.encode(this.encoder(e),t,n)}getSpan(e,t){return this.layout.getSpan(e,t)}}class bt extends je{constructor(e,t){super(-1,t),this.layout=e,this.discriminator=ot()}encode(e,t,n=0){return null==e?this.layout.span+this.discriminator.encode(0,t,n):(this.discriminator.encode(1,t,n),this.layout.encode(e,t,n+4)+4)}decode(e,t=0){const n=this.discriminator.decode(e,t);if(0===n)return null;if(1===n)return this.layout.decode(e,t+4);throw new Error("Invalid coption "+this.layout.property)}getSpan(e,t=0){return this.layout.getSpan(e,t+4)+4}}class Et extends c{toBuffer(){const e=super.toArray().reverse(),t=Buffer.from(e);if(8===t.length)return t;if(t.length>=8)throw new Error("u64 too large");const n=Buffer.alloc(8);return t.copy(n),n}static fromBuffer(e){if(8!==e.length)throw new Error(`Invalid buffer length: ${e.length}`);return new Et([...e].reverse().map((e=>`00${e.toString(16)}`.slice(-2))).join(""),16)}}class St{constructor(e){this.idl=e}async encode(e,t){switch(e){case"token":{const e=Buffer.alloc(165),n=_t.encode(t,e);return e.slice(0,n)}case"mint":{const e=Buffer.alloc(82),n=At.encode(t,e);return e.slice(0,n)}default:throw new Error(`Invalid account name: ${e}`)}}decode(e,t){return this.decodeUnchecked(e,t)}decodeUnchecked(e,t){switch(e){case"token":return function(e){return _t.decode(e)}(t);case"mint":return function(e){return At.decode(e)}(t);default:throw new Error(`Invalid account name: ${e}`)}}memcmp(e,t){switch(e){case"token":return{dataSize:165};case"mint":return{dataSize:82};default:throw new Error(`Invalid account name: ${e}`)}}size(e){var t;return null!==(t=Le(this.idl,e))&&void 0!==t?t:0}}const At=at([wt(gt(),"mintAuthority"),yt("supply"),rt("decimals"),("isInitialized",new vt(rt(),(function(e){if(0===e)return!1;if(1===e)return!0;throw new Error("Invalid bool: "+e)}),(function(e){return e?1:0}),"isInitialized")),wt(gt(),"freezeAuthority")]);const _t=at([gt("mint"),gt("authority"),yt("amount"),wt(gt(),"delegate"),rt("state"),wt(yt(),"isNative"),yt("delegatedAmount"),wt(gt(),"closeAuthority")]);class kt{constructor(e){}decode(e){throw new Error("SPL token program does not have events")}}class xt{constructor(e){}encode(e,t){throw new Error("SPL token does not have user-defined types")}decode(e,t){throw new Error("SPL token does not have user-defined types")}}class It{constructor(e){this.instruction=new lt(e),this.accounts=new St(e),this.events=new kt(e),this.state=new mt(e),this.types=new xt(e)}}class Tt extends je{constructor(e){super(-1,e),this.property=e,this.layout=at([ot("length"),ot("lengthPadding"),ut(nt(ot(),-8),"chars")],this.property)}encode(e,t,n=0){if(null==e)return this.layout.span;const r={chars:Buffer.from(e,"utf8")};return this.layout.encode(r,t,n)}decode(e,t=0){return this.layout.decode(e,t).chars.toString()}getSpan(e,t=0){return ot().span+ot().span+new c(new Uint8Array(e).slice(t,t+4),10,"le").toNumber()}}function Lt(e){return new Tt(e)}function Mt(e){return ut(32,e)}const Pt=ct(ot("instruction"));Pt.addVariant(0,at([st("lamports"),st("space"),Mt("owner")]),"createAccount"),Pt.addVariant(1,at([Mt("owner")]),"assign"),Pt.addVariant(2,at([st("lamports")]),"transfer"),Pt.addVariant(3,at([Mt("base"),Lt("seed"),st("lamports"),st("space"),Mt("owner")]),"createAccountWithSeed"),Pt.addVariant(4,at([Mt("authorized")]),"advanceNonceAccount"),Pt.addVariant(5,at([st("lamports")]),"withdrawNonceAccount"),Pt.addVariant(6,at([Mt("authorized")]),"initializeNonceAccount"),Pt.addVariant(7,at([Mt("authorized")]),"authorizeNonceAccount"),Pt.addVariant(8,at([st("space")]),"allocate"),Pt.addVariant(9,at([Mt("base"),Lt("seed"),st("space"),Mt("owner")]),"allocateWithSeed"),Pt.addVariant(10,at([Mt("base"),Lt("seed"),Mt("owner")]),"assignWithSeed"),Pt.addVariant(11,at([st("lamports"),Lt("seed"),Mt("owner")]),"transferWithSeed"),Math.max(...Object.values(Pt.registry).map((e=>e.span)));class Bt extends je{constructor(e,t,n,r){super(e.span,r),this.layout=e,this.decoder=t,this.encoder=n}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,n){return this.layout.encode(this.encoder(e),t,n)}getSpan(e,t){return this.layout.getSpan(e,t)}}function Ot(t){return new Bt(ut(32),(t=>new e(t)),(e=>e.toBuffer()),t)}at([ot("version"),ot("state"),Ot("authorizedPubkey"),Ot("nonce"),at([it("lamportsPerSignature")],"feeCalculator")]);var Ut=Object.freeze({__proto__:null,hash:function(e){return h(e)}});function Dt(t,n,r){const o=a.concat([t.toBuffer(),a.from(n),r.toBuffer()]),i=h.digest(o);return new e(a.from(i))}function Nt(t,n){let r=a.alloc(0);t.forEach((function(e){if(e.length>32)throw new TypeError("Max seed length exceeded");r=a.concat([r,Rt(e)])})),r=a.concat([r,n.toBuffer(),a.from("ProgramDerivedAddress")]);let o=h(new Uint8Array(r)),i=new c(o,16).toArray(void 0,32);if(e.isOnCurve(new Uint8Array(i)))throw new Error("Invalid seeds, address must fall off the curve");return new e(i)}function Ct(e,t){let n,r=255;for(;0!=r;){try{n=Nt(e.concat(a.from([r])),t)}catch(e){if(e instanceof TypeError)throw e;r--;continue}return[n,r]}throw new Error("Unable to find a viable program address nonce")}const Rt=e=>e instanceof a?e:e instanceof Uint8Array?a.from(e.buffer,e.byteOffset,e.byteLength):a.from(e);async function zt(t,...n){let r=[a.from([97,110,99,104,111,114])];n.forEach((e=>{r.push(e instanceof a?e:L(e).toBuffer())}));const[o]=await e.findProgramAddress(r,L(t));return o}var jt=Object.freeze({__proto__:null,createWithSeedSync:Dt,createProgramAddressSync:Nt,findProgramAddressSync:Ct,associated:zt});const Vt=new e("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),$t=new e("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");var Ft=Object.freeze({__proto__:null,TOKEN_PROGRAM_ID:Vt,ASSOCIATED_PROGRAM_ID:$t,associatedAddress:async function({mint:t,owner:n}){return(await e.findProgramAddress([n.toBuffer(),Vt.toBuffer(),t.toBuffer()],$t))[0]}}),qt={exports:{}};!function(e,t){var n="undefined"!=typeof self?self:Re,r=function(){function e(){this.fetch=!1,this.DOMException=n.DOMException}return e.prototype=n,new e}();!function(e){!function(t){var n="URLSearchParams"in e,r="Symbol"in e&&"iterator"in Symbol,o="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),i="FormData"in e,s="ArrayBuffer"in e;if(s)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};function u(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function l(e){return"string"!=typeof e&&(e=String(e)),e}function d(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r&&(t[Symbol.iterator]=function(){return t}),t}function h(e){this.map={},e instanceof h?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function f(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function p(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function m(e){var t=new FileReader,n=p(t);return t.readAsArrayBuffer(e),n}function y(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:o&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:i&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:n&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():s&&o&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=y(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(e)||c(e))?this._bodyArrayBuffer=y(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var e=f(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(m)}),this.text=function(){var e=f(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,n=p(t);return t.readAsText(e),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}h.prototype.append=function(e,t){e=u(e),t=l(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},h.prototype.delete=function(e){delete this.map[u(e)]},h.prototype.get=function(e){return e=u(e),this.has(e)?this.map[e]:null},h.prototype.has=function(e){return this.map.hasOwnProperty(u(e))},h.prototype.set=function(e,t){this.map[u(e)]=l(t)},h.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},h.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),d(e)},h.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),d(e)},h.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),d(e)},r&&(h.prototype[Symbol.iterator]=h.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(e,t){var n,r,o=(t=t||{}).body;if(e instanceof v){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new h(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new h(t.headers)),this.method=(r=(n=t.method||this.method||"GET").toUpperCase(),w.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function b(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}})),t}function E(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new h(t.headers),this.url=t.url||"",this._initBody(e)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},g.call(v.prototype),g.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},E.error=function(){var e=new E(null,{status:0,statusText:""});return e.type="error",e};var S=[301,302,303,307,308];E.redirect=function(e,t){if(-1===S.indexOf(t))throw new RangeError("Invalid status code");return new E(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function A(e,n){return new Promise((function(r,i){var s=new v(e,n);if(s.signal&&s.signal.aborted)return i(new t.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function c(){a.abort()}a.onload=function(){var e,t,n={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new h,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();t.append(r,o)}})),t)};n.url="responseURL"in a?a.responseURL:n.headers.get("X-Request-URL");var o="response"in a?a.response:a.responseText;r(new E(o,n))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.onabort=function(){i(new t.DOMException("Aborted","AbortError"))},a.open(s.method,s.url,!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&o&&(a.responseType="blob"),s.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),s.signal&&(s.signal.addEventListener("abort",c),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",c)}),a.send(void 0===s._bodyInit?null:s._bodyInit)}))}A.polyfill=!0,e.fetch||(e.fetch=A,e.Headers=h,e.Request=v,e.Response=E),t.Headers=h,t.Request=v,t.Response=E,t.fetch=A,Object.defineProperty(t,"__esModule",{value:!0})}({})}(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var o=r;(t=o.fetch).default=o.fetch,t.fetch=o.fetch,t.Headers=o.Headers,t.Request=o.Request,t.Response=o.Response,e.exports=t}(qt,qt.exports);var Kt=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(qt.exports);async function Gt(e,t){const n=await e.getAccountInfo(t);if(null===n)throw new Error("program account not found");const{program:r}=Ht(n.data),o=await e.getAccountInfo(r.programdataAddress);if(null===o)throw new Error("program data account not found");const{programData:i}=Ht(o.data);return i}const Wt=f.rustEnum([f.struct([],"uninitialized"),f.struct([f.option(f.publicKey(),"authorityAddress")],"buffer"),f.struct([f.publicKey("programdataAddress")],"program"),f.struct([f.u64("slot"),f.option(f.publicKey(),"upgradeAuthorityAddress")],"programData")],void 0,f.u32());function Ht(e){return Wt.decode(e)}var Jt=Object.freeze({__proto__:null,verifiedBuild:async function(e,t,n=5){const r=`https://api.apr.dev/api/v0/program/${t.toString()}/latest?limit=${n}`,[o,i]=await Promise.all([Gt(e,t),Kt(r)]),s=(await i.json()).filter((e=>!e.aborted&&"Built"===e.state&&"Verified"===e.verified));if(0===s.length)return null;const a=s[0];return o.slot.toNumber()!==a.verified_slot?null:a},fetchData:Gt,decodeUpgradeableLoaderState:Ht});Object.freeze({__proto__:null,sha256:Ut,rpc:re,publicKey:jt,bytes:k,token:Ft,features:fe,registry:Jt});const Zt=f.struct([f.publicKey("authority"),f.vecU8("data")]);function Xt(e,t){var n,r;let o={};const i=e.args?e.args.length:0;if(t.length>i){if(t.length!==i+1)throw new Error(`provided too many arguments ${t} to instruction ${null==e?void 0:e.name} expecting: ${null!==(r=null===(n=e.args)||void 0===n?void 0:n.map((e=>e.name)))&&void 0!==r?r:[]}`);o=t.pop()}return[t,o]}class Qt{static build(e,t,r){if("_inner"===e.name)throw new pe("the _inner name is reserved");const o=(...i)=>{const[s,a]=Xt(e,[...i]);T(e.accounts,a.accounts);const c=o.accounts(a.accounts);return void 0!==a.remainingAccounts&&c.push(...a.remainingAccounts),he("debug-logs")&&console.log("Outgoing account metas:",c),new n({keys:c,programId:r,data:t(e.name,I(e,...s))})};return o.accounts=t=>Qt.accountsArray(t,e.accounts,e.name),o}static accountsArray(e,t,n){return e?t.map((t=>{if(void 0!==("accounts"in t?t.accounts:void 0)){const r=e[t.name];return Qt.accountsArray(r,t.accounts,n).flat()}{const r=t;let o;try{o=L(e[t.name])}catch(e){throw new Error(`Wrong input type for account "${t.name}" in the instruction accounts object${void 0!==n?' for instruction "'+n+'"':""}. Expected PublicKey or string.`)}return{pubkey:o,isWritable:r.isMut,isSigner:r.isSigner}}})).flat():[]}}class Yt{static build(e,t,n,r){return async(...o)=>{var i;const s=t(...o),[,a]=Xt(e,[...o]);if(void 0===r.sendAndConfirm)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");try{return await r.sendAndConfirm(s,null!==(i=a.signers)&&void 0!==i?i:[],a.options)}catch(e){throw we(e,n)}}}}class en{static build(e,n){return(...r)=>{var o,i,s;const[,a]=Xt(e,[...r]),c=new t;if(a.preInstructions&&a.instructions)throw new Error("instructions is deprecated, use preInstructions");return null===(o=a.preInstructions)||void 0===o||o.forEach((e=>c.add(e))),null===(i=a.instructions)||void 0===i||i.forEach((e=>c.add(e))),c.add(n(...r)),null===(s=a.postInstructions)||void 0===s||s.forEach((e=>c.add(e))),c}}}class tn{constructor(e,t,n=ce(),r=new Ce(e)){this.provider=n,this.coder=r,this._idl=e,this._programId=t,this._address=nn(t),this._sub=null;const[o,s,a]=(()=>{var o;let s={},a={},c={};return null===(o=e.state)||void 0===o||o.methods.forEach((o=>{const u=Qt.build(o,((e,t)=>r.instruction.encodeState(e,t)),t);u.accounts=e=>{const r=function(e,t,n,r){if("new"===n.name){const[n]=Ct([],e);if(void 0===t.wallet)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");return[{pubkey:t.wallet.publicKey,isWritable:!1,isSigner:!0},{pubkey:nn(e),isWritable:!0,isSigner:!1},{pubkey:n,isWritable:!1,isSigner:!1},{pubkey:i.programId,isWritable:!1,isSigner:!1},{pubkey:e,isWritable:!1,isSigner:!1}]}return T(n.accounts,r),[{pubkey:nn(e),isWritable:!0,isSigner:!1}]}(t,n,o,e);return r.concat(Qt.accountsArray(e,o.accounts,o.name))};const l=en.build(o,u),h=Yt.build(o,l,x(e),n),f=d(o.name);s[f]=u,a[f]=l,c[f]=h})),[s,a,c]})();this.instruction=o,this.transaction=s,this.rpc=a}get programId(){return this._programId}async fetch(){const e=this.address(),t=await this.provider.connection.getAccountInfo(e);if(null===t)throw new Error(`Account does not exist ${e.toString()}`);const n=this._idl.state;if(!n)throw new Error("State is not specified in IDL.");if((await De(n.struct.name)).compare(t.data.slice(0,8)))throw new Error("Invalid account discriminator");return this.coder.state.decode(t.data)}address(){return this._address}subscribe(e){if(null!==this._sub)return this._sub.ee;const t=new m,n=this.provider.connection.onAccountChange(this.address(),(e=>{const n=this.coder.state.decode(e.data);t.emit("change",n)}),e);return this._sub={ee:t,listener:n},t}unsubscribe(){null!==this._sub&&this.provider.connection.removeAccountChangeListener(this._sub.listener).then((async()=>{this._sub=null})).catch(console.error)}}function nn(e){let[t]=Ct([],e);return Dt(t,"unversioned",e)}class rn{constructor(e,t,n,r,o){this._idlAccount=t,this._programId=n,this._provider=null!=r?r:ce(),this._coder=null!=o?o:new Ce(e),this._size=this._coder.accounts.size(t)}get size(){return this._size}get programId(){return this._programId}get provider(){return this._provider}get coder(){return this._coder}async fetchNullable(e,t){const n=await this.getAccountInfo(e,t);return null===n?null:this._coder.accounts.decode(this._idlAccount.name,n.data)}async fetch(e,t){const n=await this.fetchNullable(e,t);if(null===n)throw new Error(`Account does not exist ${e.toString()}`);return n}async fetchMultiple(e,t){return(await Z(this._provider.connection,e.map((e=>L(e))),t)).map((e=>null==e?null:this._coder.accounts.decode(this._idlAccount.name,null==e?void 0:e.account.data)))}async all(e){return(await this._provider.connection.getProgramAccounts(this._programId,{commitment:this._provider.connection.commitment,filters:[{memcmp:this.coder.accounts.memcmp(this._idlAccount.name,e instanceof Buffer?e:void 0)},...Array.isArray(e)?e:[]]})).map((({pubkey:e,account:t})=>({publicKey:e,account:this._coder.accounts.decode(this._idlAccount.name,t.data)})))}subscribe(e,t){const n=on.get(e.toString());if(n)return n.ee;const r=new m;e=L(e);const o=this._provider.connection.onAccountChange(e,(e=>{const t=this._coder.accounts.decode(this._idlAccount.name,e.data);r.emit("change",t)}),t);return on.set(e.toString(),{ee:r,listener:o}),r}async unsubscribe(e){let t=on.get(e.toString());t?on&&await this._provider.connection.removeAccountChangeListener(t.listener).then((()=>{on.delete(e.toString())})).catch(console.error):console.warn("Address is not subscribed")}async createInstruction(e,t){const n=this.size;if(void 0===this._provider.wallet)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");return i.createAccount({fromPubkey:this._provider.wallet.publicKey,newAccountPubkey:e.publicKey,space:null!=t?t:n,lamports:await this._provider.connection.getMinimumBalanceForRentExemption(null!=t?t:n),programId:this._programId})}async associated(...e){const t=await this.associatedAddress(...e);return await this.fetch(t)}async associatedAddress(...e){return await zt(this._programId,...e)}async getAccountInfo(e,t){return await this._provider.connection.getAccountInfo(L(e),t)}}const on=new Map,sn="Program log: ".length,an="Program data: ".length;class cn{constructor(e,t,n){this._programId=e,this._provider=t,this._eventParser=new un(e,n),this._eventCallbacks=new Map,this._eventListeners=new Map,this._listenerIdCount=0}addEventListener(e,t){var n;let r=this._listenerIdCount;return this._listenerIdCount+=1,e in this._eventCallbacks||this._eventListeners.set(e,[]),this._eventListeners.set(e,(null!==(n=this._eventListeners.get(e))&&void 0!==n?n:[]).concat(r)),this._eventCallbacks.set(r,[e,t]),void 0!==this._onLogsSubscriptionId||(this._onLogsSubscriptionId=this._provider.connection.onLogs(this._programId,((e,t)=>{if(!e.err)for(const n of this._eventParser.parseLogs(e.logs)){const r=this._eventListeners.get(n.name);r&&r.forEach((r=>{const o=this._eventCallbacks.get(r);if(o){const[,r]=o;r(n.data,t.slot,e.signature)}}))}}))),r}async removeEventListener(e){const t=this._eventCallbacks.get(e);if(!t)throw new Error(`Event listener ${e} doesn't exist!`);const[n]=t;let r=this._eventListeners.get(n);if(!r)throw new Error(`Event listeners don't exist for ${n}!`);this._eventCallbacks.delete(e),r=r.filter((t=>t!==e)),0===r.length&&this._eventListeners.delete(n),0==this._eventCallbacks.size&&(y.ok(0===this._eventListeners.size),void 0!==this._onLogsSubscriptionId&&(await this._provider.connection.removeOnLogsListener(this._onLogsSubscriptionId),this._onLogsSubscriptionId=void 0))}}class un{constructor(e,t){this.coder=t,this.programId=e}*parseLogs(e){const t=new dn(e),n=new ln;let r=t.next();for(;null!==r;){let[e,o,i]=this.handleLog(n,r);e&&(yield e),o&&n.push(o),i&&n.pop(),r=t.next()}}handleLog(e,t){return e.stack.length>0&&e.program()===this.programId.toString()?this.handleProgramLog(t):[null,...this.handleSystemLog(t)]}handleProgramLog(e){if(e.startsWith("Program log: ")||e.startsWith("Program data: ")){const t=e.startsWith("Program log: ")?e.slice(sn):e.slice(an);return[this.coder.events.decode(t),null,!1]}return[null,...this.handleSystemLog(e)]}handleSystemLog(e){const t=e.split(":")[0];return null!==t.match(/^Program (.*) success/g)?[null,!0]:t.startsWith(`Program ${this.programId.toString()} invoke`)?[this.programId.toString(),!1]:t.includes("invoke")?["cpi",!1]:[null,!1]}}class ln{constructor(){this.stack=[]}program(){return y.ok(this.stack.length>0),this.stack[this.stack.length-1]}push(e){this.stack.push(e)}pop(){y.ok(this.stack.length>0),this.stack.pop()}}class dn{constructor(e){this.logs=e}next(){if(0===this.logs.length)return null;let e=this.logs[0];return this.logs=this.logs.slice(1),e}}new e("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");const hn={version:"0.1.0",name:"spl_token",instructions:[{name:"initializeMint",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"decimals",type:"u8"},{name:"mintAuthority",type:"publicKey"},{name:"freezeAuthority",type:{coption:"publicKey"}}]},{name:"initializeAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[]},{name:"initializeMultisig",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"m",type:"u8"}]},{name:"transfer",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"approve",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"delegate",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"revoke",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[]},{name:"setAuthority",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"authorityType",type:"u8"},{name:"newAuthority",type:{coption:"publicKey"}}]},{name:"mintTo",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"to",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"burn",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"closeAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!1}],args:[]},{name:"freezeAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[]},{name:"thawAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[]},{name:"transferChecked",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"approveChecked",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"delegate",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"mintToChecked",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"to",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"burnChecked",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"initializeAccount2",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"authority",type:"publicKey"}]},{name:"syncNative",accounts:[{name:"account",isMut:!0,isSigner:!1}],args:[]},{name:"initializeAccount3",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1}],args:[{name:"authority",type:"publicKey"}]},{name:"initializeMultisig2",accounts:[{name:"account",isMut:!0,isSigner:!1}],args:[{name:"m",type:"u8"}]},{name:"initializeMint2",accounts:[{name:"mint",isMut:!0,isSigner:!1}],args:[{name:"decimals",type:"u8"},{name:"mintAuthority",type:"publicKey"},{name:"freezeAuthority",type:{coption:"publicKey"}}]}],accounts:[{name:"mint",type:{kind:"struct",fields:[{name:"mintAuthority",type:{coption:"publicKey"}},{name:"supply",type:"u64"},{name:"decimals",type:"u8"},{name:"isInitialized",type:"bool"},{name:"freezeAuthority",type:{coption:"publicKey"}}]}},{name:"token",type:{kind:"struct",fields:[{name:"mint",type:"publicKey"},{name:"authority",type:"publicKey"},{name:"amount",type:"u64"},{name:"delegate",type:{coption:"publicKey"}},{name:"state",type:"u8"},{name:"isNative",type:{coption:"u64"}},{name:"delegatedAmount",type:"u64"},{name:"closeAuthority",type:{coption:"publicKey"}}]}}]};class fn{constructor(e,t,n,r,o,i){this._args=e,this._accounts=t,this._provider=n,this._programId=r,this._idlIx=o,this._accountStore=new pn(n,i)}async resolve(){for(let e=0;e<this._idlIx.accounts.length;e+=1){const t=this._idlIx.accounts[e],n=d(t.name);if(!t.isSigner||this._accounts[n])Reflect.has(fn.CONST_ACCOUNTS,n)&&!this._accounts[n]&&(this._accounts[n]=fn.CONST_ACCOUNTS[n]);else{if(void 0===this._provider.wallet)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");this._accounts[n]=this._provider.wallet.publicKey}}for(let e=0;e<this._idlIx.accounts.length;e+=1){const t=this._idlIx.accounts[e],n=d(t.name);t.pda&&t.pda.seeds.length>0&&!this._accounts[n]&&await this.autoPopulatePda(t)}}async autoPopulatePda(t){if(!t.pda||!t.pda.seeds)throw new Error("Must have seeds");const n=await Promise.all(t.pda.seeds.map((e=>this.toBuffer(e)))),r=await this.parseProgramId(t),[o]=await e.findProgramAddress(n,r);this._accounts[d(t.name)]=o}async parseProgramId(t){var n;if(!(null===(n=t.pda)||void 0===n?void 0:n.programId))return this._programId;switch(t.pda.programId.kind){case"const":return new e(this.toBufferConst(t.pda.programId.value));case"arg":return this.argValue(t.pda.programId);case"account":return await this.accountValue(t.pda.programId);default:throw new Error(`Unexpected program seed kind: ${t.pda.programId.kind}`)}}async toBuffer(e){switch(e.kind){case"const":return this.toBufferConst(e);case"arg":return await this.toBufferArg(e);case"account":return await this.toBufferAccount(e);default:throw new Error(`Unexpected seed kind: ${e.kind}`)}}toBufferConst(e){return this.toBufferValue(e.type,e.value)}async toBufferArg(e){const t=this.argValue(e);return this.toBufferValue(e.type,t)}argValue(e){const t=d(e.path.split(".")[0]),n=this._idlIx.args.findIndex((e=>e.name===t));if(-1===n)throw new Error(`Unable to find argument for seed: ${t}`);return this._args[n]}async toBufferAccount(e){const t=await this.accountValue(e);return this.toBufferValue(e.type,t)}async accountValue(e){const t=e.path.split("."),n=t[0],r=this._accounts[d(n)];if(1===t.length)return r;const o=await this._accountStore.fetchAccount(e.account,r);return this.parseAccountValue(o,t.slice(1))}parseAccountValue(e,t){let n;for(;t.length>0;)n=e[d(t[0])],t=t.slice(1);return n}toBufferValue(e,t){switch(e){case"u8":return Buffer.from([t]);case"u16":let n=Buffer.alloc(2);return n.writeUInt16LE(t),n;case"u32":let r=Buffer.alloc(4);return r.writeUInt32LE(t),r;case"u64":let o=Buffer.alloc(8);return o.writeBigUInt64LE(BigInt(t)),o;case"string":return Buffer.from(v(t));case"publicKey":return t.toBuffer();default:if(e.array)return Buffer.from(t);throw new Error(`Unexpected seed type: ${e}`)}}}fn.CONST_ACCOUNTS={associatedTokenProgram:$t,rent:o,systemProgram:i.programId,tokenProgram:Vt};class pn{constructor(e,t){this._provider=e,this._accounts=t,this._cache=new Map}async fetchAccount(e,t){const n=t.toString();if(!this._cache.has(n))if("TokenAccount"===e){const e=await this._provider.connection.getAccountInfo(t);if(null===e)throw new Error(`invalid account info for ${n}`);const r=new It(hn).accounts.decode("token",e.data);this._cache.set(n,r)}else{const r=this._accounts[d(e)].fetch(t);this._cache.set(n,r)}return this._cache.get(n)}}class mn{static build(e,t,n,r,o,i,s,a,c){return(...u)=>new yn(u,r,o,i,s,a,e,t,n,c)}}class yn{constructor(e,t,n,r,o,i,s,a,c,u){this._args=e,this._ixFn=t,this._txFn=n,this._rpcFn=r,this._simulateFn=o,this._viewFn=i,this._accounts={},this._remainingAccounts=[],this._signers=[],this._preInstructions=[],this._postInstructions=[],this._autoResolveAccounts=!0,this._accountsResolver=new fn(e,this._accounts,s,a,c,u)}async pubkeys(){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._accounts}accounts(e){return this._autoResolveAccounts=!0,Object.assign(this._accounts,e),this}accountsStrict(e){return this._autoResolveAccounts=!1,Object.assign(this._accounts,e),this}signers(e){return this._signers=this._signers.concat(e),this}remainingAccounts(e){return this._remainingAccounts=this._remainingAccounts.concat(e),this}preInstructions(e){return this._preInstructions=this._preInstructions.concat(e),this}postInstructions(e){return this._postInstructions=this._postInstructions.concat(e),this}async rpc(e){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._rpcFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async view(e){if(this._autoResolveAccounts&&await this._accountsResolver.resolve(),!this._viewFn)throw new Error("Method does not support views");return this._viewFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async simulate(e){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._simulateFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async instruction(){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._ixFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}async transaction(){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._txFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}}class gn{constructor(e,t,n,r){t=L(t),n||(n=ce()),this._idl=e,this._provider=n,this._programId=t,this._coder=null!=r?r:new Ce(e),this._events=new cn(this._programId,n,this._coder);const[o,i,s,a,c,u,l,h]=class{static build(e,t,n,r){const o={},i={},s={},a={},c={},u={},l=x(e),h=e.accounts?class{static build(e,t,n,r){var o;const i={};return null===(o=e.accounts)||void 0===o||o.forEach((o=>{const s=d(o.name);i[s]=new rn(e,o,n,r,t)})),i}}.build(e,t,n,r):{},f=class{static build(e,t,n,r){if(void 0!==e.state)return new tn(e,n,r,t)}}.build(e,t,n,r);return e.instructions.forEach((f=>{const p=Qt.build(f,((e,n)=>t.instruction.encode(e,n)),n),m=en.build(f,p),y=Yt.build(f,m,l,r),g=class{static build(e,t,n,r,o,i,s){return async(...a)=>{var c;const u=t(...a),[,l]=Xt(e,[...a]);let d;if(void 0===r.simulate)throw new Error("This function requires 'Provider.simulate' to be implemented.");try{d=await r.simulate(u,l.signers,null===(c=l.options)||void 0===c?void 0:c.commitment)}catch(e){throw we(e,n)}if(void 0===d)throw new Error("Unable to simulate transaction");const h=d.logs;if(!h)throw new Error("Simulated logs not found");const f=[];if(s.events){let e=new un(i,o);for(const t of e.parseLogs(h))f.push(t)}return{events:f,raw:h}}}}.build(f,m,l,r,t,n,e),w=class{static build(e,t,n,r){const o=t.accounts.find((e=>e.isMut)),i=!!t.returns;if(!o&&i)return async(...o)=>{var i,s;let a=await n(...o);const c=`Program return: ${e} `;let u=a.raw.find((e=>e.startsWith(c)));if(!u)throw new Error("View expected return log");let l=A(u.slice(c.length)),d=t.returns;if(!d)throw new Error("View expected return type");return ke.fieldLayout({type:d},Array.from([...null!==(i=r.accounts)&&void 0!==i?i:[],...null!==(s=r.types)&&void 0!==s?s:[]])).decode(l)}}}.build(n,f,g,e),v=mn.build(r,n,f,p,m,y,g,w,h),b=d(f.name);i[b]=p,s[b]=m,o[b]=y,a[b]=g,c[b]=v,w&&(u[b]=w)})),[o,i,s,h,a,c,f,u]}}.build(e,this._coder,t,n);this.rpc=o,this.instruction=i,this.transaction=s,this.account=a,this.simulate=c,this.methods=u,this.state=l,this.views=h}get programId(){return this._programId}get idl(){return this._idl}get coder(){return this._coder}get provider(){return this._provider}static async at(e,t){const n=L(e),r=await gn.fetchIdl(n,t);if(!r)throw new Error(`IDL not found for program: ${e.toString()}`);return new gn(r,n,t)}static async fetchIdl(t,n){n=null!=n?n:ce();const r=L(t),o=await async function(t){const n=(await e.findProgramAddress([],t))[0];return await e.createWithSeed(n,"anchor:idl",t)}(r),i=await n.connection.getAccountInfo(o);if(!i)return null;let s=(a=i.data.slice(8),Zt.decode(a));var a;const c=p(s.data);return JSON.parse(w(c))}addEventListener(e,t){return this._events.addEventListener(e,t)}async removeEventListener(e){return await this._events.removeEventListener(e)}}new e("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),new e("11111111111111111111111111111111");var wn={};Object.defineProperty(wn,"__esModule",{value:!0}),wn.s16=wn.s8=wn.nu64be=wn.u48be=wn.u40be=wn.u32be=wn.u24be=wn.u16be=wn.nu64=wn.u48=wn.u40=sr=wn.u32=wn.u24=wn.u16=or=wn.u8=rr=wn.offset=wn.greedy=wn.Constant=wn.UTF8=wn.CString=wn.Blob=wn.Boolean=wn.BitField=wn.BitStructure=wn.VariantLayout=wn.Union=wn.UnionLayoutDiscriminator=wn.UnionDiscriminator=wn.Structure=wn.Sequence=wn.DoubleBE=wn.Double=wn.FloatBE=wn.Float=wn.NearInt64BE=wn.NearInt64=wn.NearUInt64BE=wn.NearUInt64=wn.IntBE=wn.Int=wn.UIntBE=wn.UInt=wn.OffsetLayout=wn.GreedyCount=wn.ExternalLayout=wn.bindConstructorLayout=wn.nameWithProperty=wn.Layout=wn.uint8ArrayToBuffer=wn.checkUint8Array=void 0,wn.constant=wn.utf8=wn.cstr=lr=wn.blob=wn.unionLayoutDiscriminator=wn.union=cr=wn.seq=wn.bits=ar=wn.struct=wn.f64be=wn.f64=wn.f32be=wn.f32=wn.ns64be=wn.s48be=wn.s40be=wn.s32be=wn.s24be=wn.s16be=wn.ns64=wn.s48=wn.s40=wn.s32=wn.s24=void 0;const vn=s;function bn(e){if(!(e instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}function En(e){return bn(e),vn.Buffer.from(e.buffer,e.byteOffset,e.length)}wn.checkUint8Array=bn,wn.uint8ArrayToBuffer=En;class Sn{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}var An=wn.Layout=Sn;function _n(e,t){return t.property?e+"["+t.property+"]":e}wn.nameWithProperty=_n,wn.bindConstructorLayout=function(e,t){if("function"!=typeof e)throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(e,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof Sn))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");e.layout_=t,t.boundConstructor_=e,t.makeDestinationObject=()=>new e,Object.defineProperty(e.prototype,"encode",{value(e,n){return t.encode(this,e,n)},writable:!0}),Object.defineProperty(e,"decode",{value:(e,n)=>t.decode(e,n),writable:!0})};class kn extends Sn{isCount(){throw new Error("ExternalLayout is abstract")}}wn.ExternalLayout=kn;class xn extends kn{constructor(e=1,t){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t=0){bn(e);const n=e.length-t;return Math.floor(n/this.elementSpan)}encode(e,t,n){return 0}}wn.GreedyCount=xn;class In extends kn{constructor(e,t=0,n){if(!(e instanceof Sn))throw new TypeError("layout must be a Layout");if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,n||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof Tn||this.layout instanceof Ln}decode(e,t=0){return this.layout.decode(e,t+this.offset)}encode(e,t,n=0){return this.layout.encode(e,t,n+this.offset)}}wn.OffsetLayout=In;class Tn extends Sn{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return En(e).readUIntLE(t,this.span)}encode(e,t,n=0){return En(t).writeUIntLE(e,n,this.span),this.span}}wn.UInt=Tn;class Ln extends Sn{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return En(e).readUIntBE(t,this.span)}encode(e,t,n=0){return En(t).writeUIntBE(e,n,this.span),this.span}}wn.UIntBE=Ln;class Mn extends Sn{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return En(e).readIntLE(t,this.span)}encode(e,t,n=0){return En(t).writeIntLE(e,n,this.span),this.span}}wn.Int=Mn;class Pn extends Sn{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return En(e).readIntBE(t,this.span)}encode(e,t,n=0){return En(t).writeIntBE(e,n,this.span),this.span}}wn.IntBE=Pn;const Bn=Math.pow(2,32);function On(e){const t=Math.floor(e/Bn);return{hi32:t,lo32:e-t*Bn}}function Un(e,t){return e*Bn+t}class Dn extends Sn{constructor(e){super(8,e)}decode(e,t=0){const n=En(e),r=n.readUInt32LE(t);return Un(n.readUInt32LE(t+4),r)}encode(e,t,n=0){const r=On(e),o=En(t);return o.writeUInt32LE(r.lo32,n),o.writeUInt32LE(r.hi32,n+4),8}}wn.NearUInt64=Dn;class Nn extends Sn{constructor(e){super(8,e)}decode(e,t=0){const n=En(e);return Un(n.readUInt32BE(t),n.readUInt32BE(t+4))}encode(e,t,n=0){const r=On(e),o=En(t);return o.writeUInt32BE(r.hi32,n),o.writeUInt32BE(r.lo32,n+4),8}}wn.NearUInt64BE=Nn;class Cn extends Sn{constructor(e){super(8,e)}decode(e,t=0){const n=En(e),r=n.readUInt32LE(t);return Un(n.readInt32LE(t+4),r)}encode(e,t,n=0){const r=On(e),o=En(t);return o.writeUInt32LE(r.lo32,n),o.writeInt32LE(r.hi32,n+4),8}}wn.NearInt64=Cn;class Rn extends Sn{constructor(e){super(8,e)}decode(e,t=0){const n=En(e);return Un(n.readInt32BE(t),n.readUInt32BE(t+4))}encode(e,t,n=0){const r=On(e),o=En(t);return o.writeInt32BE(r.hi32,n),o.writeUInt32BE(r.lo32,n+4),8}}wn.NearInt64BE=Rn;class zn extends Sn{constructor(e){super(4,e)}decode(e,t=0){return En(e).readFloatLE(t)}encode(e,t,n=0){return En(t).writeFloatLE(e,n),4}}wn.Float=zn;class jn extends Sn{constructor(e){super(4,e)}decode(e,t=0){return En(e).readFloatBE(t)}encode(e,t,n=0){return En(t).writeFloatBE(e,n),4}}wn.FloatBE=jn;class Vn extends Sn{constructor(e){super(8,e)}decode(e,t=0){return En(e).readDoubleLE(t)}encode(e,t,n=0){return En(t).writeDoubleLE(e,n),8}}wn.Double=Vn;class $n extends Sn{constructor(e){super(8,e)}decode(e,t=0){return En(e).readDoubleBE(t)}encode(e,t,n=0){return En(t).writeDoubleBE(e,n),8}}wn.DoubleBE=$n;class Fn extends Sn{constructor(e,t,n){if(!(e instanceof Sn))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof kn&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let r=-1;!(t instanceof kn)&&0<e.span&&(r=t*e.span),super(r,n),this.elementLayout=e,this.count=t}getSpan(e,t=0){if(0<=this.span)return this.span;let n=0,r=this.count;if(r instanceof kn&&(r=r.decode(e,t)),0<this.elementLayout.span)n=r*this.elementLayout.span;else{let o=0;for(;o<r;)n+=this.elementLayout.getSpan(e,t+n),++o}return n}decode(e,t=0){const n=[];let r=0,o=this.count;for(o instanceof kn&&(o=o.decode(e,t));r<o;)n.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),r+=1;return n}encode(e,t,n=0){const r=this.elementLayout,o=e.reduce(((e,o)=>e+r.encode(o,t,n+e)),0);return this.count instanceof kn&&this.count.encode(e.length,t,n),o}}wn.Sequence=Fn;class qn extends Sn{constructor(e,t,n){if(!Array.isArray(e)||!e.reduce(((e,t)=>e&&t instanceof Sn),!0))throw new TypeError("fields must be array of Layout instances");"boolean"==typeof t&&void 0===n&&(n=t,t=void 0);for(const t of e)if(0>t.span&&void 0===t.property)throw new Error("fields cannot contain unnamed variable-length layout");let r=-1;try{r=e.reduce(((e,t)=>e+t.getSpan()),0)}catch(e){}super(r,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce(((n,r)=>{const o=r.getSpan(e,t);return t+=o,n+o}),0)}catch(e){throw new RangeError("indeterminate span")}return n}decode(e,t=0){bn(e);const n=this.makeDestinationObject();for(const r of this.fields)if(void 0!==r.property&&(n[r.property]=r.decode(e,t)),t+=r.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return n}encode(e,t,n=0){const r=n;let o=0,i=0;for(const r of this.fields){let s=r.span;if(i=0<s?s:0,void 0!==r.property){const o=e[r.property];void 0!==o&&(i=r.encode(o,t,n),0>s&&(s=r.getSpan(t,n)))}o=n,n+=s}return o+i-r}fromArray(e){const t=this.makeDestinationObject();for(const n of this.fields)void 0!==n.property&&0<e.length&&(t[n.property]=e.shift());return t}layoutFor(e){if("string"!=typeof e)throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if("string"!=typeof e)throw new TypeError("property must be string");let t=0;for(const n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}}wn.Structure=qn;class Kn{constructor(e){this.property=e}decode(e,t){throw new Error("UnionDiscriminator is abstract")}encode(e,t,n){throw new Error("UnionDiscriminator is abstract")}}wn.UnionDiscriminator=Kn;class Gn extends Kn{constructor(e,t){if(!(e instanceof kn&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,n){return this.layout.encode(e,t,n)}}wn.UnionLayoutDiscriminator=Gn;class Wn extends Sn{constructor(e,t,n){let r;if(e instanceof Tn||e instanceof Ln)r=new Gn(new In(e));else if(e instanceof kn&&e.isCount())r=new Gn(e);else{if(!(e instanceof Kn))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");r=e}if(void 0===t&&(t=null),!(null===t||t instanceof Sn))throw new TypeError("defaultLayout must be null or a Layout");if(null!==t){if(0>t.span)throw new Error("defaultLayout must have constant span");void 0===t.property&&(t=t.replicate("content"))}let o=-1;t&&(o=t.span,0<=o&&(e instanceof Tn||e instanceof Ln)&&(o+=r.layout.span)),super(o,n),this.discriminator=r,this.usesPrefixDiscriminator=e instanceof Tn||e instanceof Ln,this.defaultLayout=t,this.registry={};let i=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(e){return i(e)},this.configGetSourceVariant=function(e){i=e.bind(this)}}getSpan(e,t=0){if(0<=this.span)return this.span;const n=this.getVariant(e,t);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,t)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(const t in this.registry){const n=this.registry[t];if(n.property&&Object.prototype.hasOwnProperty.call(e,n.property))return n}throw new Error("unable to infer src variant")}decode(e,t=0){let n;const r=this.discriminator,o=r.decode(e,t),i=this.registry[o];if(void 0===i){const i=this.defaultLayout;let s=0;this.usesPrefixDiscriminator&&(s=r.layout.span),n=this.makeDestinationObject(),n[r.property]=o,n[i.property]=i.decode(e,t+s)}else n=i.decode(e,t);return n}encode(e,t,n=0){const r=this.getSourceVariant(e);if(void 0===r){const r=this.discriminator,o=this.defaultLayout;let i=0;return this.usesPrefixDiscriminator&&(i=r.layout.span),r.encode(e[r.property],t,n),i+o.encode(e[o.property],t,n+i)}return r.encode(e,t,n)}addVariant(e,t,n){const r=new Hn(this,e,t,n);return this.registry[e]=r,r}getVariant(e,t=0){let n;return n=e instanceof Uint8Array?this.discriminator.decode(e,t):e,this.registry[n]}}wn.Union=Wn;class Hn extends Sn{constructor(e,t,n,r){if(!(e instanceof Wn))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if("string"==typeof n&&void 0===r&&(r=n,n=null),n){if(!(n instanceof Sn))throw new TypeError("layout must be a Layout");if(null!==e.defaultLayout&&0<=n.span&&n.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!=typeof r)throw new TypeError("variant must have a String property")}let o=e.span;0>e.span&&(o=n?n.span:0,0<=o&&e.usesPrefixDiscriminator&&(o+=e.discriminator.layout.span)),super(o,r),this.union=e,this.variant=t,this.layout=n||null}getSpan(e,t=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let r=0;return this.layout&&(r=this.layout.getSpan(e,t+n)),n+r}decode(e,t=0){const n=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,t+r):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(e,t,n=0){let r=0;if(this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,n);let o=r;if(this.layout&&(this.layout.encode(e[this.property],t,n+r),o+=this.layout.getSpan(t,n+r),0<=this.union.span&&o>this.union.span))throw new Error("encoded variant overruns containing union");return o}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}function Jn(e){return 0>e&&(e+=4294967296),e}wn.VariantLayout=Hn;class Zn extends Sn{constructor(e,t,n){if(!(e instanceof Tn||e instanceof Ln))throw new TypeError("word must be a UInt or UIntBE layout");if("string"==typeof t&&void 0===n&&(n=t,t=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,n),this.word=e,this.msb=!!t,this.fields=[];let r=0;this._packedSetValue=function(e){return r=Jn(e),this},this._packedGetValue=function(){return r}}decode(e,t=0){const n=this.makeDestinationObject(),r=this.word.decode(e,t);this._packedSetValue(r);for(const t of this.fields)void 0!==t.property&&(n[t.property]=t.decode(e));return n}encode(e,t,n=0){const r=this.word.decode(t,n);this._packedSetValue(r);for(const t of this.fields)if(void 0!==t.property){const n=e[t.property];void 0!==n&&t.encode(n)}return this.word.encode(this._packedGetValue(),t,n)}addField(e,t){const n=new Xn(this,e,t);return this.fields.push(n),n}addBoolean(e){const t=new Qn(this,e);return this.fields.push(t),t}fieldFor(e){if("string"!=typeof e)throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}}wn.BitStructure=Zn;class Xn{constructor(e,t,n){if(!(e instanceof Zn))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw new TypeError("bits must be positive integer");const r=8*e.span,o=e.fields.reduce(((e,t)=>e+t.bits),0);if(t+o>r)throw new Error("bits too long for span remainder ("+(r-o)+" of "+r+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,32===t&&(this.valueMask=4294967295),this.start=o,this.container.msb&&(this.start=r-o-t),this.wordMask=Jn(this.valueMask<<this.start),this.property=n}decode(e,t){return Jn(this.container._packedGetValue()&this.wordMask)>>>this.start}encode(e){if("number"!=typeof e||!Number.isInteger(e)||e!==Jn(e&this.valueMask))throw new TypeError(_n("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const t=this.container._packedGetValue(),n=Jn(e<<this.start);this.container._packedSetValue(Jn(t&~this.wordMask)|n)}}wn.BitField=Xn;class Qn extends Xn{constructor(e,t){super(e,1,t)}decode(e,t){return!!super.decode(e,t)}encode(e){"boolean"==typeof e&&(e=+e),super.encode(e)}}wn.Boolean=Qn;class Yn extends Sn{constructor(e,t){if(!(e instanceof kn&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof kn||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e,t=0){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),En(e).slice(t,t+n)}encode(e,t,n){let r=this.length;if(this.length instanceof kn&&(r=e.length),!(e instanceof Uint8Array&&r===e.length))throw new TypeError(_n("Blob.encode",this)+" requires (length "+r+") Uint8Array as src");if(n+r>t.length)throw new RangeError("encoding overruns Uint8Array");const o=En(e);return En(t).write(o.toString("hex"),n,r,"hex"),this.length instanceof kn&&this.length.encode(r,t,n),r}}wn.Blob=Yn;class er extends Sn{constructor(e){super(-1,e)}getSpan(e,t=0){bn(e);let n=t;for(;n<e.length&&0!==e[n];)n+=1;return 1+n-t}decode(e,t=0){const n=this.getSpan(e,t);return En(e).slice(t,t+n-1).toString("utf-8")}encode(e,t,n=0){"string"!=typeof e&&(e=String(e));const r=vn.Buffer.from(e,"utf8"),o=r.length;if(n+o>t.length)throw new RangeError("encoding overruns Buffer");const i=En(t);return r.copy(i,n),i[n+o]=0,o+1}}wn.CString=er;class tr extends Sn{constructor(e,t){if("string"==typeof e&&void 0===t&&(t=e,e=void 0),void 0===e)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t=0){return bn(e),e.length-t}decode(e,t=0){const n=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return En(e).slice(t,t+n).toString("utf-8")}encode(e,t,n=0){"string"!=typeof e&&(e=String(e));const r=vn.Buffer.from(e,"utf8"),o=r.length;if(0<=this.maxSpan&&this.maxSpan<o)throw new RangeError("text length exceeds maxSpan");if(n+o>t.length)throw new RangeError("encoding overruns Buffer");return r.copy(En(t),n),o}}wn.UTF8=tr;class nr extends Sn{constructor(e,t){super(0,t),this.value=e}decode(e,t){return this.value}encode(e,t,n){return 0}}wn.Constant=nr,wn.greedy=(e,t)=>new xn(e,t);var rr=wn.offset=(e,t,n)=>new In(e,t,n),or=wn.u8=e=>new Tn(1,e),ir=wn.u16=e=>new Tn(2,e);wn.u24=e=>new Tn(3,e);var sr=wn.u32=e=>new Tn(4,e);wn.u40=e=>new Tn(5,e),wn.u48=e=>new Tn(6,e),wn.nu64=e=>new Dn(e),wn.u16be=e=>new Ln(2,e),wn.u24be=e=>new Ln(3,e),wn.u32be=e=>new Ln(4,e),wn.u40be=e=>new Ln(5,e),wn.u48be=e=>new Ln(6,e),wn.nu64be=e=>new Nn(e),wn.s8=e=>new Mn(1,e),wn.s16=e=>new Mn(2,e),wn.s24=e=>new Mn(3,e),wn.s32=e=>new Mn(4,e),wn.s40=e=>new Mn(5,e),wn.s48=e=>new Mn(6,e),wn.ns64=e=>new Cn(e),wn.s16be=e=>new Pn(2,e),wn.s24be=e=>new Pn(3,e),wn.s32be=e=>new Pn(4,e),wn.s40be=e=>new Pn(5,e),wn.s48be=e=>new Pn(6,e),wn.ns64be=e=>new Rn(e),wn.f32=e=>new zn(e),wn.f32be=e=>new jn(e),wn.f64=e=>new Vn(e),wn.f64be=e=>new $n(e);var ar=wn.struct=(e,t,n)=>new qn(e,t,n);wn.bits=(e,t,n)=>new Zn(e,t,n);var cr=wn.seq=(e,t,n)=>new Fn(e,t,n),ur=wn.union=(e,t,n)=>new Wn(e,t,n);wn.unionLayoutDiscriminator=(e,t)=>new Gn(e,t);var lr=wn.blob=(e,t)=>new Yn(e,t);wn.cstr=e=>new er(e),wn.utf8=(e,t)=>new tr(e,t),wn.constant=(e,t)=>new nr(e,t);const dr=e=>({decode:e.decode.bind(e),encode:e.encode.bind(e)});var hr={};Object.defineProperty(hr,"__esModule",{value:!0}),hr.toBigIntLE=function(e){{const t=Buffer.from(e);t.reverse();const n=t.toString("hex");return 0===n.length?BigInt(0):BigInt(`0x${n}`)}},hr.toBigIntBE=function(e){{const t=e.toString("hex");return 0===t.length?BigInt(0):BigInt(`0x${t}`)}},hr.toBufferLE=function(e,t){{const n=e.toString(16),r=Buffer.from(n.padStart(2*t,"0").slice(0,2*t),"hex");return r.reverse(),r}},hr.toBufferBE=function(e,t){{const n=e.toString(16);return Buffer.from(n.padStart(2*t,"0").slice(0,2*t),"hex")}};var fr=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,pr=Math.ceil,mr=Math.floor,yr="[BigNumber Error] ",gr=yr+"Number primitive has more than 15 significant digits: ",wr=1e14,vr=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],br=1e9;function Er(e){var t=0|e;return e>0||e===t?t:t-1}function Sr(e){for(var t,n,r=1,o=e.length,i=e[0]+"";r<o;){for(n=14-(t=e[r++]+"").length;n--;t="0"+t);i+=t}for(o=i.length;48===i.charCodeAt(--o););return i.slice(0,o+1||1)}function Ar(e,t){var n,r,o=e.c,i=t.c,s=e.s,a=t.s,c=e.e,u=t.e;if(!s||!a)return null;if(n=o&&!o[0],r=i&&!i[0],n||r)return n?r?0:-a:s;if(s!=a)return s;if(n=s<0,r=c==u,!o||!i)return r?0:!o^n?1:-1;if(!r)return c>u^n?1:-1;for(a=(c=o.length)<(u=i.length)?c:u,s=0;s<a;s++)if(o[s]!=i[s])return o[s]>i[s]^n?1:-1;return c==u?0:c>u^n?1:-1}function _r(e,t,n,r){if(e<t||e>n||e!==mr(e))throw Error(yr+(r||"Argument")+("number"==typeof e?e<t||e>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function kr(e){var t=e.c.length-1;return Er(e.e/14)==t&&e.c[t]%2!=0}function xr(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function Ir(e,t,n){var r,o;if(t<0){for(o=n+".";++t;o+=n);e=o+e}else if(++t>(r=e.length)){for(o=n,t-=r;--t;o+=n);e+=o}else t<r&&(e=e.slice(0,t)+"."+e.slice(t));return e}var Tr=function e(t){var n,r,o,i,s,a,c,u,l,d,h=x.prototype={constructor:x,toString:null,valueOf:null},f=new x(1),p=20,m=4,y=-7,g=21,w=-1e7,v=1e7,b=!1,E=1,S=0,A={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},_="0123456789abcdefghijklmnopqrstuvwxyz",k=!0;function x(e,t){var n,i,s,a,c,u,l,d,h=this;if(!(h instanceof x))return new x(e,t);if(null==t){if(e&&!0===e._isBigNumber)return h.s=e.s,void(!e.c||e.e>v?h.c=h.e=null:e.e<w?h.c=[h.e=0]:(h.e=e.e,h.c=e.c.slice()));if((u="number"==typeof e)&&0*e==0){if(h.s=1/e<0?(e=-e,-1):1,e===~~e){for(a=0,c=e;c>=10;c/=10,a++);return void(a>v?h.c=h.e=null:(h.e=a,h.c=[e]))}d=String(e)}else{if(!fr.test(d=String(e)))return o(h,d,u);h.s=45==d.charCodeAt(0)?(d=d.slice(1),-1):1}(a=d.indexOf("."))>-1&&(d=d.replace(".","")),(c=d.search(/e/i))>0?(a<0&&(a=c),a+=+d.slice(c+1),d=d.substring(0,c)):a<0&&(a=d.length)}else{if(_r(t,2,_.length,"Base"),10==t&&k)return M(h=new x(e),p+h.e+1,m);if(d=String(e),u="number"==typeof e){if(0*e!=0)return o(h,d,u,t);if(h.s=1/e<0?(d=d.slice(1),-1):1,x.DEBUG&&d.replace(/^0\.0*|\./,"").length>15)throw Error(gr+e)}else h.s=45===d.charCodeAt(0)?(d=d.slice(1),-1):1;for(n=_.slice(0,t),a=c=0,l=d.length;c<l;c++)if(n.indexOf(i=d.charAt(c))<0){if("."==i){if(c>a){a=l;continue}}else if(!s&&(d==d.toUpperCase()&&(d=d.toLowerCase())||d==d.toLowerCase()&&(d=d.toUpperCase()))){s=!0,c=-1,a=0;continue}return o(h,String(e),u,t)}u=!1,(a=(d=r(d,t,10,h.s)).indexOf("."))>-1?d=d.replace(".",""):a=d.length}for(c=0;48===d.charCodeAt(c);c++);for(l=d.length;48===d.charCodeAt(--l););if(d=d.slice(c,++l)){if(l-=c,u&&x.DEBUG&&l>15&&(e>9007199254740991||e!==mr(e)))throw Error(gr+h.s*e);if((a=a-c-1)>v)h.c=h.e=null;else if(a<w)h.c=[h.e=0];else{if(h.e=a,h.c=[],c=(a+1)%14,a<0&&(c+=14),c<l){for(c&&h.c.push(+d.slice(0,c)),l-=14;c<l;)h.c.push(+d.slice(c,c+=14));c=14-(d=d.slice(c)).length}else c-=l;for(;c--;d+="0");h.c.push(+d)}}else h.c=[h.e=0]}function I(e,t,n,r){var o,i,s,a,c;if(null==n?n=m:_r(n,0,8),!e.c)return e.toString();if(o=e.c[0],s=e.e,null==t)c=Sr(e.c),c=1==r||2==r&&(s<=y||s>=g)?xr(c,s):Ir(c,s,"0");else if(i=(e=M(new x(e),t,n)).e,a=(c=Sr(e.c)).length,1==r||2==r&&(t<=i||i<=y)){for(;a<t;c+="0",a++);c=xr(c,i)}else if(t-=s,c=Ir(c,i,"0"),i+1>a){if(--t>0)for(c+=".";t--;c+="0");}else if((t+=i-a)>0)for(i+1==a&&(c+=".");t--;c+="0");return e.s<0&&o?"-"+c:c}function T(e,t){for(var n,r=1,o=new x(e[0]);r<e.length;r++){if(!(n=new x(e[r])).s){o=n;break}t.call(o,n)&&(o=n)}return o}function L(e,t,n){for(var r=1,o=t.length;!t[--o];t.pop());for(o=t[0];o>=10;o/=10,r++);return(n=r+14*n-1)>v?e.c=e.e=null:n<w?e.c=[e.e=0]:(e.e=n,e.c=t),e}function M(e,t,n,r){var o,i,s,a,c,u,l,d=e.c,h=vr;if(d){e:{for(o=1,a=d[0];a>=10;a/=10,o++);if((i=t-o)<0)i+=14,s=t,l=(c=d[u=0])/h[o-s-1]%10|0;else if((u=pr((i+1)/14))>=d.length){if(!r)break e;for(;d.length<=u;d.push(0));c=l=0,o=1,s=(i%=14)-14+1}else{for(c=a=d[u],o=1;a>=10;a/=10,o++);l=(s=(i%=14)-14+o)<0?0:c/h[o-s-1]%10|0}if(r=r||t<0||null!=d[u+1]||(s<0?c:c%h[o-s-1]),r=n<4?(l||r)&&(0==n||n==(e.s<0?3:2)):l>5||5==l&&(4==n||r||6==n&&(i>0?s>0?c/h[o-s]:0:d[u-1])%10&1||n==(e.s<0?8:7)),t<1||!d[0])return d.length=0,r?(t-=e.e+1,d[0]=h[(14-t%14)%14],e.e=-t||0):d[0]=e.e=0,e;if(0==i?(d.length=u,a=1,u--):(d.length=u+1,a=h[14-i],d[u]=s>0?mr(c/h[o-s]%h[s])*a:0),r)for(;;){if(0==u){for(i=1,s=d[0];s>=10;s/=10,i++);for(s=d[0]+=a,a=1;s>=10;s/=10,a++);i!=a&&(e.e++,d[0]==wr&&(d[0]=1));break}if(d[u]+=a,d[u]!=wr)break;d[u--]=0,a=1}for(i=d.length;0===d[--i];d.pop());}e.e>v?e.c=e.e=null:e.e<w&&(e.c=[e.e=0])}return e}function P(e){var t,n=e.e;return null===n?e.toString():(t=Sr(e.c),t=n<=y||n>=g?xr(t,n):Ir(t,n,"0"),e.s<0?"-"+t:t)}return x.clone=e,x.ROUND_UP=0,x.ROUND_DOWN=1,x.ROUND_CEIL=2,x.ROUND_FLOOR=3,x.ROUND_HALF_UP=4,x.ROUND_HALF_DOWN=5,x.ROUND_HALF_EVEN=6,x.ROUND_HALF_CEIL=7,x.ROUND_HALF_FLOOR=8,x.EUCLID=9,x.config=x.set=function(e){var t,n;if(null!=e){if("object"!=typeof e)throw Error(yr+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(_r(n=e[t],0,br,t),p=n),e.hasOwnProperty(t="ROUNDING_MODE")&&(_r(n=e[t],0,8,t),m=n),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((n=e[t])&&n.pop?(_r(n[0],-br,0,t),_r(n[1],0,br,t),y=n[0],g=n[1]):(_r(n,-br,br,t),y=-(g=n<0?-n:n))),e.hasOwnProperty(t="RANGE"))if((n=e[t])&&n.pop)_r(n[0],-br,-1,t),_r(n[1],1,br,t),w=n[0],v=n[1];else{if(_r(n,-br,br,t),!n)throw Error(yr+t+" cannot be zero: "+n);w=-(v=n<0?-n:n)}if(e.hasOwnProperty(t="CRYPTO")){if((n=e[t])!==!!n)throw Error(yr+t+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw b=!n,Error(yr+"crypto unavailable");b=n}else b=n}if(e.hasOwnProperty(t="MODULO_MODE")&&(_r(n=e[t],0,9,t),E=n),e.hasOwnProperty(t="POW_PRECISION")&&(_r(n=e[t],0,br,t),S=n),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(n=e[t]))throw Error(yr+t+" not an object: "+n);A=n}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(n=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(n))throw Error(yr+t+" invalid: "+n);k="0123456789"==n.slice(0,10),_=n}}return{DECIMAL_PLACES:p,ROUNDING_MODE:m,EXPONENTIAL_AT:[y,g],RANGE:[w,v],CRYPTO:b,MODULO_MODE:E,POW_PRECISION:S,FORMAT:A,ALPHABET:_}},x.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!x.DEBUG)return!0;var t,n,r=e.c,o=e.e,i=e.s;e:if("[object Array]"=={}.toString.call(r)){if((1===i||-1===i)&&o>=-br&&o<=br&&o===mr(o)){if(0===r[0]){if(0===o&&1===r.length)return!0;break e}if((t=(o+1)%14)<1&&(t+=14),String(r[0]).length==t){for(t=0;t<r.length;t++)if((n=r[t])<0||n>=wr||n!==mr(n))break e;if(0!==n)return!0}}}else if(null===r&&null===o&&(null===i||1===i||-1===i))return!0;throw Error(yr+"Invalid BigNumber: "+e)},x.maximum=x.max=function(){return T(arguments,h.lt)},x.minimum=x.min=function(){return T(arguments,h.gt)},x.random=(i=9007199254740992,s=Math.random()*i&2097151?function(){return mr(Math.random()*i)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,n,r,o,i,a=0,c=[],u=new x(f);if(null==e?e=p:_r(e,0,br),o=pr(e/14),b)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(o*=2));a<o;)(i=131072*t[a]+(t[a+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),t[a]=n[0],t[a+1]=n[1]):(c.push(i%1e14),a+=2);a=o/2}else{if(!crypto.randomBytes)throw b=!1,Error(yr+"crypto unavailable");for(t=crypto.randomBytes(o*=7);a<o;)(i=281474976710656*(31&t[a])+1099511627776*t[a+1]+4294967296*t[a+2]+16777216*t[a+3]+(t[a+4]<<16)+(t[a+5]<<8)+t[a+6])>=9e15?crypto.randomBytes(7).copy(t,a):(c.push(i%1e14),a+=7);a=o/7}if(!b)for(;a<o;)(i=s())<9e15&&(c[a++]=i%1e14);for(e%=14,(o=c[--a])&&e&&(i=vr[14-e],c[a]=mr(o/i)*i);0===c[a];c.pop(),a--);if(a<0)c=[r=0];else{for(r=-1;0===c[0];c.splice(0,1),r-=14);for(a=1,i=c[0];i>=10;i/=10,a++);a<14&&(r-=14-a)}return u.e=r,u.c=c,u}),x.sum=function(){for(var e=1,t=arguments,n=new x(t[0]);e<t.length;)n=n.plus(t[e++]);return n},r=function(){var e="0123456789";function t(e,t,n,r){for(var o,i,s=[0],a=0,c=e.length;a<c;){for(i=s.length;i--;s[i]*=t);for(s[0]+=r.indexOf(e.charAt(a++)),o=0;o<s.length;o++)s[o]>n-1&&(null==s[o+1]&&(s[o+1]=0),s[o+1]+=s[o]/n|0,s[o]%=n)}return s.reverse()}return function(r,o,i,s,a){var c,u,l,d,h,f,y,g,w=r.indexOf("."),v=p,b=m;for(w>=0&&(d=S,S=0,r=r.replace(".",""),f=(g=new x(o)).pow(r.length-w),S=d,g.c=t(Ir(Sr(f.c),f.e,"0"),10,i,e),g.e=g.c.length),l=d=(y=t(r,o,i,a?(c=_,e):(c=e,_))).length;0==y[--d];y.pop());if(!y[0])return c.charAt(0);if(w<0?--l:(f.c=y,f.e=l,f.s=s,y=(f=n(f,g,v,b,i)).c,h=f.r,l=f.e),w=y[u=l+v+1],d=i/2,h=h||u<0||null!=y[u+1],h=b<4?(null!=w||h)&&(0==b||b==(f.s<0?3:2)):w>d||w==d&&(4==b||h||6==b&&1&y[u-1]||b==(f.s<0?8:7)),u<1||!y[0])r=h?Ir(c.charAt(1),-v,c.charAt(0)):c.charAt(0);else{if(y.length=u,h)for(--i;++y[--u]>i;)y[u]=0,u||(++l,y=[1].concat(y));for(d=y.length;!y[--d];);for(w=0,r="";w<=d;r+=c.charAt(y[w++]));r=Ir(r,l,c.charAt(0))}return r}}(),n=function(){function e(e,t,n){var r,o,i,s,a=0,c=e.length,u=t%1e7,l=t/1e7|0;for(e=e.slice();c--;)a=((o=u*(i=e[c]%1e7)+(r=l*i+(s=e[c]/1e7|0)*u)%1e7*1e7+a)/n|0)+(r/1e7|0)+l*s,e[c]=o%n;return a&&(e=[a].concat(e)),e}function t(e,t,n,r){var o,i;if(n!=r)i=n>r?1:-1;else for(o=i=0;o<n;o++)if(e[o]!=t[o]){i=e[o]>t[o]?1:-1;break}return i}function n(e,t,n,r){for(var o=0;n--;)e[n]-=o,o=e[n]<t[n]?1:0,e[n]=o*r+e[n]-t[n];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(r,o,i,s,a){var c,u,l,d,h,f,p,m,y,g,w,v,b,E,S,A,_,k=r.s==o.s?1:-1,I=r.c,T=o.c;if(!(I&&I[0]&&T&&T[0]))return new x(r.s&&o.s&&(I?!T||I[0]!=T[0]:T)?I&&0==I[0]||!T?0*k:k/0:NaN);for(y=(m=new x(k)).c=[],k=i+(u=r.e-o.e)+1,a||(a=wr,u=Er(r.e/14)-Er(o.e/14),k=k/14|0),l=0;T[l]==(I[l]||0);l++);if(T[l]>(I[l]||0)&&u--,k<0)y.push(1),d=!0;else{for(E=I.length,A=T.length,l=0,k+=2,(h=mr(a/(T[0]+1)))>1&&(T=e(T,h,a),I=e(I,h,a),A=T.length,E=I.length),b=A,w=(g=I.slice(0,A)).length;w<A;g[w++]=0);_=T.slice(),_=[0].concat(_),S=T[0],T[1]>=a/2&&S++;do{if(h=0,(c=t(T,g,A,w))<0){if(v=g[0],A!=w&&(v=v*a+(g[1]||0)),(h=mr(v/S))>1)for(h>=a&&(h=a-1),p=(f=e(T,h,a)).length,w=g.length;1==t(f,g,p,w);)h--,n(f,A<p?_:T,p,a),p=f.length,c=1;else 0==h&&(c=h=1),p=(f=T.slice()).length;if(p<w&&(f=[0].concat(f)),n(g,f,w,a),w=g.length,-1==c)for(;t(T,g,A,w)<1;)h++,n(g,A<w?_:T,w,a),w=g.length}else 0===c&&(h++,g=[0]);y[l++]=h,g[0]?g[w++]=I[b]||0:(g=[I[b]],w=1)}while((b++<E||null!=g[0])&&k--);d=null!=g[0],y[0]||y.splice(0,1)}if(a==wr){for(l=1,k=y[0];k>=10;k/=10,l++);M(m,i+(m.e=l+14*u-1)+1,s,d)}else m.e=u,m.r=+d;return m}}(),a=/^(-?)0([xbo])(?=\w[\w.]*$)/i,c=/^([^.]+)\.$/,u=/^\.([^.]+)$/,l=/^-?(Infinity|NaN)$/,d=/^\s*\+(?=[\w.])|^\s+|\s+$/g,o=function(e,t,n,r){var o,i=n?t:t.replace(d,"");if(l.test(i))e.s=isNaN(i)?null:i<0?-1:1;else{if(!n&&(i=i.replace(a,(function(e,t,n){return o="x"==(n=n.toLowerCase())?16:"b"==n?2:8,r&&r!=o?e:t})),r&&(o=r,i=i.replace(c,"$1").replace(u,"0.$1")),t!=i))return new x(i,o);if(x.DEBUG)throw Error(yr+"Not a"+(r?" base "+r:"")+" number: "+t);e.s=null}e.c=e.e=null},h.absoluteValue=h.abs=function(){var e=new x(this);return e.s<0&&(e.s=1),e},h.comparedTo=function(e,t){return Ar(this,new x(e,t))},h.decimalPlaces=h.dp=function(e,t){var n,r,o,i=this;if(null!=e)return _r(e,0,br),null==t?t=m:_r(t,0,8),M(new x(i),e+i.e+1,t);if(!(n=i.c))return null;if(r=14*((o=n.length-1)-Er(this.e/14)),o=n[o])for(;o%10==0;o/=10,r--);return r<0&&(r=0),r},h.dividedBy=h.div=function(e,t){return n(this,new x(e,t),p,m)},h.dividedToIntegerBy=h.idiv=function(e,t){return n(this,new x(e,t),0,1)},h.exponentiatedBy=h.pow=function(e,t){var n,r,o,i,s,a,c,u,l=this;if((e=new x(e)).c&&!e.isInteger())throw Error(yr+"Exponent not an integer: "+P(e));if(null!=t&&(t=new x(t)),s=e.e>14,!l.c||!l.c[0]||1==l.c[0]&&!l.e&&1==l.c.length||!e.c||!e.c[0])return u=new x(Math.pow(+P(l),s?2-kr(e):+P(e))),t?u.mod(t):u;if(a=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new x(NaN);(r=!a&&l.isInteger()&&t.isInteger())&&(l=l.mod(t))}else{if(e.e>9&&(l.e>0||l.e<-1||(0==l.e?l.c[0]>1||s&&l.c[1]>=24e7:l.c[0]<8e13||s&&l.c[0]<=9999975e7)))return i=l.s<0&&kr(e)?-0:0,l.e>-1&&(i=1/i),new x(a?1/i:i);S&&(i=pr(S/14+2))}for(s?(n=new x(.5),a&&(e.s=1),c=kr(e)):c=(o=Math.abs(+P(e)))%2,u=new x(f);;){if(c){if(!(u=u.times(l)).c)break;i?u.c.length>i&&(u.c.length=i):r&&(u=u.mod(t))}if(o){if(0===(o=mr(o/2)))break;c=o%2}else if(M(e=e.times(n),e.e+1,1),e.e>14)c=kr(e);else{if(0==(o=+P(e)))break;c=o%2}l=l.times(l),i?l.c&&l.c.length>i&&(l.c.length=i):r&&(l=l.mod(t))}return r?u:(a&&(u=f.div(u)),t?u.mod(t):i?M(u,S,m,void 0):u)},h.integerValue=function(e){var t=new x(this);return null==e?e=m:_r(e,0,8),M(t,t.e+1,e)},h.isEqualTo=h.eq=function(e,t){return 0===Ar(this,new x(e,t))},h.isFinite=function(){return!!this.c},h.isGreaterThan=h.gt=function(e,t){return Ar(this,new x(e,t))>0},h.isGreaterThanOrEqualTo=h.gte=function(e,t){return 1===(t=Ar(this,new x(e,t)))||0===t},h.isInteger=function(){return!!this.c&&Er(this.e/14)>this.c.length-2},h.isLessThan=h.lt=function(e,t){return Ar(this,new x(e,t))<0},h.isLessThanOrEqualTo=h.lte=function(e,t){return-1===(t=Ar(this,new x(e,t)))||0===t},h.isNaN=function(){return!this.s},h.isNegative=function(){return this.s<0},h.isPositive=function(){return this.s>0},h.isZero=function(){return!!this.c&&0==this.c[0]},h.minus=function(e,t){var n,r,o,i,s=this,a=s.s;if(t=(e=new x(e,t)).s,!a||!t)return new x(NaN);if(a!=t)return e.s=-t,s.plus(e);var c=s.e/14,u=e.e/14,l=s.c,d=e.c;if(!c||!u){if(!l||!d)return l?(e.s=-t,e):new x(d?s:NaN);if(!l[0]||!d[0])return d[0]?(e.s=-t,e):new x(l[0]?s:3==m?-0:0)}if(c=Er(c),u=Er(u),l=l.slice(),a=c-u){for((i=a<0)?(a=-a,o=l):(u=c,o=d),o.reverse(),t=a;t--;o.push(0));o.reverse()}else for(r=(i=(a=l.length)<(t=d.length))?a:t,a=t=0;t<r;t++)if(l[t]!=d[t]){i=l[t]<d[t];break}if(i&&(o=l,l=d,d=o,e.s=-e.s),(t=(r=d.length)-(n=l.length))>0)for(;t--;l[n++]=0);for(t=wr-1;r>a;){if(l[--r]<d[r]){for(n=r;n&&!l[--n];l[n]=t);--l[n],l[r]+=wr}l[r]-=d[r]}for(;0==l[0];l.splice(0,1),--u);return l[0]?L(e,l,u):(e.s=3==m?-1:1,e.c=[e.e=0],e)},h.modulo=h.mod=function(e,t){var r,o,i=this;return e=new x(e,t),!i.c||!e.s||e.c&&!e.c[0]?new x(NaN):!e.c||i.c&&!i.c[0]?new x(i):(9==E?(o=e.s,e.s=1,r=n(i,e,0,3),e.s=o,r.s*=o):r=n(i,e,0,E),(e=i.minus(r.times(e))).c[0]||1!=E||(e.s=i.s),e)},h.multipliedBy=h.times=function(e,t){var n,r,o,i,s,a,c,u,l,d,h,f,p,m,y,g=this,w=g.c,v=(e=new x(e,t)).c;if(!(w&&v&&w[0]&&v[0]))return!g.s||!e.s||w&&!w[0]&&!v||v&&!v[0]&&!w?e.c=e.e=e.s=null:(e.s*=g.s,w&&v?(e.c=[0],e.e=0):e.c=e.e=null),e;for(r=Er(g.e/14)+Er(e.e/14),e.s*=g.s,(c=w.length)<(d=v.length)&&(p=w,w=v,v=p,o=c,c=d,d=o),o=c+d,p=[];o--;p.push(0));for(m=wr,y=1e7,o=d;--o>=0;){for(n=0,h=v[o]%y,f=v[o]/y|0,i=o+(s=c);i>o;)n=((u=h*(u=w[--s]%y)+(a=f*u+(l=w[s]/y|0)*h)%y*y+p[i]+n)/m|0)+(a/y|0)+f*l,p[i--]=u%m;p[i]=n}return n?++r:p.splice(0,1),L(e,p,r)},h.negated=function(){var e=new x(this);return e.s=-e.s||null,e},h.plus=function(e,t){var n,r=this,o=r.s;if(t=(e=new x(e,t)).s,!o||!t)return new x(NaN);if(o!=t)return e.s=-t,r.minus(e);var i=r.e/14,s=e.e/14,a=r.c,c=e.c;if(!i||!s){if(!a||!c)return new x(o/0);if(!a[0]||!c[0])return c[0]?e:new x(a[0]?r:0*o)}if(i=Er(i),s=Er(s),a=a.slice(),o=i-s){for(o>0?(s=i,n=c):(o=-o,n=a),n.reverse();o--;n.push(0));n.reverse()}for((o=a.length)-(t=c.length)<0&&(n=c,c=a,a=n,t=o),o=0;t;)o=(a[--t]=a[t]+c[t]+o)/wr|0,a[t]=wr===a[t]?0:a[t]%wr;return o&&(a=[o].concat(a),++s),L(e,a,s)},h.precision=h.sd=function(e,t){var n,r,o,i=this;if(null!=e&&e!==!!e)return _r(e,1,br),null==t?t=m:_r(t,0,8),M(new x(i),e,t);if(!(n=i.c))return null;if(r=14*(o=n.length-1)+1,o=n[o]){for(;o%10==0;o/=10,r--);for(o=n[0];o>=10;o/=10,r++);}return e&&i.e+1>r&&(r=i.e+1),r},h.shiftedBy=function(e){return _r(e,-9007199254740991,9007199254740991),this.times("1e"+e)},h.squareRoot=h.sqrt=function(){var e,t,r,o,i,s=this,a=s.c,c=s.s,u=s.e,l=p+4,d=new x("0.5");if(1!==c||!a||!a[0])return new x(!c||c<0&&(!a||a[0])?NaN:a?s:1/0);if(0==(c=Math.sqrt(+P(s)))||c==1/0?(((t=Sr(a)).length+u)%2==0&&(t+="0"),c=Math.sqrt(+t),u=Er((u+1)/2)-(u<0||u%2),r=new x(t=c==1/0?"5e"+u:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+u)):r=new x(c+""),r.c[0])for((c=(u=r.e)+l)<3&&(c=0);;)if(i=r,r=d.times(i.plus(n(s,i,l,1))),Sr(i.c).slice(0,c)===(t=Sr(r.c)).slice(0,c)){if(r.e<u&&--c,"9999"!=(t=t.slice(c-3,c+1))&&(o||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(M(r,r.e+p+2,1),e=!r.times(r).eq(s));break}if(!o&&(M(i,i.e+p+2,0),i.times(i).eq(s))){r=i;break}l+=4,c+=4,o=1}return M(r,r.e+p+1,m,e)},h.toExponential=function(e,t){return null!=e&&(_r(e,0,br),e++),I(this,e,t,1)},h.toFixed=function(e,t){return null!=e&&(_r(e,0,br),e=e+this.e+1),I(this,e,t)},h.toFormat=function(e,t,n){var r,o=this;if(null==n)null!=e&&t&&"object"==typeof t?(n=t,t=null):e&&"object"==typeof e?(n=e,e=t=null):n=A;else if("object"!=typeof n)throw Error(yr+"Argument not an object: "+n);if(r=o.toFixed(e,t),o.c){var i,s=r.split("."),a=+n.groupSize,c=+n.secondaryGroupSize,u=n.groupSeparator||"",l=s[0],d=s[1],h=o.s<0,f=h?l.slice(1):l,p=f.length;if(c&&(i=a,a=c,c=i,p-=i),a>0&&p>0){for(i=p%a||a,l=f.substr(0,i);i<p;i+=a)l+=u+f.substr(i,a);c>0&&(l+=u+f.slice(i)),h&&(l="-"+l)}r=d?l+(n.decimalSeparator||"")+((c=+n.fractionGroupSize)?d.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):d):l}return(n.prefix||"")+r+(n.suffix||"")},h.toFraction=function(e){var t,r,o,i,s,a,c,u,l,d,h,p,y=this,g=y.c;if(null!=e&&(!(c=new x(e)).isInteger()&&(c.c||1!==c.s)||c.lt(f)))throw Error(yr+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+P(c));if(!g)return new x(y);for(t=new x(f),l=r=new x(f),o=u=new x(f),p=Sr(g),s=t.e=p.length-y.e-1,t.c[0]=vr[(a=s%14)<0?14+a:a],e=!e||c.comparedTo(t)>0?s>0?t:l:c,a=v,v=1/0,c=new x(p),u.c[0]=0;d=n(c,t,0,1),1!=(i=r.plus(d.times(o))).comparedTo(e);)r=o,o=i,l=u.plus(d.times(i=l)),u=i,t=c.minus(d.times(i=t)),c=i;return i=n(e.minus(r),o,0,1),u=u.plus(i.times(l)),r=r.plus(i.times(o)),u.s=l.s=y.s,h=n(l,o,s*=2,m).minus(y).abs().comparedTo(n(u,r,s,m).minus(y).abs())<1?[l,o]:[u,r],v=a,h},h.toNumber=function(){return+P(this)},h.toPrecision=function(e,t){return null!=e&&_r(e,1,br),I(this,e,t,2)},h.toString=function(e){var t,n=this,o=n.s,i=n.e;return null===i?o?(t="Infinity",o<0&&(t="-"+t)):t="NaN":(null==e?t=i<=y||i>=g?xr(Sr(n.c),i):Ir(Sr(n.c),i,"0"):10===e&&k?t=Ir(Sr((n=M(new x(n),p+i+1,m)).c),n.e,"0"):(_r(e,2,_.length,"Base"),t=r(Ir(Sr(n.c),i,"0"),10,e,o,!0)),o<0&&n.c[0]&&(t="-"+t)),t},h.valueOf=h.toJSON=function(){return P(this)},h._isBigNumber=!0,h[Symbol.toStringTag]="BigNumber",h[Symbol.for("nodejs.util.inspect.custom")]=h.valueOf,null!=t&&x.set(t),x}();new Tr("1e+18");const Lr=e=>{const t=or(e),{encode:n,decode:r}=dr(t),o=t;return o.decode=(e,t)=>!!r(e,t),o.encode=(e,t,r)=>{const o=Number(e);return n(o,t,r)},o},Mr=t=>{const n=lr(32,t),{encode:r,decode:o}=dr(n),i=n;return i.decode=(t,n)=>{const r=o(t,n);return new e(r)},i.encode=(e,t,n)=>{const o=e.toBuffer();return r(o,t,n)},i};function Pr(e){return new Br(8,!1,e)}class Br extends An{constructor(e,t,n){super(e,n),this.blob=lr(e),this.signed=t}encode(e,t,n=0){return this.signed&&(e=e.toTwos(8*this.span)),this.blob.encode(e.toArrayLike(Buffer,"le",this.span),t,n)}decode(e,t=0){const n=new c(this.blob.decode(e,t),10,"le");return this.signed?n.fromTwos(8*this.span).clone():n}}function Or(e,t){return new Ur(e,t)}class Ur extends An{constructor(e,t){super(-1,t),this.layout=ar([sr("length"),cr(e,rr(sr(),-4),"src")],t)}encode(e,t,n=0){const r={src:e};return this.layout.encode(r,t,n)}decode(e,t=0){return this.layout.decode(e,t).src}getSpan(e,t=0){return this.layout.getSpan(e,t)}}class Dr{constructor(e){}async encode(e,t){if("sale"===e){const e=Buffer.alloc(10485760),n=Nr.encode(t,e);return e.slice(0,n)}throw new Error(`Invalid account name: ${e}`)}decode(e,t){return this.decodeUnchecked(e,t)}decodeUnchecked(e,t){if("sale"===e)return function(e){return Nr.decode(e)}(t);throw new Error(`Invalid account name: ${e}`)}memcmp(e,t){if("sale"===e)return{};throw new Error(`Invalid account name: ${e}`)}size(e){if("sale"===e.name)return 0;throw new Error(`Invalid account name: ${e.name}`)}}const Nr=ar([Lr("isInitialized"),Mr("authority"),Mr("saleToken"),Mr("poolToken"),Mr("whitelistMap"),Mr("whitelistProgram"),Mr("vestingProgram"),Pr("saleAmount"),Pr("usdMin"),Pr("usdMax"),Pr("salePrice"),Pr("saleTime"),ir("initialFraction"),Lr("isPaused"),Lr("isEnded"),Or(Pr(),"releaseSchedule")]);class Cr{constructor(e){}decode(e){throw new Error("SolrTokenSale program does not have events")}}class Rr{constructor(e){}encode(e,t){switch(e){case"InitTokenSale":return function({tokenSaleAmount:e,usdMinAmount:t,usdMaxAmount:n,tokenSalePrice:r,tokenSaleTime:o,initialFraction:i,releaseSchedule:s}){return jr({InitTokenSale:{tokenSaleAmount:e,usdMinAmount:t,usdMaxAmount:n,tokenSalePrice:r,tokenSaleTime:o,initialFraction:i,releaseSchedule:s}},47+8*s.length)}(t);case"FundTokenSale":return function({tokenSaleAmount:e}){return jr({FundTokenSale:{tokenSaleAmount:e}},9)}(t);case"ExecuteTokenSale":return function({usdAmount:e}){return jr({ExecuteTokenSale:{usdAmount:e}},9)}(t);case"PauseTokenSale":return function({}){return jr({PauseTokenSale:{}},1)}(t);case"ResumeTokenSale":return function({}){return jr({ResumeTokenSale:{}},1)}(t);case"EndTokenSale":return function({}){return jr({EndTokenSale:{}},1)}(t);default:throw new Error(`Invalid instruction: ${e}`)}}encodeState(e,t){throw new Error("SolrTokenSale does not have state")}}const zr=ur(or("instruction"));function jr(e,t){const n=Buffer.alloc(t);return zr.encode(e,n),n}zr.addVariant(0,ar([Pr("tokenSaleAmount"),Pr("usdMinAmount"),Pr("usdMaxAmount"),Pr("tokenSalePrice"),Pr("tokenSaleTime"),ir("initialFraction"),Or(Pr(),"releaseSchedule")]),"InitTokenSale"),zr.addVariant(1,ar([Pr("tokenSaleAmount")]),"FundTokenSale"),zr.addVariant(2,ar([Pr("usdAmount")]),"ExecuteTokenSale"),zr.addVariant(3,ar([]),"PauseTokenSale"),zr.addVariant(4,ar([]),"ResumeTokenSale"),zr.addVariant(5,ar([]),"EndTokenSale");class Vr{constructor(e){}encode(e,t){throw new Error("SolrTokenSale does not have state")}decode(e){throw new Error("SolrTokenSale does not have state")}}class $r{constructor(e){}encode(e,t){throw new Error("SolrTokenSale does not have user-defined types")}decode(e,t){throw new Error("SolrTokenSale does not have user-defined types")}}class Fr{constructor(e){this.accounts=new Dr(e),this.events=new Cr(e),this.instruction=new Rr(e),this.state=new Vr(e),this.types=new $r(e)}}const qr=e.default;function Kr(e){var t;return new gn(Gr,null!==(t=null==e?void 0:e.programId)&&void 0!==t?t:qr,null==e?void 0:e.provider,new Fr(Gr))}const Gr={version:"1.0.0",name:"token-sale",instructions:[{name:"InitTokenSale",accounts:[{name:"authority",isMut:!1,isSigner:!0},{name:"sale",isMut:!0,isSigner:!1},{name:"poolToken",isMut:!0,isSigner:!1},{name:"saleToken",isMut:!0,isSigner:!1},{name:"whitelist",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"whitelistProgram",isMut:!1,isSigner:!1},{name:"vestingProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"tokenSaleAmount",type:"u64"},{name:"usdMinAmount",type:"u64"},{name:"usdMaxAmount",type:"u64"},{name:"tokenSalePrice",type:"u64"},{name:"tokenSaleTime",type:"u64"},{name:"initialFraction",type:"u16"},{name:"releaseSchedule",type:{vec:"u64"}}]},{name:"FundTokenSale",accounts:[{name:"funder",isMut:!1,isSigner:!0},{name:"sale",isMut:!1,isSigner:!1},{name:"srcToken",isMut:!0,isSigner:!1},{name:"saleToken",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"tokenSaleAmount",type:"u64"}]},{name:"ExecuteTokenSale",accounts:[{name:"user",isMut:!1,isSigner:!0},{name:"sale",isMut:!1,isSigner:!1},{name:"saleToken",isMut:!0,isSigner:!1},{name:"userDestToken",isMut:!0,isSigner:!1},{name:"userSourceToken",isMut:!0,isSigner:!1},{name:"poolToken",isMut:!0,isSigner:!1},{name:"signer",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"whitelistMap",isMut:!1,isSigner:!1},{name:"whitelist",isMut:!0,isSigner:!1},{name:"whitelistProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"vesting",isMut:!0,isSigner:!1},{name:"vestingToken",isMut:!0,isSigner:!1},{name:"vestingProgram",isMut:!1,isSigner:!1}],args:[{name:"usdAmount",type:"u64"}]},{name:"PauseTokenSale",accounts:[{name:"authority",isMut:!1,isSigner:!0},{name:"sale",isMut:!0,isSigner:!1}],args:[]},{name:"ResumeTokenSale",accounts:[{name:"authority",isMut:!1,isSigner:!0},{name:"sale",isMut:!0,isSigner:!1}],args:[]},{name:"EndTokenSale",accounts:[{name:"authority",isMut:!1,isSigner:!0},{name:"sale",isMut:!0,isSigner:!1}],args:[]}],accounts:[{name:"sale",type:{kind:"struct",fields:[{name:"isInitialized",type:"bool"},{name:"authority",type:"publicKey"},{name:"saleToken",type:"publicKey"},{name:"poolToken",type:"publicKey"},{name:"whitelistMap",type:"publicKey"},{name:"whitelistProgram",type:"publicKey"},{name:"vestingProgram",type:"publicKey"},{name:"saleAmount",type:"u64"},{name:"usdMin",type:"u64"},{name:"usdMax",type:"u64"},{name:"salePrice",type:"u64"},{name:"saleTime",type:"u64"},{name:"initialFraction",type:"u16"},{name:"isPaused",type:"bool"},{name:"isEnded",type:"bool"},{name:"releaseSchedule",type:{vec:"u64"}}]}}],errors:[{code:0,name:"InvalidInstruction",msg:"Invalid Instruction"},{code:1,name:"NotRentExempt",msg:"Not Rent Exempt"},{code:2,name:"UserNotWhitelisted",msg:"User Not Whitelisted"},{code:3,name:"TokenSaleNotInit",msg:"Token Sale Not Initialized"},{code:4,name:"TokenSaleNotStarted",msg:"Token Sale Not Started"},{code:5,name:"TokenSaleFunded",msg:"Token Sale Funded"},{code:6,name:"TokenSaleAmountExceeds",msg:"Token Sale Amount Exceeds"},{code:7,name:"TokenSaleComplete",msg:"Token Sale Complete"},{code:8,name:"AmountMinimum",msg:"Amount Less Than Minimum"},{code:9,name:"AmountMaximum",msg:"Amount More Than Maximum"},{code:10,name:"AmountExceeds",msg:"Amount Exceeds Tokens Available For Sale"},{code:11,name:"ExceedsAllocation",msg:"Amount Exceeds Your Allocation"},{code:12,name:"TokenSalePaused",msg:"Token Sale Paused"},{code:13,name:"TokenSaleEnded",msg:"Token Sale Ended"}]};export{Kr as solrTokenSaleProgram};
//# sourceMappingURL=index.js.map
