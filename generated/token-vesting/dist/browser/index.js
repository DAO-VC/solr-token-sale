import{PublicKey as t,Transaction as e,TransactionInstruction as r,SendTransactionError as n,SYSVAR_RENT_PUBKEY as o,SystemProgram as i}from"@solana/web3.js";import s,{Buffer as a}from"buffer";import c from"bn.js";import u from"bs58";import*as l from"base64-js";import d from"camelcase";import{sha256 as h}from"js-sha256";import*as f from"@project-serum/borsh";import{inflate as p}from"pako";import m from"eventemitter3";import*as y from"assert";var g=Object.freeze({__proto__:null,encode:function(t){return t.reduce(((t,e)=>t+e.toString(16).padStart(2,"0")),"0x")},decode:function(t){0===t.indexOf("0x")&&(t=t.substr(2)),t.length%2==1&&(t="0"+t);let e=t.match(/.{2}/g);return null===e?a.from([]):a.from(e.map((t=>parseInt(t,16))))}});function w(t){return new TextDecoder("utf-8").decode(t)}function v(t){return(new TextEncoder).encode(t)}var b=Object.freeze({__proto__:null,decode:w,encode:v});function E(t){return u.encode(t)}var _=Object.freeze({__proto__:null,encode:E,decode:function(t){return u.decode(t)}});function A(t){return a.from(l.toByteArray(t))}var S=Object.freeze({__proto__:null,encode:function(t){return l.fromByteArray(t)},decode:A}),I=Object.freeze({__proto__:null,hex:g,utf8:b,bs58:_,base64:S});function x(t){const e=new Map;return t.errors&&t.errors.forEach((t=>{var r;let n=null!==(r=t.msg)&&void 0!==r?r:t.name;e.set(t.code,n)})),e}function k(t,...e){if(t.args.length!=e.length)throw new Error("Invalid argument length");const r={};let n=0;return t.args.forEach((t=>{r[t.name]=e[n],n+=1})),r}function L(t,e={}){t.forEach((t=>{if("accounts"in t)L(t.accounts,e[t.name]);else if(void 0===e[t.name])throw new Error(`Invalid arguments: ${t.name} not provided.`)}))}function T(e){return e instanceof t?e:new t(e)}class O extends TypeError{constructor(t,e){let r;const{message:n,...o}=t,{path:i}=t;super(0===i.length?n:"At path: "+i.join(".")+" -- "+n),this.value=void 0,this.key=void 0,this.type=void 0,this.refinement=void 0,this.path=void 0,this.branch=void 0,this.failures=void 0,Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>{var n;return null!=(n=r)?n:r=[t,...e()]}}}function B(t){return"object"==typeof t&&null!=t}function P(t){return"string"==typeof t?JSON.stringify(t):""+t}function M(t,e,r,n){if(!0===t)return;!1===t?t={}:"string"==typeof t&&(t={message:t});const{path:o,branch:i}=e,{type:s}=r,{refinement:a,message:c="Expected a value of type `"+s+"`"+(a?" with refinement `"+a+"`":"")+", but received: `"+P(n)+"`"}=t;return{value:n,type:s,refinement:a,key:o[o.length-1],path:o,branch:i,...t,message:c}}function*U(t,e,r,n){var o;B(o=t)&&"function"==typeof o[Symbol.iterator]||(t=[t]);for(const o of t){const t=M(o,e,r,n);t&&(yield t)}}function*D(t,e,r){void 0===r&&(r={});const{path:n=[],branch:o=[t],coerce:i=!1,mask:s=!1}=r,a={path:n,branch:o};if(i&&(t=e.coercer(t,a),s&&"type"!==e.type&&B(e.schema)&&B(t)&&!Array.isArray(t)))for(const r in t)void 0===e.schema[r]&&delete t[r];let c=!0;for(const r of e.validator(t,a))c=!1,yield[r,void 0];for(let[r,u,l]of e.entries(t,a)){const e=D(u,l,{path:void 0===r?n:[...n,r],branch:void 0===r?o:[...o,u],coerce:i,mask:s});for(const n of e)n[0]?(c=!1,yield[n[0],void 0]):i&&(u=n[1],void 0===r?t=u:t instanceof Map?t.set(r,u):t instanceof Set?t.add(u):B(t)&&(t[r]=u))}if(c)for(const r of e.refiner(t,a))c=!1,yield[r,void 0];c&&(yield[void 0,t])}class C{constructor(t){this.TYPE=void 0,this.type=void 0,this.schema=void 0,this.coercer=void 0,this.validator=void 0,this.refiner=void 0,this.entries=void 0;const{type:e,schema:r,validator:n,refiner:o,coercer:i=(t=>t),entries:s=function*(){}}=t;this.type=e,this.schema=r,this.entries=s,this.coercer=i,this.validator=n?(t,e)=>U(n(t,e),e,this,t):()=>[],this.refiner=o?(t,e)=>U(o(t,e),e,this,t):()=>[]}assert(t){return function(t,e){const r=R(t,e);if(r[0])throw r[0]}(t,this)}create(t){return N(t,this)}is(t){return z(t,this)}mask(t){return function(t,e){const r=R(t,e,{coerce:!0,mask:!0});if(r[0])throw r[0];return r[1]}(t,this)}validate(t,e){return void 0===e&&(e={}),R(t,this,e)}}function N(t,e){const r=R(t,e,{coerce:!0});if(r[0])throw r[0];return r[1]}function z(t,e){return!R(t,e)[0]}function R(t,e,r){void 0===r&&(r={});const n=D(t,e,r),o=function(t){const{done:e,value:r}=t.next();return e?void 0:r}(n);return o[0]?[new O(o[0],(function*(){for(const t of n)t[0]&&(yield t[0])})),void 0]:[void 0,o[1]]}function j(t,e){return new C({type:t,schema:null,validator:e})}function V(t){return new C({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[r,n]of e.entries())yield[r,n,t]},coercer:t=>Array.isArray(t)?t.slice():t,validator:t=>Array.isArray(t)||"Expected an array value, but received: "+P(t)})}function $(t){const e=P(t),r=typeof t;return new C({type:"literal",schema:"string"===r||"number"===r||"boolean"===r?t:null,validator:r=>r===t||"Expected the literal `"+e+"`, but received: "+P(r)})}function F(t){return new C({...t,validator:(e,r)=>null===e||t.validator(e,r),refiner:(e,r)=>null===e||t.refiner(e,r)})}function q(){return j("number",(t=>"number"==typeof t&&!isNaN(t)||"Expected a number, but received: "+P(t)))}function G(t){return new C({...t,validator:(e,r)=>void 0===e||t.validator(e,r),refiner:(e,r)=>void 0===e||t.refiner(e,r)})}function K(){return j("string",(t=>"string"==typeof t||"Expected a string, but received: "+P(t)))}function W(t){const e=Object.keys(t);return new C({type:"type",schema:t,*entries(r){if(B(r))for(const n of e)yield[n,r[n],t[n]]},validator:t=>B(t)||"Expected an object, but received: "+P(t)})}function H(t){const e=t.map((t=>t.type)).join(" | ");return new C({type:"union",schema:null,coercer:(e,r)=>(t.find((t=>{const[r]=t.validate(e,{coerce:!0});return!r}))||J()).coercer(e,r),validator(r,n){const o=[];for(const e of t){const[...t]=D(r,e,n),[i]=t;if(!i[0])return[];for(const[e]of t)e&&o.push(e)}return["Expected the value to satisfy a union of `"+e+"`, but received: "+P(r),...o]}})}function J(){return j("unknown",(()=>!0))}async function Z(t,e,r){if(e.length<=99)return await X(t,e,r);{const n=function(t,e){return Array.apply(0,new Array(Math.ceil(t.length/99))).map(((e,r)=>t.slice(99*r,99*(r+1))))}(e);return(await Promise.all(n.map((e=>X(t,e,r))))).flat()}}async function X(t,e,r){const n=null!=r?r:t.commitment;return(await t.getMultipleAccountsInfo(e,n)).map(((t,r)=>null===t?null:{publicKey:e[r],account:t}))}async function Q(t,e,r,o,i){r&&r.length>0&&e.sign(...r);const s=e._compile(),a=s.serialize(),c=e._serialize(a).toString("base64"),u={encoding:"base64",commitment:null!=o?o:t.commitment};if(i){const t=(Array.isArray(i)?i:s.nonProgramIds()).map((t=>t.toBase58()));u.accounts={encoding:"base64",addresses:t}}r&&(u.sigVerify=!0);const l=[c,u],d=N(await t._rpcRequest("simulateTransaction",l),et);if("error"in d){let t;if("data"in d.error&&(t=d.error.data.logs,t&&Array.isArray(t))){const e="\n    ",r=e+t.join(e);console.error(d.error.message,r)}throw new n("failed to simulate transaction: "+d.error.message,t)}return d.result}const Y=tt(J());function tt(t){return H([W({jsonrpc:$("2.0"),id:K(),result:t}),W({jsonrpc:$("2.0"),id:K(),error:W({code:J(),message:K(),data:G(j("any",(()=>!0)))})})])}const et=(rt=W({err:F(H([W({}),K()])),logs:F(V(K())),accounts:G(F(V(F(W({executable:j("boolean",(t=>"boolean"==typeof t)),owner:K(),lamports:q(),data:V(K()),rentEpoch:G(q())}))))),unitsConsumed:G(q())}),function(t){return function(t,e,r){return new C({...t,coercer:(n,o)=>z(n,e)?t.coercer(r(n),o):t.coercer(n,o)})}(tt(t),Y,(e=>"error"in e?e:{...e,result:N(e.result,t)}))}(W({context:W({slot:q()}),value:rt})));var rt,nt=Object.freeze({__proto__:null,invoke:async function(t,n,o,i){t=T(t),i||(i=ct());const s=new e;if(s.add(new r({programId:t,keys:null!=n?n:[],data:o})),void 0===i.sendAndConfirm)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");return await i.sendAndConfirm(s,[])},getMultipleAccounts:Z,simulateTransaction:Q});class ot{constructor(t,e,r){this.connection=t,this.wallet=e,this.opts=r,this.publicKey=e.publicKey}static defaultOptions(){return{preflightCommitment:"processed",commitment:"processed"}}static local(t,e){throw new Error("Provider local is not available on browser.")}static env(){throw new Error("Provider env is not available on browser.")}async sendAndConfirm(t,e,r){var o;void 0===r&&(r=this.opts),t.feePayer=this.wallet.publicKey,t.recentBlockhash=(await this.connection.getRecentBlockhash(r.preflightCommitment)).blockhash,t=await this.wallet.signTransaction(t),(null!=e?e:[]).forEach((e=>{t.partialSign(e)}));const i=t.serialize();try{return await st(this.connection,i,r)}catch(e){if(e instanceof at){const r=await this.connection.getTransaction(E(t.signature),{commitment:"confirmed"});if(r){const t=null===(o=r.meta)||void 0===o?void 0:o.logMessages;throw t?new n(e.message,t):e}throw e}throw e}}async sendAll(t,e){void 0===e&&(e=this.opts);const r=await this.connection.getRecentBlockhash(e.preflightCommitment);let n=t.map((t=>{var e;let n=t.tx,o=null!==(e=t.signers)&&void 0!==e?e:[];return n.feePayer=this.wallet.publicKey,n.recentBlockhash=r.blockhash,o.forEach((t=>{n.partialSign(t)})),n}));const o=await this.wallet.signAllTransactions(n),i=[];for(let t=0;t<n.length;t+=1){const r=o[t].serialize();i.push(await st(this.connection,r,e))}return i}async simulate(t,e,r,n){t.feePayer=this.wallet.publicKey,t.recentBlockhash=(await this.connection.getLatestBlockhash(null!=r?r:this.connection.commitment)).blockhash,t=await this.wallet.signTransaction(t);const o=await Q(this.connection,t,e,r,n);if(o.value.err)throw new it(o.value);return o.value}}class it extends Error{constructor(t,e){super(e),this.simulationResponse=t}}async function st(t,e,r){const n=r&&{skipPreflight:r.skipPreflight,preflightCommitment:r.preflightCommitment||r.commitment},o=await t.sendRawTransaction(e,n),i=(await t.confirmTransaction(o,r&&r.commitment)).value;if(i.err)throw new at(`Raw transaction ${o} failed (${JSON.stringify(i)})`);return o}class at extends Error{constructor(t){super(t)}}function ct(){return null===ut?ot.local():ut}let ut=null;const lt=new Set(["anchor-deprecated-state","debug-logs"]),dt=new Map;function ht(t){return void 0!==dt.get(t)}var ft=Object.freeze({__proto__:null,set:function(t){if(!lt.has(t))throw new Error("Invalid feature");dt.set(t,!0)},isSet:ht});class pt extends Error{constructor(t){super(t),this.name="IdlError"}}class mt{constructor(t){this.stack=t}static parse(e){var r;const n=/^Program (\w*) invoke/,o=/^Program \w* success/,i=[];for(let s=0;s<e.length;s++){if(o.exec(e[s])){i.pop();continue}const a=null===(r=n.exec(e[s]))||void 0===r?void 0:r[1];a&&i.push(new t(a))}return new mt(i)}}class yt extends Error{constructor(t,e,r,n,o,i){super(r.join("\n").replace("Program log: ","")),this.errorLogs=r,this.logs=n,this.error={errorCode:t,errorMessage:e,comparedValues:i,origin:o},this._programErrorStack=mt.parse(n)}static parse(e){if(!e)return null;const r=e.findIndex((t=>t.startsWith("Program log: AnchorError")));if(-1===r)return null;const n=e[r],o=[n];let i;if(r+1<e.length)if("Program log: Left:"===e[r+1]){const n=/^Program log: (.*)$/,s=n.exec(e[r+2])[1],a=n.exec(e[r+4])[1];i=[new t(s),new t(a)],o.push(...e.slice(r+1,r+5))}else if(e[r+1].startsWith("Program log: Left:")){const t=/^Program log: (Left|Right): (.*)$/,n=t.exec(e[r+1])[2],s=t.exec(e[r+2])[2];o.push(...e.slice(r+1,r+3)),i=[n,s]}const s=/^Program log: AnchorError occurred\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n),a=/^Program log: AnchorError thrown in (.*):(\d*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n),c=/^Program log: AnchorError caused by account: (.*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(n);if(s){const[t,r,n]=s.slice(1,4),a={code:t,number:parseInt(r)};return new yt(a,n,o,e,void 0,i)}if(a){const[t,r,n,s,c]=a.slice(1,6),u={code:n,number:parseInt(s)},l={file:t,line:parseInt(r)};return new yt(u,c,o,e,l,i)}if(c){const[t,r,n,s]=c.slice(1,5),a=t,u={code:r,number:parseInt(n)};return new yt(u,s,o,e,a,i)}return null}get program(){return this._programErrorStack.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){return this._programErrorStack.stack}toString(){return this.message}}class gt extends Error{constructor(t,e,r){super(),this.code=t,this.msg=e,this.logs=r,r&&(this._programErrorStack=mt.parse(r))}static parse(t,e){const r=t.toString();let n,o;if(r.includes("custom program error:")){let t=r.split("custom program error: ");if(2!==t.length)return null;n=t[1]}else{const t=r.match(/"Custom":([0-9]+)}/g);if(!t||t.length>1)return null;n=t[0].match(/([0-9]+)/g)[0]}try{o=parseInt(n)}catch(t){return null}let i=e.get(o);return void 0!==i?new gt(o,i,t.logs):(i=vt.get(o),void 0!==i?new gt(o,i,t.logs):null)}get program(){var t;return null===(t=this._programErrorStack)||void 0===t?void 0:t.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){var t;return null===(t=this._programErrorStack)||void 0===t?void 0:t.stack}toString(){return this.msg}}function wt(t,e){ht("debug-logs")&&console.log("Translating error:",t);const r=yt.parse(t.logs);if(r)return r;const n=gt.parse(t,e);if(n)return n;if(t.logs){const e={get:function(e,r){return"programErrorStack"===r?e.programErrorStack.stack:"program"===r?e.programErrorStack.stack[t.programErrorStack.stack.length-1]:Reflect.get(...arguments)}};return t.programErrorStack=mt.parse(t.logs),new Proxy(t,e)}return t}const vt=new Map([[100,"8 byte instruction identifier not provided"],[101,"Fallback functions are not supported"],[102,"The program could not deserialize the given instruction"],[103,"The program could not serialize the given instruction"],[1e3,"The program was compiled without idl instructions"],[1001,"The transaction was given an invalid program for the IDL instruction"],[2e3,"A mut constraint was violated"],[2001,"A has_one constraint was violated"],[2002,"A signer constraint was violated"],[2003,"A raw constraint was violated"],[2004,"An owner constraint was violated"],[2005,"A rent exemption constraint was violated"],[2006,"A seeds constraint was violated"],[2007,"An executable constraint was violated"],[2008,"A state constraint was violated"],[2009,"An associated constraint was violated"],[2010,"An associated init constraint was violated"],[2011,"A close constraint was violated"],[2012,"An address constraint was violated"],[2013,"Expected zero account discriminant"],[2014,"A token mint constraint was violated"],[2015,"A token owner constraint was violated"],[2016,"A mint mint authority constraint was violated"],[2017,"A mint freeze authority constraint was violated"],[2018,"A mint decimals constraint was violated"],[2019,"A space constraint was violated"],[2500,"A require expression was violated"],[2501,"A require_eq expression was violated"],[2502,"A require_keys_eq expression was violated"],[2503,"A require_neq expression was violated"],[2504,"A require_keys_neq expression was violated"],[2505,"A require_gt expression was violated"],[2506,"A require_gte expression was violated"],[3e3,"The account discriminator was already set on this account"],[3001,"No 8 byte discriminator was found on the account"],[3002,"8 byte discriminator did not match what was expected"],[3003,"Failed to deserialize the account"],[3004,"Failed to serialize the account"],[3005,"Not enough account keys given to the instruction"],[3006,"The given account is not mutable"],[3007,"The given account is owned by a different program than expected"],[3008,"Program ID was not as expected"],[3009,"Program account is not executable"],[3010,"The given account did not sign"],[3011,"The given account is not owned by the system program"],[3012,"The program expected this account to be already initialized"],[3013,"The given account is not a program data account"],[3014,"The given account is not the associated token account"],[3015,"The given public key does not match the required sysvar"],[3016,"The account reallocation exceeds the MAX_PERMITTED_DATA_INCREASE limit"],[3017,"The account was duplicated for more than one reallocation"],[4e3,"The given state account does not have the correct address"],[4100,"The declared program id does not match the actual program id"],[5e3,"The API being used is deprecated and should no longer be used"]]);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var bt=function(){return bt=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},bt.apply(this,arguments)};function Et(t){return t.toLowerCase()}var _t=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],At=/[^A-Z0-9]+/gi;function St(t,e,r){return e instanceof RegExp?t.replace(e,r):e.reduce((function(t,e){return t.replace(e,r)}),t)}class It{static fieldLayout(t,e){const r=void 0!==t.name?d(t.name):void 0;switch(t.type){case"bool":return f.bool(r);case"u8":return f.u8(r);case"i8":return f.i8(r);case"u16":return f.u16(r);case"i16":return f.i16(r);case"u32":return f.u32(r);case"i32":return f.i32(r);case"f32":return f.f32(r);case"u64":return f.u64(r);case"i64":return f.i64(r);case"f64":return f.f64(r);case"u128":return f.u128(r);case"i128":return f.i128(r);case"bytes":return f.vecU8(r);case"string":return f.str(r);case"publicKey":return f.publicKey(r);default:if("vec"in t.type)return f.vec(It.fieldLayout({name:void 0,type:t.type.vec},e),r);if("option"in t.type)return f.option(It.fieldLayout({name:void 0,type:t.type.option},e),r);if("defined"in t.type){const n=t.type.defined;if(void 0===e)throw new pt("User defined types not provided");const o=e.filter((t=>t.name===n));if(1!==o.length)throw new pt(`Type not found: ${JSON.stringify(t)}`);return It.typeDefLayout(o[0],e,r)}if("array"in t.type){let n=t.type.array[0],o=t.type.array[1],i=It.fieldLayout({name:void 0,type:n},e);return f.array(i,o,r)}throw new Error(`Not yet implemented: ${t}`)}}static typeDefLayout(t,e=[],r){if("struct"===t.type.kind){const n=t.type.fields.map((t=>It.fieldLayout(t,e)));return f.struct(n,r)}if("enum"===t.type.kind){let n=t.type.variants.map((t=>{const r=d(t.name);if(void 0===t.fields)return f.struct([],r);const n=t.fields.map((t=>{if(!t.hasOwnProperty("name"))throw new Error("Tuple enum variants not yet implemented.");return It.fieldLayout(t,e)}));return f.struct(n,r)}));return void 0!==r?f.rustEnum(n).replicate(r):f.rustEnum(n,r)}throw new Error(`Unknown type kint: ${t}`)}}class xt{constructor(t){this.idl=t,this.ixLayout=xt.parseIxLayout(t);const e=new Map;t.instructions.forEach((t=>{const r=Lt("global",t.name);e.set(u.encode(r),{layout:this.ixLayout.get(t.name),name:t.name})})),t.state&&t.state.methods.map((t=>{const r=Lt("state",t.name);e.set(u.encode(r),{layout:this.ixLayout.get(t.name),name:t.name})})),this.sighashLayouts=e}encode(t,e){return this._encode("global",t,e)}encodeState(t,e){return this._encode("state",t,e)}_encode(t,e,r){const n=a.alloc(1e3),o=d(e),i=this.ixLayout.get(o);if(!i)throw new Error(`Unknown method: ${o}`);const s=i.encode(r,n),c=n.slice(0,s);return a.concat([Lt(t,e),c])}static parseIxLayout(t){const e=(t.state?t.state.methods:[]).map((e=>{let r=e.args.map((e=>{var r,n;return It.fieldLayout(e,Array.from([...null!==(r=t.accounts)&&void 0!==r?r:[],...null!==(n=t.types)&&void 0!==n?n:[]]))}));const n=d(e.name);return[n,f.struct(r,n)]})).concat(t.instructions.map((e=>{let r=e.args.map((e=>{var r,n;return It.fieldLayout(e,Array.from([...null!==(r=t.accounts)&&void 0!==r?r:[],...null!==(n=t.types)&&void 0!==n?n:[]]))}));const n=d(e.name);return[n,f.struct(r,n)]})));return new Map(e)}decode(t,e="hex"){"string"==typeof t&&(t="hex"===e?a.from(t,"hex"):u.decode(t));let r=u.encode(t.slice(0,8)),n=t.slice(8);const o=this.sighashLayouts.get(r);return o?{data:o.layout.decode(n),name:o.name}:null}format(t,e){return kt.format(t,e,this.idl)}}class kt{static format(t,e,r){const n=r.instructions.filter((e=>t.name===e.name))[0];if(void 0===n)return console.error("Invalid instruction given"),null;const o=n.args.map((e=>({name:e.name,type:kt.formatIdlType(e.type),data:kt.formatIdlData(e,t.data[e.name],r.types)}))),i=kt.flattenIdlAccounts(n.accounts);return{args:o,accounts:e.map(((t,e)=>e<i.length?{name:i[e].name,...t}:{name:void 0,...t}))}}static formatIdlType(t){if("string"==typeof t)return t;if("vec"in t)return`Vec<${this.formatIdlType(t.vec)}>`;if("option"in t)return`Option<${this.formatIdlType(t.option)}>`;if("defined"in t)return t.defined;if("array"in t)return`Array<${t.array[0]}; ${t.array[1]}>`;throw new Error(`Unknown IDL type: ${t}`)}static formatIdlData(t,e,r){if("string"==typeof t.type)return e.toString();if(t.type.hasOwnProperty("vec"))return"["+e.map((e=>this.formatIdlData({name:"",type:t.type.vec},e))).join(", ")+"]";if(t.type.hasOwnProperty("option"))return null===e?"null":this.formatIdlData({name:"",type:t.type.option},e,r);if(t.type.hasOwnProperty("defined")){if(void 0===r)throw new Error("User defined types not provided");const n=r.filter((e=>e.name===t.type.defined));if(1!==n.length)throw new Error(`Type not found: ${t.type.defined}`);return kt.formatIdlDataDefined(n[0],e,r)}return"unknown"}static formatIdlDataDefined(t,e,r){if("struct"===t.type.kind){const n=t.type;return"{ "+Object.keys(e).map((t=>{const o=n.fields.filter((e=>e.name===t))[0];if(void 0===o)throw new Error("Unable to find type");return t+": "+kt.formatIdlData(o,e[t],r)})).join(", ")+" }"}if(0===t.type.variants.length)return"{}";if(t.type.variants[0].name){const n=t.type.variants,o=Object.keys(e)[0],i=e[o],s=Object.keys(i).map((t=>{var e;const s=i[t],a=null===(e=n[o])||void 0===e?void 0:e.filter((e=>e.name===t))[0];if(void 0===a)throw new Error("Unable to find variant");return t+": "+kt.formatIdlData(a,s,r)})).join(", "),a=d(o,{pascalCase:!0});return 0===s.length?a:`${a} { ${s} }`}return"Tuple formatting not yet implemented"}static flattenIdlAccounts(t,e){return t.map((t=>{const r=function(t){const e=t.replace(/([A-Z])/g," $1");return e.charAt(0).toUpperCase()+e.slice(1)}(t.name);if(t.hasOwnProperty("accounts")){const n=e?`${e} > ${r}`:r;return kt.flattenIdlAccounts(t.accounts,n)}return{...t,name:e?`${e} > ${r}`:r}})).flat()}}function Lt(t,e){var r;let n=`${t}:${void 0===r&&(r={}),function(t,e){return void 0===e&&(e={}),function(t,e){void 0===e&&(e={});for(var r=e.splitRegexp,n=void 0===r?_t:r,o=e.stripRegexp,i=void 0===o?At:o,s=e.transform,a=void 0===s?Et:s,c=e.delimiter,u=void 0===c?" ":c,l=St(St(t,n,"$1\0$2"),i,"\0"),d=0,h=l.length;"\0"===l.charAt(d);)d++;for(;"\0"===l.charAt(h-1);)h--;return l.slice(d,h).split("\0").map(a).join(u)}(t,bt({delimiter:"."},e))}(e,bt({delimiter:"_"},r))}`;return a.from(h.digest(n)).slice(0,8)}function Tt(t,e){if("enum"===e.type.kind){let r=e.type.variants.map((e=>void 0===e.fields?0:e.fields.map((e=>{if("object"!=typeof e||!("name"in e))throw new Error("Tuple enum variants not yet implemented.");return Ot(t,e.type)})).reduce(((t,e)=>t+e))));return Math.max(...r)+1}return void 0===e.type.fields?0:e.type.fields.map((e=>Ot(t,e.type))).reduce(((t,e)=>t+e),0)}function Ot(t,e){var r,n;switch(e){case"bool":case"u8":case"i8":case"bytes":case"string":return 1;case"i16":case"u16":return 2;case"u32":case"i32":case"f32":return 4;case"u64":case"i64":case"f64":return 8;case"u128":case"i128":return 16;case"publicKey":return 32;default:if("vec"in e)return 1;if("option"in e)return 1+Ot(t,e.option);if("coption"in e)return 4+Ot(t,e.coption);if("defined"in e){const o=null!==(n=null===(r=t.types)||void 0===r?void 0:r.filter((t=>t.name===e.defined)))&&void 0!==n?n:[];if(1!==o.length)throw new pt(`Type not found: ${JSON.stringify(e)}`);return Tt(t,o[0])}if("array"in e){let r=e.array[0],n=e.array[1];return Ot(t,r)*n}throw new Error(`Invalid type ${JSON.stringify(e)}`)}}class Bt{constructor(t){if(void 0===t.accounts)return void(this.accountLayouts=new Map);const e=t.accounts.map((e=>[e.name,It.typeDefLayout(e,t.types)]));this.accountLayouts=new Map(e),this.idl=t}async encode(t,e){const r=a.alloc(1e3),n=this.accountLayouts.get(t);if(!n)throw new Error(`Unknown account: ${t}`);const o=n.encode(e,r);let i=r.slice(0,o),s=Bt.accountDiscriminator(t);return a.concat([s,i])}decode(t,e){if(Bt.accountDiscriminator(t).compare(e.slice(0,8)))throw new Error("Invalid account discriminator");return this.decodeUnchecked(t,e)}decodeUnchecked(t,e){const r=e.slice(8),n=this.accountLayouts.get(t);if(!n)throw new Error(`Unknown account: ${t}`);return n.decode(r)}memcmp(t,e){const r=Bt.accountDiscriminator(t);return{offset:0,bytes:u.encode(e?a.concat([r,e]):r)}}size(t){var e;return 8+(null!==(e=Tt(this.idl,t))&&void 0!==e?e:0)}static accountDiscriminator(t){return a.from(h.digest(`account:${d(t,{pascalCase:!0})}`)).slice(0,8)}}class Pt{constructor(t){if(void 0===t.events)return void(this.layouts=new Map);const e=t.events.map((e=>{let r={name:e.name,type:{kind:"struct",fields:e.fields.map((t=>({name:t.name,type:t.type})))}};return[e.name,It.typeDefLayout(r,t.types)]}));this.layouts=new Map(e),this.discriminators=new Map(void 0===t.events?[]:t.events.map((t=>[l.fromByteArray(Mt(t.name)),t.name])))}decode(t){let e;try{e=a.from(l.toByteArray(t))}catch(t){return null}const r=l.fromByteArray(e.slice(0,8)),n=this.discriminators.get(r);if(void 0===n)return null;const o=this.layouts.get(n);if(!o)throw new Error(`Unknown event: ${n}`);return{data:o.decode(e.slice(8)),name:n}}}function Mt(t){return a.from(h.digest(`event:${t}`)).slice(0,8)}class Ut{constructor(t){if(void 0===t.state)throw new Error("Idl state not defined.");this.layout=It.typeDefLayout(t.state.struct,t.types)}async encode(t,e){const r=a.alloc(1e3),n=this.layout.encode(e,r),o=await Dt(t),i=r.slice(0,n);return a.concat([o,i])}decode(t){const e=t.slice(8);return this.layout.decode(e)}}async function Dt(t){let e=ht("anchor-deprecated-state")?"account":"state";return a.from(h.digest(`${e}:${t}`)).slice(0,8)}class Ct{constructor(t){if(void 0===t.types)return void(this.typeLayouts=new Map);const e=t.types.map((e=>[e.name,It.typeDefLayout(e,t.types)]));this.typeLayouts=new Map(e),this.idl=t}encode(t,e){const r=a.alloc(1e3),n=this.typeLayouts.get(t);if(!n)throw new Error(`Unknown type: ${t}`);const o=n.encode(e,r);return r.slice(0,o)}decode(t,e){const r=this.typeLayouts.get(t);if(!r)throw new Error(`Unknown type: ${t}`);return r.decode(e)}}class Nt{constructor(t){this.instruction=new xt(t),this.accounts=new Bt(t),this.events=new Pt(t),t.state&&(this.state=new Ut(t)),this.types=new Ct(t)}}var zt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};class Rt{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}decode(t,e){throw new Error("Layout is abstract")}encode(t,e,r){throw new Error("Layout is abstract")}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}var jt=Rt;class Vt extends Rt{isCount(){throw new Error("ExternalLayout is abstract")}}class $t extends Vt{constructor(t,e,r){if(!(t instanceof Rt))throw new TypeError("layout must be a Layout");if(void 0===e)e=0;else if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof Ft||this.layout instanceof qt}decode(t,e){return void 0===e&&(e=0),this.layout.decode(t,e+this.offset)}encode(t,e,r){return void 0===r&&(r=0),this.layout.encode(t,e,r+this.offset)}}class Ft extends Rt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e){return void 0===e&&(e=0),t.readUIntLE(e,this.span)}encode(t,e,r){return void 0===r&&(r=0),e.writeUIntLE(t,r,this.span),this.span}}class qt extends Rt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e){return void 0===e&&(e=0),t.readUIntBE(e,this.span)}encode(t,e,r){return void 0===r&&(r=0),e.writeUIntBE(t,r,this.span),this.span}}const Gt=Math.pow(2,32);function Kt(t){const e=Math.floor(t/Gt);return{hi32:e,lo32:t-e*Gt}}function Wt(t,e){return t*Gt+e}class Ht extends Rt{constructor(t){super(8,t)}decode(t,e){void 0===e&&(e=0);const r=t.readUInt32LE(e);return Wt(t.readUInt32LE(e+4),r)}encode(t,e,r){void 0===r&&(r=0);const n=Kt(t);return e.writeUInt32LE(n.lo32,r),e.writeUInt32LE(n.hi32,r+4),8}}class Jt extends Rt{constructor(t){super(8,t)}decode(t,e){void 0===e&&(e=0);const r=t.readUInt32LE(e);return Wt(t.readInt32LE(e+4),r)}encode(t,e,r){void 0===r&&(r=0);const n=Kt(t);return e.writeUInt32LE(n.lo32,r),e.writeInt32LE(n.hi32,r+4),8}}class Zt extends Rt{constructor(t,e,r){if(!Array.isArray(t)||!t.reduce(((t,e)=>t&&e instanceof Rt),!0))throw new TypeError("fields must be array of Layout instances");"boolean"==typeof e&&void 0===r&&(r=e,e=void 0);for(const e of t)if(0>e.span&&void 0===e.property)throw new Error("fields cannot contain unnamed variable-length layout");let n=-1;try{n=t.reduce(((t,e)=>t+e.getSpan()),0)}catch(t){}super(n,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e){if(0<=this.span)return this.span;void 0===e&&(e=0);let r=0;try{r=this.fields.reduce(((r,n)=>{const o=n.getSpan(t,e);return e+=o,r+o}),0)}catch(t){throw new RangeError("indeterminate span")}return r}decode(t,e){void 0===e&&(e=0);const r=this.makeDestinationObject();for(const n of this.fields)if(void 0!==n.property&&(r[n.property]=n.decode(t,e)),e+=n.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r){void 0===r&&(r=0);const n=r;let o=0,i=0;for(const n of this.fields){let s=n.span;if(i=0<s?s:0,void 0!==n.property){const o=t[n.property];void 0!==o&&(i=n.encode(o,e,r),0>s&&(s=n.getSpan(e,r)))}o=r,r+=s}return o+i-n}fromArray(t){const e=this.makeDestinationObject();for(const r of this.fields)void 0!==r.property&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if("string"!=typeof t)throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if("string"!=typeof t)throw new TypeError("property must be string");let e=0;for(const r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}}class Xt{constructor(t){this.property=t}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class Qt extends Xt{constructor(t,e){if(!(t instanceof Vt&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}}class Yt extends Rt{constructor(t,e,r){const n=t instanceof Ft||t instanceof qt;if(n)t=new Qt(new $t(t));else if(t instanceof Vt&&t.isCount())t=new Qt(t);else if(!(t instanceof Xt))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(void 0===e&&(e=null),!(null===e||e instanceof Rt))throw new TypeError("defaultLayout must be null or a Layout");if(null!==e){if(0>e.span)throw new Error("defaultLayout must have constant span");void 0===e.property&&(e=e.replicate("content"))}let o=-1;e&&(o=e.span,0<=o&&n&&(o+=t.layout.span)),super(o,r),this.discriminator=t,this.usesPrefixDiscriminator=n,this.defaultLayout=e,this.registry={};let i=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(t){return i(t)},this.configGetSourceVariant=function(t){i=t.bind(this)}}getSpan(t,e){if(0<=this.span)return this.span;void 0===e&&(e=0);const r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(t.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&t.hasOwnProperty(this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||t.hasOwnProperty(e.property)))return e}else for(const e in this.registry){const r=this.registry[e];if(t.hasOwnProperty(r.property))return r}throw new Error("unable to infer src variant")}decode(t,e){let r;void 0===e&&(e=0);const n=this.discriminator,o=n.decode(t,e);let i=this.registry[o];if(void 0===i){let s=0;i=this.defaultLayout,this.usesPrefixDiscriminator&&(s=n.layout.span),r=this.makeDestinationObject(),r[n.property]=o,r[i.property]=this.defaultLayout.decode(t,e+s)}else r=i.decode(t,e);return r}encode(t,e,r){void 0===r&&(r=0);const n=this.getSourceVariant(t);if(void 0===n){const n=this.discriminator,o=this.defaultLayout;let i=0;return this.usesPrefixDiscriminator&&(i=n.layout.span),n.encode(t[n.property],e,r),i+o.encode(t[o.property],e,r+i)}return n.encode(t,e,r)}addVariant(t,e,r){const n=new te(this,t,e,r);return this.registry[t]=n,n}getVariant(t,e){let r=t;return Buffer.isBuffer(t)&&(void 0===e&&(e=0),r=this.discriminator.decode(t,e)),this.registry[r]}}class te extends Rt{constructor(t,e,r,n){if(!(t instanceof Yt))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if("string"==typeof r&&void 0===n&&(n=r,r=null),r){if(!(r instanceof Rt))throw new TypeError("layout must be a Layout");if(null!==t.defaultLayout&&0<=r.span&&r.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!=typeof n)throw new TypeError("variant must have a String property")}let o=t.span;0>t.span&&(o=r?r.span:0,0<=o&&t.usesPrefixDiscriminator&&(o+=t.discriminator.layout.span)),super(o,n),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e){if(0<=this.span)return this.span;void 0===e&&(e=0);let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),r+this.layout.getSpan(t,e+r)}decode(t,e){const r=this.makeDestinationObject();if(void 0===e&&(e=0),this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+n):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r){void 0===r&&(r=0);let n=0;if(this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout&&!t.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let o=n;if(this.layout&&(this.layout.encode(t[this.property],e,r+n),o+=this.layout.getSpan(e,r+n),0<=this.union.span&&o>this.union.span))throw new Error("encoded variant overruns containing union");return o}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}class ee extends Rt{constructor(t,e){if(!(t instanceof Vt&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof Vt||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e){void 0===e&&(e=0);let r=this.span;return 0>r&&(r=this.length.decode(t,e)),t.slice(e,e+r)}encode(t,e,r){let n=this.length;if(this.length instanceof Vt&&(n=t.length),!Buffer.isBuffer(t)||n!==t.length)throw new TypeError((o="Blob.encode",(this.property?o+"["+this.property+"]":o)+" requires (length "+n+") Buffer as src"));var o;if(r+n>e.length)throw new RangeError("encoding overruns Buffer");return e.write(t.toString("hex"),r,n,"hex"),this.length instanceof Vt&&this.length.encode(n,e,r),n}}var re=(t,e,r)=>new $t(t,e,r),ne=t=>new Ft(1,t),oe=t=>new Ft(4,t),ie=t=>new Ht(t),se=t=>new Jt(t),ae=(t,e,r)=>new Zt(t,e,r),ce=(t,e,r)=>new Yt(t,e,r),ue=(t,e)=>new ee(t,e);class le{constructor(t){}encode(e,r){switch(d(e)){case"initializeMint":return function({decimals:e,mintAuthority:r,freezeAuthority:n}){return fe({initializeMint:{decimals:e,mintAuthority:r.toBuffer(),freezeAuthorityOption:!!n,freezeAuthority:(n||t.default).toBuffer()}})}(r);case"initializeAccount":return fe({initializeAccount:{}});case"initializeMultisig":return function({m:t}){return fe({initializeMultisig:{m:t}})}(r);case"transfer":return function({amount:t}){return fe({transfer:{amount:t}})}(r);case"approve":return function({amount:t}){return fe({approve:{amount:t}})}(r);case"revoke":return fe({revoke:{}});case"setAuthority":return function({authorityType:t,newAuthority:e}){return fe({setAuthority:{authorityType:t,newAuthority:e}})}(r);case"mintTo":return function({amount:t}){return fe({mintTo:{amount:t}})}(r);case"burn":return function({amount:t}){return fe({burn:{amount:t}})}(r);case"closeAccount":return fe({closeAccount:{}});case"freezeAccount":return fe({freezeAccount:{}});case"thawAccount":return fe({thawAccount:{}});case"transferChecked":return function({amount:t,decimals:e}){return fe({transferChecked:{amount:t,decimals:e}})}(r);case"approvedChecked":return function({amount:t,decimals:e}){return fe({approveChecked:{amount:t,decimals:e}})}(r);case"mintToChecked":return function({amount:t,decimals:e}){return fe({mintToChecked:{amount:t,decimals:e}})}(r);case"burnChecked":return function({amount:t,decimals:e}){return fe({burnChecked:{amount:t,decimals:e}})}(r);case"intializeAccount2":return function({authority:t}){return fe({initilaizeAccount2:{authority:t}})}(r);case"syncNative":return fe({syncNative:{}});case"initializeAccount3":return function({authority:t}){return fe({initializeAccount3:{authority:t}})}(r);case"initializeMultisig2":return function({m:t}){return fe({initializeMultisig2:{m:t}})}(r);case"initializeMint2":return function({decimals:t,mintAuthority:e,freezeAuthority:r}){return fe({encodeInitializeMint2:{decimals:t,mintAuthority:e,freezeAuthority:r}})}(r);default:throw new Error(`Invalid instruction: ${e}`)}}encodeState(t,e){throw new Error("SPL token does not have state")}}const de=ce(ne("instruction"));function he(t){return ue(32,t)}function fe(t){let e=Buffer.alloc(pe),r=de.encode(t,e);return e.slice(0,r)}de.addVariant(0,ae([ne("decimals"),ue(32,"mintAuthority"),ne("freezeAuthorityOption"),he("freezeAuthority")]),"initializeMint"),de.addVariant(1,ae([]),"initializeAccount"),de.addVariant(2,ae([ne("m")]),"initializeMultisig"),de.addVariant(3,ae([ie("amount")]),"transfer"),de.addVariant(4,ae([ie("amount")]),"approve"),de.addVariant(5,ae([]),"revoke"),de.addVariant(6,ae([ne("authorityType"),ne("newAuthorityOption"),he("newAuthority")]),"setAuthority"),de.addVariant(7,ae([ie("amount")]),"mintTo"),de.addVariant(8,ae([ie("amount")]),"burn"),de.addVariant(9,ae([]),"closeAccount"),de.addVariant(10,ae([]),"freezeAccount"),de.addVariant(11,ae([]),"thawAccount"),de.addVariant(12,ae([ie("amount"),ne("decimals")]),"transferChecked"),de.addVariant(13,ae([ie("amount"),ne("decimals")]),"approvedChecked"),de.addVariant(14,ae([ie("amount"),ne("decimals")]),"mintToChecked"),de.addVariant(15,ae([ie("amount"),ne("decimals")]),"burnedChecked"),de.addVariant(16,ae([he("authority")]),"InitializeAccount2"),de.addVariant(17,ae([]),"syncNative"),de.addVariant(18,ae([he("authority")]),"initializeAccount3"),de.addVariant(19,ae([ne("m")]),"initializeMultisig2"),de.addVariant(20,ae([ne("decimals"),he("mintAuthority"),ne("freezeAuthorityOption"),he("freezeAuthority")]),"initializeMint2");const pe=Math.max(...Object.values(de.registry).map((t=>t.span)));class me{constructor(t){}encode(t,e){throw new Error("SPL token does not have state")}decode(t){throw new Error("SPL token does not have state")}}function ye(t){return new ve(ue(8),(t=>Ee.fromBuffer(t)),(t=>t.toBuffer()),t)}function ge(e){return new ve(ue(32),(e=>new t(e)),(t=>t.toBuffer()),e)}function we(t,e){return new be(t,e)}class ve extends jt{constructor(t,e,r,n){super(t.span,n),this.layout=t,this.decoder=e,this.encoder=r}decode(t,e){return this.decoder(this.layout.decode(t,e))}encode(t,e,r){return this.layout.encode(this.encoder(t),e,r)}getSpan(t,e){return this.layout.getSpan(t,e)}}class be extends jt{constructor(t,e){super(-1,e),this.layout=t,this.discriminator=oe()}encode(t,e,r=0){return null==t?this.layout.span+this.discriminator.encode(0,e,r):(this.discriminator.encode(1,e,r),this.layout.encode(t,e,r+4)+4)}decode(t,e=0){const r=this.discriminator.decode(t,e);if(0===r)return null;if(1===r)return this.layout.decode(t,e+4);throw new Error("Invalid coption "+this.layout.property)}getSpan(t,e=0){return this.layout.getSpan(t,e+4)+4}}class Ee extends c{toBuffer(){const t=super.toArray().reverse(),e=Buffer.from(t);if(8===e.length)return e;if(e.length>=8)throw new Error("u64 too large");const r=Buffer.alloc(8);return e.copy(r),r}static fromBuffer(t){if(8!==t.length)throw new Error(`Invalid buffer length: ${t.length}`);return new Ee([...t].reverse().map((t=>`00${t.toString(16)}`.slice(-2))).join(""),16)}}class _e{constructor(t){this.idl=t}async encode(t,e){switch(t){case"token":{const t=Buffer.alloc(165),r=Se.encode(e,t);return t.slice(0,r)}case"mint":{const t=Buffer.alloc(82),r=Ae.encode(e,t);return t.slice(0,r)}default:throw new Error(`Invalid account name: ${t}`)}}decode(t,e){return this.decodeUnchecked(t,e)}decodeUnchecked(t,e){switch(t){case"token":return function(t){return Se.decode(t)}(e);case"mint":return function(t){return Ae.decode(t)}(e);default:throw new Error(`Invalid account name: ${t}`)}}memcmp(t,e){switch(t){case"token":return{dataSize:165};case"mint":return{dataSize:82};default:throw new Error(`Invalid account name: ${t}`)}}size(t){var e;return null!==(e=Tt(this.idl,t))&&void 0!==e?e:0}}const Ae=ae([we(ge(),"mintAuthority"),ye("supply"),ne("decimals"),("isInitialized",new ve(ne(),(function(t){if(0===t)return!1;if(1===t)return!0;throw new Error("Invalid bool: "+t)}),(function(t){return t?1:0}),"isInitialized")),we(ge(),"freezeAuthority")]);const Se=ae([ge("mint"),ge("authority"),ye("amount"),we(ge(),"delegate"),ne("state"),we(ye(),"isNative"),ye("delegatedAmount"),we(ge(),"closeAuthority")]);class Ie{constructor(t){}decode(t){throw new Error("SPL token program does not have events")}}class xe{constructor(t){}encode(t,e){throw new Error("SPL token does not have user-defined types")}decode(t,e){throw new Error("SPL token does not have user-defined types")}}class ke{constructor(t){this.instruction=new le(t),this.accounts=new _e(t),this.events=new Ie(t),this.state=new me(t),this.types=new xe(t)}}class Le extends jt{constructor(t){super(-1,t),this.property=t,this.layout=ae([oe("length"),oe("lengthPadding"),ue(re(oe(),-8),"chars")],this.property)}encode(t,e,r=0){if(null==t)return this.layout.span;const n={chars:Buffer.from(t,"utf8")};return this.layout.encode(n,e,r)}decode(t,e=0){return this.layout.decode(t,e).chars.toString()}getSpan(t,e=0){return oe().span+oe().span+new c(new Uint8Array(t).slice(e,e+4),10,"le").toNumber()}}function Te(t){return new Le(t)}function Oe(t){return ue(32,t)}const Be=ce(oe("instruction"));Be.addVariant(0,ae([se("lamports"),se("space"),Oe("owner")]),"createAccount"),Be.addVariant(1,ae([Oe("owner")]),"assign"),Be.addVariant(2,ae([se("lamports")]),"transfer"),Be.addVariant(3,ae([Oe("base"),Te("seed"),se("lamports"),se("space"),Oe("owner")]),"createAccountWithSeed"),Be.addVariant(4,ae([Oe("authorized")]),"advanceNonceAccount"),Be.addVariant(5,ae([se("lamports")]),"withdrawNonceAccount"),Be.addVariant(6,ae([Oe("authorized")]),"initializeNonceAccount"),Be.addVariant(7,ae([Oe("authorized")]),"authorizeNonceAccount"),Be.addVariant(8,ae([se("space")]),"allocate"),Be.addVariant(9,ae([Oe("base"),Te("seed"),se("space"),Oe("owner")]),"allocateWithSeed"),Be.addVariant(10,ae([Oe("base"),Te("seed"),Oe("owner")]),"assignWithSeed"),Be.addVariant(11,ae([se("lamports"),Te("seed"),Oe("owner")]),"transferWithSeed"),Math.max(...Object.values(Be.registry).map((t=>t.span)));class Pe extends jt{constructor(t,e,r,n){super(t.span,n),this.layout=t,this.decoder=e,this.encoder=r}decode(t,e){return this.decoder(this.layout.decode(t,e))}encode(t,e,r){return this.layout.encode(this.encoder(t),e,r)}getSpan(t,e){return this.layout.getSpan(t,e)}}function Me(e){return new Pe(ue(32),(e=>new t(e)),(t=>t.toBuffer()),e)}ae([oe("version"),oe("state"),Me("authorizedPubkey"),Me("nonce"),ae([ie("lamportsPerSignature")],"feeCalculator")]);var Ue=Object.freeze({__proto__:null,hash:function(t){return h(t)}});function De(e,r,n){const o=a.concat([e.toBuffer(),a.from(r),n.toBuffer()]),i=h.digest(o);return new t(a.from(i))}function Ce(e,r){let n=a.alloc(0);e.forEach((function(t){if(t.length>32)throw new TypeError("Max seed length exceeded");n=a.concat([n,ze(t)])})),n=a.concat([n,r.toBuffer(),a.from("ProgramDerivedAddress")]);let o=h(new Uint8Array(n)),i=new c(o,16).toArray(void 0,32);if(t.isOnCurve(new Uint8Array(i)))throw new Error("Invalid seeds, address must fall off the curve");return new t(i)}function Ne(t,e){let r,n=255;for(;0!=n;){try{r=Ce(t.concat(a.from([n])),e)}catch(t){if(t instanceof TypeError)throw t;n--;continue}return[r,n]}throw new Error("Unable to find a viable program address nonce")}const ze=t=>t instanceof a?t:t instanceof Uint8Array?a.from(t.buffer,t.byteOffset,t.byteLength):a.from(t);async function Re(e,...r){let n=[a.from([97,110,99,104,111,114])];r.forEach((t=>{n.push(t instanceof a?t:T(t).toBuffer())}));const[o]=await t.findProgramAddress(n,T(e));return o}var je=Object.freeze({__proto__:null,createWithSeedSync:De,createProgramAddressSync:Ce,findProgramAddressSync:Ne,associated:Re});const Ve=new t("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),$e=new t("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");var Fe=Object.freeze({__proto__:null,TOKEN_PROGRAM_ID:Ve,ASSOCIATED_PROGRAM_ID:$e,associatedAddress:async function({mint:e,owner:r}){return(await t.findProgramAddress([r.toBuffer(),Ve.toBuffer(),e.toBuffer()],$e))[0]}}),qe={exports:{}};!function(t,e){var r="undefined"!=typeof self?self:zt,n=function(){function t(){this.fetch=!1,this.DOMException=r.DOMException}return t.prototype=r,new t}();!function(t){!function(e){var r="URLSearchParams"in t,n="Symbol"in t&&"iterator"in Symbol,o="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),i="FormData"in t,s="ArrayBuffer"in t;if(s)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(t){return t&&a.indexOf(Object.prototype.toString.call(t))>-1};function u(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function l(t){return"string"!=typeof t&&(t=String(t)),t}function d(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return n&&(e[Symbol.iterator]=function(){return e}),e}function h(t){this.map={},t instanceof h?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function f(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function p(t){return new Promise((function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function m(t){var e=new FileReader,r=p(e);return e.readAsArrayBuffer(t),r}function y(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:o&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:i&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:r&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():s&&o&&(e=t)&&DataView.prototype.isPrototypeOf(e)?(this._bodyArrayBuffer=y(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(t)||c(t))?this._bodyArrayBuffer=y(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var t=f(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(m)}),this.text=function(){var t=f(this);if(t)return t;if(this._bodyBlob)return function(t){var e=new FileReader,r=p(e);return e.readAsText(t),r}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}h.prototype.append=function(t,e){t=u(t),e=l(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},h.prototype.delete=function(t){delete this.map[u(t)]},h.prototype.get=function(t){return t=u(t),this.has(t)?this.map[t]:null},h.prototype.has=function(t){return this.map.hasOwnProperty(u(t))},h.prototype.set=function(t,e){this.map[u(t)]=l(e)},h.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},h.prototype.keys=function(){var t=[];return this.forEach((function(e,r){t.push(r)})),d(t)},h.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),d(t)},h.prototype.entries=function(){var t=[];return this.forEach((function(e,r){t.push([r,e])})),d(t)},n&&(h.prototype[Symbol.iterator]=h.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(t,e){var r,n,o=(e=e||{}).body;if(t instanceof v){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new h(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,o||null==t._bodyInit||(o=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new h(e.headers)),this.method=(n=(r=e.method||this.method||"GET").toUpperCase(),w.indexOf(n)>-1?n:r),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function b(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(o))}})),e}function E(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new h(e.headers),this.url=e.url||"",this._initBody(t)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},g.call(v.prototype),g.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},E.error=function(){var t=new E(null,{status:0,statusText:""});return t.type="error",t};var _=[301,302,303,307,308];E.redirect=function(t,e){if(-1===_.indexOf(e))throw new RangeError("Invalid status code");return new E(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function A(t,r){return new Promise((function(n,i){var s=new v(t,r);if(s.signal&&s.signal.aborted)return i(new e.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function c(){a.abort()}a.onload=function(){var t,e,r={status:a.status,statusText:a.statusText,headers:(t=a.getAllResponseHeaders()||"",e=new h,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var r=t.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();e.append(n,o)}})),e)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var o="response"in a?a.response:a.responseText;n(new E(o,r))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.onabort=function(){i(new e.DOMException("Aborted","AbortError"))},a.open(s.method,s.url,!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&o&&(a.responseType="blob"),s.headers.forEach((function(t,e){a.setRequestHeader(e,t)})),s.signal&&(s.signal.addEventListener("abort",c),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",c)}),a.send(void 0===s._bodyInit?null:s._bodyInit)}))}A.polyfill=!0,t.fetch||(t.fetch=A,t.Headers=h,t.Request=v,t.Response=E),e.Headers=h,e.Request=v,e.Response=E,e.fetch=A,Object.defineProperty(e,"__esModule",{value:!0})}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var o=n;(e=o.fetch).default=o.fetch,e.fetch=o.fetch,e.Headers=o.Headers,e.Request=o.Request,e.Response=o.Response,t.exports=e}(qe,qe.exports);var Ge=function(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}(qe.exports);async function Ke(t,e){const r=await t.getAccountInfo(e);if(null===r)throw new Error("program account not found");const{program:n}=He(r.data),o=await t.getAccountInfo(n.programdataAddress);if(null===o)throw new Error("program data account not found");const{programData:i}=He(o.data);return i}const We=f.rustEnum([f.struct([],"uninitialized"),f.struct([f.option(f.publicKey(),"authorityAddress")],"buffer"),f.struct([f.publicKey("programdataAddress")],"program"),f.struct([f.u64("slot"),f.option(f.publicKey(),"upgradeAuthorityAddress")],"programData")],void 0,f.u32());function He(t){return We.decode(t)}var Je=Object.freeze({__proto__:null,verifiedBuild:async function(t,e,r=5){const n=`https://api.apr.dev/api/v0/program/${e.toString()}/latest?limit=${r}`,[o,i]=await Promise.all([Ke(t,e),Ge(n)]),s=(await i.json()).filter((t=>!t.aborted&&"Built"===t.state&&"Verified"===t.verified));if(0===s.length)return null;const a=s[0];return o.slot.toNumber()!==a.verified_slot?null:a},fetchData:Ke,decodeUpgradeableLoaderState:He});Object.freeze({__proto__:null,sha256:Ue,rpc:nt,publicKey:je,bytes:I,token:Fe,features:ft,registry:Je});const Ze=f.struct([f.publicKey("authority"),f.vecU8("data")]);function Xe(t,e){var r,n;let o={};const i=t.args?t.args.length:0;if(e.length>i){if(e.length!==i+1)throw new Error(`provided too many arguments ${e} to instruction ${null==t?void 0:t.name} expecting: ${null!==(n=null===(r=t.args)||void 0===r?void 0:r.map((t=>t.name)))&&void 0!==n?n:[]}`);o=e.pop()}return[e,o]}class Qe{static build(t,e,n){if("_inner"===t.name)throw new pt("the _inner name is reserved");const o=(...i)=>{const[s,a]=Xe(t,[...i]);L(t.accounts,a.accounts);const c=o.accounts(a.accounts);return void 0!==a.remainingAccounts&&c.push(...a.remainingAccounts),ht("debug-logs")&&console.log("Outgoing account metas:",c),new r({keys:c,programId:n,data:e(t.name,k(t,...s))})};return o.accounts=e=>Qe.accountsArray(e,t.accounts,t.name),o}static accountsArray(t,e,r){return t?e.map((e=>{if(void 0!==("accounts"in e?e.accounts:void 0)){const n=t[e.name];return Qe.accountsArray(n,e.accounts,r).flat()}{const n=e;let o;try{o=T(t[e.name])}catch(t){throw new Error(`Wrong input type for account "${e.name}" in the instruction accounts object${void 0!==r?' for instruction "'+r+'"':""}. Expected PublicKey or string.`)}return{pubkey:o,isWritable:n.isMut,isSigner:n.isSigner}}})).flat():[]}}class Ye{static build(t,e,r,n){return async(...o)=>{var i;const s=e(...o),[,a]=Xe(t,[...o]);if(void 0===n.sendAndConfirm)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");try{return await n.sendAndConfirm(s,null!==(i=a.signers)&&void 0!==i?i:[],a.options)}catch(t){throw wt(t,r)}}}}class tr{static build(t,r){return(...n)=>{var o,i,s;const[,a]=Xe(t,[...n]),c=new e;if(a.preInstructions&&a.instructions)throw new Error("instructions is deprecated, use preInstructions");return null===(o=a.preInstructions)||void 0===o||o.forEach((t=>c.add(t))),null===(i=a.instructions)||void 0===i||i.forEach((t=>c.add(t))),c.add(r(...n)),null===(s=a.postInstructions)||void 0===s||s.forEach((t=>c.add(t))),c}}}class er{constructor(t,e,r=ct(),n=new Nt(t)){this.provider=r,this.coder=n,this._idl=t,this._programId=e,this._address=rr(e),this._sub=null;const[o,s,a]=(()=>{var o;let s={},a={},c={};return null===(o=t.state)||void 0===o||o.methods.forEach((o=>{const u=Qe.build(o,((t,e)=>n.instruction.encodeState(t,e)),e);u.accounts=t=>{const n=function(t,e,r,n){if("new"===r.name){const[r]=Ne([],t);if(void 0===e.wallet)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");return[{pubkey:e.wallet.publicKey,isWritable:!1,isSigner:!0},{pubkey:rr(t),isWritable:!0,isSigner:!1},{pubkey:r,isWritable:!1,isSigner:!1},{pubkey:i.programId,isWritable:!1,isSigner:!1},{pubkey:t,isWritable:!1,isSigner:!1}]}return L(r.accounts,n),[{pubkey:rr(t),isWritable:!0,isSigner:!1}]}(e,r,o,t);return n.concat(Qe.accountsArray(t,o.accounts,o.name))};const l=tr.build(o,u),h=Ye.build(o,l,x(t),r),f=d(o.name);s[f]=u,a[f]=l,c[f]=h})),[s,a,c]})();this.instruction=o,this.transaction=s,this.rpc=a}get programId(){return this._programId}async fetch(){const t=this.address(),e=await this.provider.connection.getAccountInfo(t);if(null===e)throw new Error(`Account does not exist ${t.toString()}`);const r=this._idl.state;if(!r)throw new Error("State is not specified in IDL.");if((await Dt(r.struct.name)).compare(e.data.slice(0,8)))throw new Error("Invalid account discriminator");return this.coder.state.decode(e.data)}address(){return this._address}subscribe(t){if(null!==this._sub)return this._sub.ee;const e=new m,r=this.provider.connection.onAccountChange(this.address(),(t=>{const r=this.coder.state.decode(t.data);e.emit("change",r)}),t);return this._sub={ee:e,listener:r},e}unsubscribe(){null!==this._sub&&this.provider.connection.removeAccountChangeListener(this._sub.listener).then((async()=>{this._sub=null})).catch(console.error)}}function rr(t){let[e]=Ne([],t);return De(e,"unversioned",t)}class nr{constructor(t,e,r,n,o){this._idlAccount=e,this._programId=r,this._provider=null!=n?n:ct(),this._coder=null!=o?o:new Nt(t),this._size=this._coder.accounts.size(e)}get size(){return this._size}get programId(){return this._programId}get provider(){return this._provider}get coder(){return this._coder}async fetchNullable(t,e){const r=await this.getAccountInfo(t,e);return null===r?null:this._coder.accounts.decode(this._idlAccount.name,r.data)}async fetch(t,e){const r=await this.fetchNullable(t,e);if(null===r)throw new Error(`Account does not exist ${t.toString()}`);return r}async fetchMultiple(t,e){return(await Z(this._provider.connection,t.map((t=>T(t))),e)).map((t=>null==t?null:this._coder.accounts.decode(this._idlAccount.name,null==t?void 0:t.account.data)))}async all(t){return(await this._provider.connection.getProgramAccounts(this._programId,{commitment:this._provider.connection.commitment,filters:[{memcmp:this.coder.accounts.memcmp(this._idlAccount.name,t instanceof Buffer?t:void 0)},...Array.isArray(t)?t:[]]})).map((({pubkey:t,account:e})=>({publicKey:t,account:this._coder.accounts.decode(this._idlAccount.name,e.data)})))}subscribe(t,e){const r=or.get(t.toString());if(r)return r.ee;const n=new m;t=T(t);const o=this._provider.connection.onAccountChange(t,(t=>{const e=this._coder.accounts.decode(this._idlAccount.name,t.data);n.emit("change",e)}),e);return or.set(t.toString(),{ee:n,listener:o}),n}async unsubscribe(t){let e=or.get(t.toString());e?or&&await this._provider.connection.removeAccountChangeListener(e.listener).then((()=>{or.delete(t.toString())})).catch(console.error):console.warn("Address is not subscribed")}async createInstruction(t,e){const r=this.size;if(void 0===this._provider.wallet)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");return i.createAccount({fromPubkey:this._provider.wallet.publicKey,newAccountPubkey:t.publicKey,space:null!=e?e:r,lamports:await this._provider.connection.getMinimumBalanceForRentExemption(null!=e?e:r),programId:this._programId})}async associated(...t){const e=await this.associatedAddress(...t);return await this.fetch(e)}async associatedAddress(...t){return await Re(this._programId,...t)}async getAccountInfo(t,e){return await this._provider.connection.getAccountInfo(T(t),e)}}const or=new Map,ir="Program log: ".length,sr="Program data: ".length;class ar{constructor(t,e,r){this._programId=t,this._provider=e,this._eventParser=new cr(t,r),this._eventCallbacks=new Map,this._eventListeners=new Map,this._listenerIdCount=0}addEventListener(t,e){var r;let n=this._listenerIdCount;return this._listenerIdCount+=1,t in this._eventCallbacks||this._eventListeners.set(t,[]),this._eventListeners.set(t,(null!==(r=this._eventListeners.get(t))&&void 0!==r?r:[]).concat(n)),this._eventCallbacks.set(n,[t,e]),void 0!==this._onLogsSubscriptionId||(this._onLogsSubscriptionId=this._provider.connection.onLogs(this._programId,((t,e)=>{if(!t.err)for(const r of this._eventParser.parseLogs(t.logs)){const n=this._eventListeners.get(r.name);n&&n.forEach((n=>{const o=this._eventCallbacks.get(n);if(o){const[,n]=o;n(r.data,e.slot,t.signature)}}))}}))),n}async removeEventListener(t){const e=this._eventCallbacks.get(t);if(!e)throw new Error(`Event listener ${t} doesn't exist!`);const[r]=e;let n=this._eventListeners.get(r);if(!n)throw new Error(`Event listeners don't exist for ${r}!`);this._eventCallbacks.delete(t),n=n.filter((e=>e!==t)),0===n.length&&this._eventListeners.delete(r),0==this._eventCallbacks.size&&(y.ok(0===this._eventListeners.size),void 0!==this._onLogsSubscriptionId&&(await this._provider.connection.removeOnLogsListener(this._onLogsSubscriptionId),this._onLogsSubscriptionId=void 0))}}class cr{constructor(t,e){this.coder=e,this.programId=t}*parseLogs(t){const e=new lr(t),r=new ur;let n=e.next();for(;null!==n;){let[t,o,i]=this.handleLog(r,n);t&&(yield t),o&&r.push(o),i&&r.pop(),n=e.next()}}handleLog(t,e){return t.stack.length>0&&t.program()===this.programId.toString()?this.handleProgramLog(e):[null,...this.handleSystemLog(e)]}handleProgramLog(t){if(t.startsWith("Program log: ")||t.startsWith("Program data: ")){const e=t.startsWith("Program log: ")?t.slice(ir):t.slice(sr);return[this.coder.events.decode(e),null,!1]}return[null,...this.handleSystemLog(t)]}handleSystemLog(t){const e=t.split(":")[0];return null!==e.match(/^Program (.*) success/g)?[null,!0]:e.startsWith(`Program ${this.programId.toString()} invoke`)?[this.programId.toString(),!1]:e.includes("invoke")?["cpi",!1]:[null,!1]}}class ur{constructor(){this.stack=[]}program(){return y.ok(this.stack.length>0),this.stack[this.stack.length-1]}push(t){this.stack.push(t)}pop(){y.ok(this.stack.length>0),this.stack.pop()}}class lr{constructor(t){this.logs=t}next(){if(0===this.logs.length)return null;let t=this.logs[0];return this.logs=this.logs.slice(1),t}}new t("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");const dr={version:"0.1.0",name:"spl_token",instructions:[{name:"initializeMint",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"decimals",type:"u8"},{name:"mintAuthority",type:"publicKey"},{name:"freezeAuthority",type:{coption:"publicKey"}}]},{name:"initializeAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[]},{name:"initializeMultisig",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"m",type:"u8"}]},{name:"transfer",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"approve",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"delegate",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"revoke",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[]},{name:"setAuthority",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"authorityType",type:"u8"},{name:"newAuthority",type:{coption:"publicKey"}}]},{name:"mintTo",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"to",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"burn",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"closeAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!1}],args:[]},{name:"freezeAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[]},{name:"thawAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[]},{name:"transferChecked",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"approveChecked",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"delegate",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"mintToChecked",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"to",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"burnChecked",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"initializeAccount2",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"authority",type:"publicKey"}]},{name:"syncNative",accounts:[{name:"account",isMut:!0,isSigner:!1}],args:[]},{name:"initializeAccount3",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1}],args:[{name:"authority",type:"publicKey"}]},{name:"initializeMultisig2",accounts:[{name:"account",isMut:!0,isSigner:!1}],args:[{name:"m",type:"u8"}]},{name:"initializeMint2",accounts:[{name:"mint",isMut:!0,isSigner:!1}],args:[{name:"decimals",type:"u8"},{name:"mintAuthority",type:"publicKey"},{name:"freezeAuthority",type:{coption:"publicKey"}}]}],accounts:[{name:"mint",type:{kind:"struct",fields:[{name:"mintAuthority",type:{coption:"publicKey"}},{name:"supply",type:"u64"},{name:"decimals",type:"u8"},{name:"isInitialized",type:"bool"},{name:"freezeAuthority",type:{coption:"publicKey"}}]}},{name:"token",type:{kind:"struct",fields:[{name:"mint",type:"publicKey"},{name:"authority",type:"publicKey"},{name:"amount",type:"u64"},{name:"delegate",type:{coption:"publicKey"}},{name:"state",type:"u8"},{name:"isNative",type:{coption:"u64"}},{name:"delegatedAmount",type:"u64"},{name:"closeAuthority",type:{coption:"publicKey"}}]}}]};class hr{constructor(t,e,r,n,o,i){this._args=t,this._accounts=e,this._provider=r,this._programId=n,this._idlIx=o,this._accountStore=new fr(r,i)}async resolve(){for(let t=0;t<this._idlIx.accounts.length;t+=1){const e=this._idlIx.accounts[t],r=d(e.name);if(!e.isSigner||this._accounts[r])Reflect.has(hr.CONST_ACCOUNTS,r)&&!this._accounts[r]&&(this._accounts[r]=hr.CONST_ACCOUNTS[r]);else{if(void 0===this._provider.wallet)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");this._accounts[r]=this._provider.wallet.publicKey}}for(let t=0;t<this._idlIx.accounts.length;t+=1){const e=this._idlIx.accounts[t],r=d(e.name);e.pda&&e.pda.seeds.length>0&&!this._accounts[r]&&await this.autoPopulatePda(e)}}async autoPopulatePda(e){if(!e.pda||!e.pda.seeds)throw new Error("Must have seeds");const r=await Promise.all(e.pda.seeds.map((t=>this.toBuffer(t)))),n=await this.parseProgramId(e),[o]=await t.findProgramAddress(r,n);this._accounts[d(e.name)]=o}async parseProgramId(e){var r;if(!(null===(r=e.pda)||void 0===r?void 0:r.programId))return this._programId;switch(e.pda.programId.kind){case"const":return new t(this.toBufferConst(e.pda.programId.value));case"arg":return this.argValue(e.pda.programId);case"account":return await this.accountValue(e.pda.programId);default:throw new Error(`Unexpected program seed kind: ${e.pda.programId.kind}`)}}async toBuffer(t){switch(t.kind){case"const":return this.toBufferConst(t);case"arg":return await this.toBufferArg(t);case"account":return await this.toBufferAccount(t);default:throw new Error(`Unexpected seed kind: ${t.kind}`)}}toBufferConst(t){return this.toBufferValue(t.type,t.value)}async toBufferArg(t){const e=this.argValue(t);return this.toBufferValue(t.type,e)}argValue(t){const e=d(t.path.split(".")[0]),r=this._idlIx.args.findIndex((t=>t.name===e));if(-1===r)throw new Error(`Unable to find argument for seed: ${e}`);return this._args[r]}async toBufferAccount(t){const e=await this.accountValue(t);return this.toBufferValue(t.type,e)}async accountValue(t){const e=t.path.split("."),r=e[0],n=this._accounts[d(r)];if(1===e.length)return n;const o=await this._accountStore.fetchAccount(t.account,n);return this.parseAccountValue(o,e.slice(1))}parseAccountValue(t,e){let r;for(;e.length>0;)r=t[d(e[0])],e=e.slice(1);return r}toBufferValue(t,e){switch(t){case"u8":return Buffer.from([e]);case"u16":let r=Buffer.alloc(2);return r.writeUInt16LE(e),r;case"u32":let n=Buffer.alloc(4);return n.writeUInt32LE(e),n;case"u64":let o=Buffer.alloc(8);return o.writeBigUInt64LE(BigInt(e)),o;case"string":return Buffer.from(v(e));case"publicKey":return e.toBuffer();default:if(t.array)return Buffer.from(e);throw new Error(`Unexpected seed type: ${t}`)}}}hr.CONST_ACCOUNTS={associatedTokenProgram:$e,rent:o,systemProgram:i.programId,tokenProgram:Ve};class fr{constructor(t,e){this._provider=t,this._accounts=e,this._cache=new Map}async fetchAccount(t,e){const r=e.toString();if(!this._cache.has(r))if("TokenAccount"===t){const t=await this._provider.connection.getAccountInfo(e);if(null===t)throw new Error(`invalid account info for ${r}`);const n=new ke(dr).accounts.decode("token",t.data);this._cache.set(r,n)}else{const n=this._accounts[d(t)].fetch(e);this._cache.set(r,n)}return this._cache.get(r)}}class pr{static build(t,e,r,n,o,i,s,a,c){return(...u)=>new mr(u,n,o,i,s,a,t,e,r,c)}}class mr{constructor(t,e,r,n,o,i,s,a,c,u){this._args=t,this._ixFn=e,this._txFn=r,this._rpcFn=n,this._simulateFn=o,this._viewFn=i,this._accounts={},this._remainingAccounts=[],this._signers=[],this._preInstructions=[],this._postInstructions=[],this._autoResolveAccounts=!0,this._accountsResolver=new hr(t,this._accounts,s,a,c,u)}async pubkeys(){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._accounts}accounts(t){return this._autoResolveAccounts=!0,Object.assign(this._accounts,t),this}accountsStrict(t){return this._autoResolveAccounts=!1,Object.assign(this._accounts,t),this}signers(t){return this._signers=this._signers.concat(t),this}remainingAccounts(t){return this._remainingAccounts=this._remainingAccounts.concat(t),this}preInstructions(t){return this._preInstructions=this._preInstructions.concat(t),this}postInstructions(t){return this._postInstructions=this._postInstructions.concat(t),this}async rpc(t){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._rpcFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:t})}async view(t){if(this._autoResolveAccounts&&await this._accountsResolver.resolve(),!this._viewFn)throw new Error("Method does not support views");return this._viewFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:t})}async simulate(t){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._simulateFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:t})}async instruction(){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._ixFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}async transaction(){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._txFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}}class yr{constructor(t,e,r,n){e=T(e),r||(r=ct()),this._idl=t,this._provider=r,this._programId=e,this._coder=null!=n?n:new Nt(t),this._events=new ar(this._programId,r,this._coder);const[o,i,s,a,c,u,l,h]=class{static build(t,e,r,n){const o={},i={},s={},a={},c={},u={},l=x(t),h=t.accounts?class{static build(t,e,r,n){var o;const i={};return null===(o=t.accounts)||void 0===o||o.forEach((o=>{const s=d(o.name);i[s]=new nr(t,o,r,n,e)})),i}}.build(t,e,r,n):{},f=class{static build(t,e,r,n){if(void 0!==t.state)return new er(t,r,n,e)}}.build(t,e,r,n);return t.instructions.forEach((f=>{const p=Qe.build(f,((t,r)=>e.instruction.encode(t,r)),r),m=tr.build(f,p),y=Ye.build(f,m,l,n),g=class{static build(t,e,r,n,o,i,s){return async(...a)=>{var c;const u=e(...a),[,l]=Xe(t,[...a]);let d;if(void 0===n.simulate)throw new Error("This function requires 'Provider.simulate' to be implemented.");try{d=await n.simulate(u,l.signers,null===(c=l.options)||void 0===c?void 0:c.commitment)}catch(t){throw wt(t,r)}if(void 0===d)throw new Error("Unable to simulate transaction");const h=d.logs;if(!h)throw new Error("Simulated logs not found");const f=[];if(s.events){let t=new cr(i,o);for(const e of t.parseLogs(h))f.push(e)}return{events:f,raw:h}}}}.build(f,m,l,n,e,r,t),w=class{static build(t,e,r,n){const o=e.accounts.find((t=>t.isMut)),i=!!e.returns;if(!o&&i)return async(...o)=>{var i,s;let a=await r(...o);const c=`Program return: ${t} `;let u=a.raw.find((t=>t.startsWith(c)));if(!u)throw new Error("View expected return log");let l=A(u.slice(c.length)),d=e.returns;if(!d)throw new Error("View expected return type");return It.fieldLayout({type:d},Array.from([...null!==(i=n.accounts)&&void 0!==i?i:[],...null!==(s=n.types)&&void 0!==s?s:[]])).decode(l)}}}.build(r,f,g,t),v=pr.build(n,r,f,p,m,y,g,w,h),b=d(f.name);i[b]=p,s[b]=m,o[b]=y,a[b]=g,c[b]=v,w&&(u[b]=w)})),[o,i,s,h,a,c,f,u]}}.build(t,this._coder,e,r);this.rpc=o,this.instruction=i,this.transaction=s,this.account=a,this.simulate=c,this.methods=u,this.state=l,this.views=h}get programId(){return this._programId}get idl(){return this._idl}get coder(){return this._coder}get provider(){return this._provider}static async at(t,e){const r=T(t),n=await yr.fetchIdl(r,e);if(!n)throw new Error(`IDL not found for program: ${t.toString()}`);return new yr(n,r,e)}static async fetchIdl(e,r){r=null!=r?r:ct();const n=T(e),o=await async function(e){const r=(await t.findProgramAddress([],e))[0];return await t.createWithSeed(r,"anchor:idl",e)}(n),i=await r.connection.getAccountInfo(o);if(!i)return null;let s=(a=i.data.slice(8),Ze.decode(a));var a;const c=p(s.data);return JSON.parse(w(c))}addEventListener(t,e){return this._events.addEventListener(t,e)}async removeEventListener(t){return await this._events.removeEventListener(t)}}new t("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),new t("11111111111111111111111111111111");class gr{constructor(t){}async encode(t,e){throw new Error(`Invalid account name: ${t}`)}decode(t,e){return this.decodeUnchecked(t,e)}decodeUnchecked(t,e){throw new Error(`Invalid account name: ${t}`)}memcmp(t,e){throw new Error(`Invalid account name: ${t}`)}size(t){throw t.name,new Error(`Invalid account name: ${t.name}`)}}class wr{constructor(t){}decode(t){throw new Error("TokenVesting program does not have events")}}var vr={};Object.defineProperty(vr,"__esModule",{value:!0}),vr.s16=vr.s8=vr.nu64be=vr.u48be=vr.u40be=vr.u32be=vr.u24be=vr.u16be=vr.nu64=vr.u48=vr.u40=an=vr.u32=vr.u24=vr.u16=sn=vr.u8=on=vr.offset=vr.greedy=vr.Constant=vr.UTF8=vr.CString=vr.Blob=vr.Boolean=vr.BitField=vr.BitStructure=vr.VariantLayout=vr.Union=vr.UnionLayoutDiscriminator=vr.UnionDiscriminator=vr.Structure=vr.Sequence=vr.DoubleBE=vr.Double=vr.FloatBE=vr.Float=vr.NearInt64BE=vr.NearInt64=vr.NearUInt64BE=vr.NearUInt64=vr.IntBE=vr.Int=vr.UIntBE=vr.UInt=vr.OffsetLayout=vr.GreedyCount=vr.ExternalLayout=vr.bindConstructorLayout=vr.nameWithProperty=vr.Layout=vr.uint8ArrayToBuffer=vr.checkUint8Array=void 0,vr.constant=vr.utf8=vr.cstr=dn=vr.blob=vr.unionLayoutDiscriminator=vr.union=un=vr.seq=vr.bits=cn=vr.struct=vr.f64be=vr.f64=vr.f32be=vr.f32=vr.ns64be=vr.s48be=vr.s40be=vr.s32be=vr.s24be=vr.s16be=vr.ns64=vr.s48=vr.s40=vr.s32=vr.s24=void 0;const br=s;function Er(t){if(!(t instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}function _r(t){return Er(t),br.Buffer.from(t.buffer,t.byteOffset,t.length)}vr.checkUint8Array=Er,vr.uint8ArrayToBuffer=_r;class Ar{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}var Sr=vr.Layout=Ar;function Ir(t,e){return e.property?t+"["+e.property+"]":t}vr.nameWithProperty=Ir,vr.bindConstructorLayout=function(t,e){if("function"!=typeof t)throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(t,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof Ar))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");t.layout_=e,e.boundConstructor_=t,e.makeDestinationObject=()=>new t,Object.defineProperty(t.prototype,"encode",{value(t,r){return e.encode(this,t,r)},writable:!0}),Object.defineProperty(t,"decode",{value:(t,r)=>e.decode(t,r),writable:!0})};class xr extends Ar{isCount(){throw new Error("ExternalLayout is abstract")}}vr.ExternalLayout=xr;class kr extends xr{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){Er(t);const r=t.length-e;return Math.floor(r/this.elementSpan)}encode(t,e,r){return 0}}vr.GreedyCount=kr;class Lr extends xr{constructor(t,e=0,r){if(!(t instanceof Ar))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof Tr||this.layout instanceof Or}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,r=0){return this.layout.encode(t,e,r+this.offset)}}vr.OffsetLayout=Lr;class Tr extends Ar{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return _r(t).readUIntLE(e,this.span)}encode(t,e,r=0){return _r(e).writeUIntLE(t,r,this.span),this.span}}vr.UInt=Tr;class Or extends Ar{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return _r(t).readUIntBE(e,this.span)}encode(t,e,r=0){return _r(e).writeUIntBE(t,r,this.span),this.span}}vr.UIntBE=Or;class Br extends Ar{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return _r(t).readIntLE(e,this.span)}encode(t,e,r=0){return _r(e).writeIntLE(t,r,this.span),this.span}}vr.Int=Br;class Pr extends Ar{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return _r(t).readIntBE(e,this.span)}encode(t,e,r=0){return _r(e).writeIntBE(t,r,this.span),this.span}}vr.IntBE=Pr;const Mr=Math.pow(2,32);function Ur(t){const e=Math.floor(t/Mr);return{hi32:e,lo32:t-e*Mr}}function Dr(t,e){return t*Mr+e}class Cr extends Ar{constructor(t){super(8,t)}decode(t,e=0){const r=_r(t),n=r.readUInt32LE(e);return Dr(r.readUInt32LE(e+4),n)}encode(t,e,r=0){const n=Ur(t),o=_r(e);return o.writeUInt32LE(n.lo32,r),o.writeUInt32LE(n.hi32,r+4),8}}vr.NearUInt64=Cr;class Nr extends Ar{constructor(t){super(8,t)}decode(t,e=0){const r=_r(t);return Dr(r.readUInt32BE(e),r.readUInt32BE(e+4))}encode(t,e,r=0){const n=Ur(t),o=_r(e);return o.writeUInt32BE(n.hi32,r),o.writeUInt32BE(n.lo32,r+4),8}}vr.NearUInt64BE=Nr;class zr extends Ar{constructor(t){super(8,t)}decode(t,e=0){const r=_r(t),n=r.readUInt32LE(e);return Dr(r.readInt32LE(e+4),n)}encode(t,e,r=0){const n=Ur(t),o=_r(e);return o.writeUInt32LE(n.lo32,r),o.writeInt32LE(n.hi32,r+4),8}}vr.NearInt64=zr;class Rr extends Ar{constructor(t){super(8,t)}decode(t,e=0){const r=_r(t);return Dr(r.readInt32BE(e),r.readUInt32BE(e+4))}encode(t,e,r=0){const n=Ur(t),o=_r(e);return o.writeInt32BE(n.hi32,r),o.writeUInt32BE(n.lo32,r+4),8}}vr.NearInt64BE=Rr;class jr extends Ar{constructor(t){super(4,t)}decode(t,e=0){return _r(t).readFloatLE(e)}encode(t,e,r=0){return _r(e).writeFloatLE(t,r),4}}vr.Float=jr;class Vr extends Ar{constructor(t){super(4,t)}decode(t,e=0){return _r(t).readFloatBE(e)}encode(t,e,r=0){return _r(e).writeFloatBE(t,r),4}}vr.FloatBE=Vr;class $r extends Ar{constructor(t){super(8,t)}decode(t,e=0){return _r(t).readDoubleLE(e)}encode(t,e,r=0){return _r(e).writeDoubleLE(t,r),8}}vr.Double=$r;class Fr extends Ar{constructor(t){super(8,t)}decode(t,e=0){return _r(t).readDoubleBE(e)}encode(t,e,r=0){return _r(e).writeDoubleBE(t,r),8}}vr.DoubleBE=Fr;class qr extends Ar{constructor(t,e,r){if(!(t instanceof Ar))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof xr&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let n=-1;!(e instanceof xr)&&0<t.span&&(n=e*t.span),super(n,r),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0,n=this.count;if(n instanceof xr&&(n=n.decode(t,e)),0<this.elementLayout.span)r=n*this.elementLayout.span;else{let o=0;for(;o<n;)r+=this.elementLayout.getSpan(t,e+r),++o}return r}decode(t,e=0){const r=[];let n=0,o=this.count;for(o instanceof xr&&(o=o.decode(t,e));n<o;)r.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),n+=1;return r}encode(t,e,r=0){const n=this.elementLayout,o=t.reduce(((t,o)=>t+n.encode(o,e,r+t)),0);return this.count instanceof xr&&this.count.encode(t.length,e,r),o}}vr.Sequence=qr;class Gr extends Ar{constructor(t,e,r){if(!Array.isArray(t)||!t.reduce(((t,e)=>t&&e instanceof Ar),!0))throw new TypeError("fields must be array of Layout instances");"boolean"==typeof e&&void 0===r&&(r=e,e=void 0);for(const e of t)if(0>e.span&&void 0===e.property)throw new Error("fields cannot contain unnamed variable-length layout");let n=-1;try{n=t.reduce(((t,e)=>t+e.getSpan()),0)}catch(t){}super(n,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce(((r,n)=>{const o=n.getSpan(t,e);return e+=o,r+o}),0)}catch(t){throw new RangeError("indeterminate span")}return r}decode(t,e=0){Er(t);const r=this.makeDestinationObject();for(const n of this.fields)if(void 0!==n.property&&(r[n.property]=n.decode(t,e)),e+=n.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r=0){const n=r;let o=0,i=0;for(const n of this.fields){let s=n.span;if(i=0<s?s:0,void 0!==n.property){const o=t[n.property];void 0!==o&&(i=n.encode(o,e,r),0>s&&(s=n.getSpan(e,r)))}o=r,r+=s}return o+i-n}fromArray(t){const e=this.makeDestinationObject();for(const r of this.fields)void 0!==r.property&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if("string"!=typeof t)throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if("string"!=typeof t)throw new TypeError("property must be string");let e=0;for(const r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}}vr.Structure=Gr;class Kr{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,r){throw new Error("UnionDiscriminator is abstract")}}vr.UnionDiscriminator=Kr;class Wr extends Kr{constructor(t,e){if(!(t instanceof xr&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}}vr.UnionLayoutDiscriminator=Wr;class Hr extends Ar{constructor(t,e,r){let n;if(t instanceof Tr||t instanceof Or)n=new Wr(new Lr(t));else if(t instanceof xr&&t.isCount())n=new Wr(t);else{if(!(t instanceof Kr))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");n=t}if(void 0===e&&(e=null),!(null===e||e instanceof Ar))throw new TypeError("defaultLayout must be null or a Layout");if(null!==e){if(0>e.span)throw new Error("defaultLayout must have constant span");void 0===e.property&&(e=e.replicate("content"))}let o=-1;e&&(o=e.span,0<=o&&(t instanceof Tr||t instanceof Or)&&(o+=n.layout.span)),super(o,r),this.discriminator=n,this.usesPrefixDiscriminator=t instanceof Tr||t instanceof Or,this.defaultLayout=e,this.registry={};let i=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(t){return i(t)},this.configGetSourceVariant=function(t){i=t.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const r=this.registry[e];if(r.property&&Object.prototype.hasOwnProperty.call(t,r.property))return r}throw new Error("unable to infer src variant")}decode(t,e=0){let r;const n=this.discriminator,o=n.decode(t,e),i=this.registry[o];if(void 0===i){const i=this.defaultLayout;let s=0;this.usesPrefixDiscriminator&&(s=n.layout.span),r=this.makeDestinationObject(),r[n.property]=o,r[i.property]=i.decode(t,e+s)}else r=i.decode(t,e);return r}encode(t,e,r=0){const n=this.getSourceVariant(t);if(void 0===n){const n=this.discriminator,o=this.defaultLayout;let i=0;return this.usesPrefixDiscriminator&&(i=n.layout.span),n.encode(t[n.property],e,r),i+o.encode(t[o.property],e,r+i)}return n.encode(t,e,r)}addVariant(t,e,r){const n=new Jr(this,t,e,r);return this.registry[t]=n,n}getVariant(t,e=0){let r;return r=t instanceof Uint8Array?this.discriminator.decode(t,e):t,this.registry[r]}}vr.Union=Hr;class Jr extends Ar{constructor(t,e,r,n){if(!(t instanceof Hr))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if("string"==typeof r&&void 0===n&&(n=r,r=null),r){if(!(r instanceof Ar))throw new TypeError("layout must be a Layout");if(null!==t.defaultLayout&&0<=r.span&&r.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!=typeof n)throw new TypeError("variant must have a String property")}let o=t.span;0>t.span&&(o=r?r.span:0,0<=o&&t.usesPrefixDiscriminator&&(o+=t.discriminator.layout.span)),super(o,n),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let n=0;return this.layout&&(n=this.layout.getSpan(t,e+r)),r+n}decode(t,e=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+n):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r=0){let n=0;if(this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let o=n;if(this.layout&&(this.layout.encode(t[this.property],e,r+n),o+=this.layout.getSpan(e,r+n),0<=this.union.span&&o>this.union.span))throw new Error("encoded variant overruns containing union");return o}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}function Zr(t){return 0>t&&(t+=4294967296),t}vr.VariantLayout=Jr;class Xr extends Ar{constructor(t,e,r){if(!(t instanceof Tr||t instanceof Or))throw new TypeError("word must be a UInt or UIntBE layout");if("string"==typeof e&&void 0===r&&(r=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,r),this.word=t,this.msb=!!e,this.fields=[];let n=0;this._packedSetValue=function(t){return n=Zr(t),this},this._packedGetValue=function(){return n}}decode(t,e=0){const r=this.makeDestinationObject(),n=this.word.decode(t,e);this._packedSetValue(n);for(const e of this.fields)void 0!==e.property&&(r[e.property]=e.decode(t));return r}encode(t,e,r=0){const n=this.word.decode(e,r);this._packedSetValue(n);for(const e of this.fields)if(void 0!==e.property){const r=t[e.property];void 0!==r&&e.encode(r)}return this.word.encode(this._packedGetValue(),e,r)}addField(t,e){const r=new Qr(this,t,e);return this.fields.push(r),r}addBoolean(t){const e=new Yr(this,t);return this.fields.push(e),e}fieldFor(t){if("string"!=typeof t)throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}vr.BitStructure=Xr;class Qr{constructor(t,e,r){if(!(t instanceof Xr))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const n=8*t.span,o=t.fields.reduce(((t,e)=>t+e.bits),0);if(e+o>n)throw new Error("bits too long for span remainder ("+(n-o)+" of "+n+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,32===e&&(this.valueMask=4294967295),this.start=o,this.container.msb&&(this.start=n-o-e),this.wordMask=Zr(this.valueMask<<this.start),this.property=r}decode(t,e){return Zr(this.container._packedGetValue()&this.wordMask)>>>this.start}encode(t){if("number"!=typeof t||!Number.isInteger(t)||t!==Zr(t&this.valueMask))throw new TypeError(Ir("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),r=Zr(t<<this.start);this.container._packedSetValue(Zr(e&~this.wordMask)|r)}}vr.BitField=Qr;class Yr extends Qr{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){"boolean"==typeof t&&(t=+t),super.encode(t)}}vr.Boolean=Yr;class tn extends Ar{constructor(t,e){if(!(t instanceof xr&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof xr||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e=0){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),_r(t).slice(e,e+r)}encode(t,e,r){let n=this.length;if(this.length instanceof xr&&(n=t.length),!(t instanceof Uint8Array&&n===t.length))throw new TypeError(Ir("Blob.encode",this)+" requires (length "+n+") Uint8Array as src");if(r+n>e.length)throw new RangeError("encoding overruns Uint8Array");const o=_r(t);return _r(e).write(o.toString("hex"),r,n,"hex"),this.length instanceof xr&&this.length.encode(n,e,r),n}}vr.Blob=tn;class en extends Ar{constructor(t){super(-1,t)}getSpan(t,e=0){Er(t);let r=e;for(;r<t.length&&0!==t[r];)r+=1;return 1+r-e}decode(t,e=0){const r=this.getSpan(t,e);return _r(t).slice(e,e+r-1).toString("utf-8")}encode(t,e,r=0){"string"!=typeof t&&(t=String(t));const n=br.Buffer.from(t,"utf8"),o=n.length;if(r+o>e.length)throw new RangeError("encoding overruns Buffer");const i=_r(e);return n.copy(i,r),i[r+o]=0,o+1}}vr.CString=en;class rn extends Ar{constructor(t,e){if("string"==typeof t&&void 0===e&&(e=t,t=void 0),void 0===t)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return Er(t),t.length-e}decode(t,e=0){const r=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return _r(t).slice(e,e+r).toString("utf-8")}encode(t,e,r=0){"string"!=typeof t&&(t=String(t));const n=br.Buffer.from(t,"utf8"),o=n.length;if(0<=this.maxSpan&&this.maxSpan<o)throw new RangeError("text length exceeds maxSpan");if(r+o>e.length)throw new RangeError("encoding overruns Buffer");return n.copy(_r(e),r),o}}vr.UTF8=rn;class nn extends Ar{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,r){return 0}}vr.Constant=nn,vr.greedy=(t,e)=>new kr(t,e);var on=vr.offset=(t,e,r)=>new Lr(t,e,r),sn=vr.u8=t=>new Tr(1,t);vr.u16=t=>new Tr(2,t),vr.u24=t=>new Tr(3,t);var an=vr.u32=t=>new Tr(4,t);vr.u40=t=>new Tr(5,t),vr.u48=t=>new Tr(6,t),vr.nu64=t=>new Cr(t),vr.u16be=t=>new Or(2,t),vr.u24be=t=>new Or(3,t),vr.u32be=t=>new Or(4,t),vr.u40be=t=>new Or(5,t),vr.u48be=t=>new Or(6,t),vr.nu64be=t=>new Nr(t),vr.s8=t=>new Br(1,t),vr.s16=t=>new Br(2,t),vr.s24=t=>new Br(3,t),vr.s32=t=>new Br(4,t),vr.s40=t=>new Br(5,t),vr.s48=t=>new Br(6,t),vr.ns64=t=>new zr(t),vr.s16be=t=>new Pr(2,t),vr.s24be=t=>new Pr(3,t),vr.s32be=t=>new Pr(4,t),vr.s40be=t=>new Pr(5,t),vr.s48be=t=>new Pr(6,t),vr.ns64be=t=>new Rr(t),vr.f32=t=>new jr(t),vr.f32be=t=>new Vr(t),vr.f64=t=>new $r(t),vr.f64be=t=>new Fr(t);var cn=vr.struct=(t,e,r)=>new Gr(t,e,r);vr.bits=(t,e,r)=>new Xr(t,e,r);var un=vr.seq=(t,e,r)=>new qr(t,e,r),ln=vr.union=(t,e,r)=>new Hr(t,e,r);vr.unionLayoutDiscriminator=(t,e)=>new Wr(t,e);var dn=vr.blob=(t,e)=>new tn(t,e);vr.cstr=t=>new en(t),vr.utf8=(t,e)=>new rn(t,e),vr.constant=(t,e)=>new nn(t,e);var hn={};Object.defineProperty(hn,"__esModule",{value:!0}),hn.toBigIntLE=function(t){{const e=Buffer.from(t);e.reverse();const r=e.toString("hex");return 0===r.length?BigInt(0):BigInt(`0x${r}`)}},hn.toBigIntBE=function(t){{const e=t.toString("hex");return 0===e.length?BigInt(0):BigInt(`0x${e}`)}},hn.toBufferLE=function(t,e){{const r=t.toString(16),n=Buffer.from(r.padStart(2*e,"0").slice(0,2*e),"hex");return n.reverse(),n}},hn.toBufferBE=function(t,e){{const r=t.toString(16);return Buffer.from(r.padStart(2*e,"0").slice(0,2*e),"hex")}};var fn=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,pn=Math.ceil,mn=Math.floor,yn="[BigNumber Error] ",gn=yn+"Number primitive has more than 15 significant digits: ",wn=1e14,vn=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],bn=1e9;function En(t){var e=0|t;return t>0||t===e?e:e-1}function _n(t){for(var e,r,n=1,o=t.length,i=t[0]+"";n<o;){for(r=14-(e=t[n++]+"").length;r--;e="0"+e);i+=e}for(o=i.length;48===i.charCodeAt(--o););return i.slice(0,o+1||1)}function An(t,e){var r,n,o=t.c,i=e.c,s=t.s,a=e.s,c=t.e,u=e.e;if(!s||!a)return null;if(r=o&&!o[0],n=i&&!i[0],r||n)return r?n?0:-a:s;if(s!=a)return s;if(r=s<0,n=c==u,!o||!i)return n?0:!o^r?1:-1;if(!n)return c>u^r?1:-1;for(a=(c=o.length)<(u=i.length)?c:u,s=0;s<a;s++)if(o[s]!=i[s])return o[s]>i[s]^r?1:-1;return c==u?0:c>u^r?1:-1}function Sn(t,e,r,n){if(t<e||t>r||t!==mn(t))throw Error(yn+(n||"Argument")+("number"==typeof t?t<e||t>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function In(t){var e=t.c.length-1;return En(t.e/14)==e&&t.c[e]%2!=0}function xn(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function kn(t,e,r){var n,o;if(e<0){for(o=r+".";++e;o+=r);t=o+t}else if(++e>(n=t.length)){for(o=r,e-=n;--e;o+=r);t+=o}else e<n&&(t=t.slice(0,e)+"."+t.slice(e));return t}var Ln=function t(e){var r,n,o,i,s,a,c,u,l,d,h=x.prototype={constructor:x,toString:null,valueOf:null},f=new x(1),p=20,m=4,y=-7,g=21,w=-1e7,v=1e7,b=!1,E=1,_=0,A={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},S="0123456789abcdefghijklmnopqrstuvwxyz",I=!0;function x(t,e){var r,i,s,a,c,u,l,d,h=this;if(!(h instanceof x))return new x(t,e);if(null==e){if(t&&!0===t._isBigNumber)return h.s=t.s,void(!t.c||t.e>v?h.c=h.e=null:t.e<w?h.c=[h.e=0]:(h.e=t.e,h.c=t.c.slice()));if((u="number"==typeof t)&&0*t==0){if(h.s=1/t<0?(t=-t,-1):1,t===~~t){for(a=0,c=t;c>=10;c/=10,a++);return void(a>v?h.c=h.e=null:(h.e=a,h.c=[t]))}d=String(t)}else{if(!fn.test(d=String(t)))return o(h,d,u);h.s=45==d.charCodeAt(0)?(d=d.slice(1),-1):1}(a=d.indexOf("."))>-1&&(d=d.replace(".","")),(c=d.search(/e/i))>0?(a<0&&(a=c),a+=+d.slice(c+1),d=d.substring(0,c)):a<0&&(a=d.length)}else{if(Sn(e,2,S.length,"Base"),10==e&&I)return O(h=new x(t),p+h.e+1,m);if(d=String(t),u="number"==typeof t){if(0*t!=0)return o(h,d,u,e);if(h.s=1/t<0?(d=d.slice(1),-1):1,x.DEBUG&&d.replace(/^0\.0*|\./,"").length>15)throw Error(gn+t)}else h.s=45===d.charCodeAt(0)?(d=d.slice(1),-1):1;for(r=S.slice(0,e),a=c=0,l=d.length;c<l;c++)if(r.indexOf(i=d.charAt(c))<0){if("."==i){if(c>a){a=l;continue}}else if(!s&&(d==d.toUpperCase()&&(d=d.toLowerCase())||d==d.toLowerCase()&&(d=d.toUpperCase()))){s=!0,c=-1,a=0;continue}return o(h,String(t),u,e)}u=!1,(a=(d=n(d,e,10,h.s)).indexOf("."))>-1?d=d.replace(".",""):a=d.length}for(c=0;48===d.charCodeAt(c);c++);for(l=d.length;48===d.charCodeAt(--l););if(d=d.slice(c,++l)){if(l-=c,u&&x.DEBUG&&l>15&&(t>9007199254740991||t!==mn(t)))throw Error(gn+h.s*t);if((a=a-c-1)>v)h.c=h.e=null;else if(a<w)h.c=[h.e=0];else{if(h.e=a,h.c=[],c=(a+1)%14,a<0&&(c+=14),c<l){for(c&&h.c.push(+d.slice(0,c)),l-=14;c<l;)h.c.push(+d.slice(c,c+=14));c=14-(d=d.slice(c)).length}else c-=l;for(;c--;d+="0");h.c.push(+d)}}else h.c=[h.e=0]}function k(t,e,r,n){var o,i,s,a,c;if(null==r?r=m:Sn(r,0,8),!t.c)return t.toString();if(o=t.c[0],s=t.e,null==e)c=_n(t.c),c=1==n||2==n&&(s<=y||s>=g)?xn(c,s):kn(c,s,"0");else if(i=(t=O(new x(t),e,r)).e,a=(c=_n(t.c)).length,1==n||2==n&&(e<=i||i<=y)){for(;a<e;c+="0",a++);c=xn(c,i)}else if(e-=s,c=kn(c,i,"0"),i+1>a){if(--e>0)for(c+=".";e--;c+="0");}else if((e+=i-a)>0)for(i+1==a&&(c+=".");e--;c+="0");return t.s<0&&o?"-"+c:c}function L(t,e){for(var r,n=1,o=new x(t[0]);n<t.length;n++){if(!(r=new x(t[n])).s){o=r;break}e.call(o,r)&&(o=r)}return o}function T(t,e,r){for(var n=1,o=e.length;!e[--o];e.pop());for(o=e[0];o>=10;o/=10,n++);return(r=n+14*r-1)>v?t.c=t.e=null:r<w?t.c=[t.e=0]:(t.e=r,t.c=e),t}function O(t,e,r,n){var o,i,s,a,c,u,l,d=t.c,h=vn;if(d){t:{for(o=1,a=d[0];a>=10;a/=10,o++);if((i=e-o)<0)i+=14,s=e,l=(c=d[u=0])/h[o-s-1]%10|0;else if((u=pn((i+1)/14))>=d.length){if(!n)break t;for(;d.length<=u;d.push(0));c=l=0,o=1,s=(i%=14)-14+1}else{for(c=a=d[u],o=1;a>=10;a/=10,o++);l=(s=(i%=14)-14+o)<0?0:c/h[o-s-1]%10|0}if(n=n||e<0||null!=d[u+1]||(s<0?c:c%h[o-s-1]),n=r<4?(l||n)&&(0==r||r==(t.s<0?3:2)):l>5||5==l&&(4==r||n||6==r&&(i>0?s>0?c/h[o-s]:0:d[u-1])%10&1||r==(t.s<0?8:7)),e<1||!d[0])return d.length=0,n?(e-=t.e+1,d[0]=h[(14-e%14)%14],t.e=-e||0):d[0]=t.e=0,t;if(0==i?(d.length=u,a=1,u--):(d.length=u+1,a=h[14-i],d[u]=s>0?mn(c/h[o-s]%h[s])*a:0),n)for(;;){if(0==u){for(i=1,s=d[0];s>=10;s/=10,i++);for(s=d[0]+=a,a=1;s>=10;s/=10,a++);i!=a&&(t.e++,d[0]==wn&&(d[0]=1));break}if(d[u]+=a,d[u]!=wn)break;d[u--]=0,a=1}for(i=d.length;0===d[--i];d.pop());}t.e>v?t.c=t.e=null:t.e<w&&(t.c=[t.e=0])}return t}function B(t){var e,r=t.e;return null===r?t.toString():(e=_n(t.c),e=r<=y||r>=g?xn(e,r):kn(e,r,"0"),t.s<0?"-"+e:e)}return x.clone=t,x.ROUND_UP=0,x.ROUND_DOWN=1,x.ROUND_CEIL=2,x.ROUND_FLOOR=3,x.ROUND_HALF_UP=4,x.ROUND_HALF_DOWN=5,x.ROUND_HALF_EVEN=6,x.ROUND_HALF_CEIL=7,x.ROUND_HALF_FLOOR=8,x.EUCLID=9,x.config=x.set=function(t){var e,r;if(null!=t){if("object"!=typeof t)throw Error(yn+"Object expected: "+t);if(t.hasOwnProperty(e="DECIMAL_PLACES")&&(Sn(r=t[e],0,bn,e),p=r),t.hasOwnProperty(e="ROUNDING_MODE")&&(Sn(r=t[e],0,8,e),m=r),t.hasOwnProperty(e="EXPONENTIAL_AT")&&((r=t[e])&&r.pop?(Sn(r[0],-bn,0,e),Sn(r[1],0,bn,e),y=r[0],g=r[1]):(Sn(r,-bn,bn,e),y=-(g=r<0?-r:r))),t.hasOwnProperty(e="RANGE"))if((r=t[e])&&r.pop)Sn(r[0],-bn,-1,e),Sn(r[1],1,bn,e),w=r[0],v=r[1];else{if(Sn(r,-bn,bn,e),!r)throw Error(yn+e+" cannot be zero: "+r);w=-(v=r<0?-r:r)}if(t.hasOwnProperty(e="CRYPTO")){if((r=t[e])!==!!r)throw Error(yn+e+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw b=!r,Error(yn+"crypto unavailable");b=r}else b=r}if(t.hasOwnProperty(e="MODULO_MODE")&&(Sn(r=t[e],0,9,e),E=r),t.hasOwnProperty(e="POW_PRECISION")&&(Sn(r=t[e],0,bn,e),_=r),t.hasOwnProperty(e="FORMAT")){if("object"!=typeof(r=t[e]))throw Error(yn+e+" not an object: "+r);A=r}if(t.hasOwnProperty(e="ALPHABET")){if("string"!=typeof(r=t[e])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(yn+e+" invalid: "+r);I="0123456789"==r.slice(0,10),S=r}}return{DECIMAL_PLACES:p,ROUNDING_MODE:m,EXPONENTIAL_AT:[y,g],RANGE:[w,v],CRYPTO:b,MODULO_MODE:E,POW_PRECISION:_,FORMAT:A,ALPHABET:S}},x.isBigNumber=function(t){if(!t||!0!==t._isBigNumber)return!1;if(!x.DEBUG)return!0;var e,r,n=t.c,o=t.e,i=t.s;t:if("[object Array]"=={}.toString.call(n)){if((1===i||-1===i)&&o>=-bn&&o<=bn&&o===mn(o)){if(0===n[0]){if(0===o&&1===n.length)return!0;break t}if((e=(o+1)%14)<1&&(e+=14),String(n[0]).length==e){for(e=0;e<n.length;e++)if((r=n[e])<0||r>=wn||r!==mn(r))break t;if(0!==r)return!0}}}else if(null===n&&null===o&&(null===i||1===i||-1===i))return!0;throw Error(yn+"Invalid BigNumber: "+t)},x.maximum=x.max=function(){return L(arguments,h.lt)},x.minimum=x.min=function(){return L(arguments,h.gt)},x.random=(i=9007199254740992,s=Math.random()*i&2097151?function(){return mn(Math.random()*i)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(t){var e,r,n,o,i,a=0,c=[],u=new x(f);if(null==t?t=p:Sn(t,0,bn),o=pn(t/14),b)if(crypto.getRandomValues){for(e=crypto.getRandomValues(new Uint32Array(o*=2));a<o;)(i=131072*e[a]+(e[a+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),e[a]=r[0],e[a+1]=r[1]):(c.push(i%1e14),a+=2);a=o/2}else{if(!crypto.randomBytes)throw b=!1,Error(yn+"crypto unavailable");for(e=crypto.randomBytes(o*=7);a<o;)(i=281474976710656*(31&e[a])+1099511627776*e[a+1]+4294967296*e[a+2]+16777216*e[a+3]+(e[a+4]<<16)+(e[a+5]<<8)+e[a+6])>=9e15?crypto.randomBytes(7).copy(e,a):(c.push(i%1e14),a+=7);a=o/7}if(!b)for(;a<o;)(i=s())<9e15&&(c[a++]=i%1e14);for(t%=14,(o=c[--a])&&t&&(i=vn[14-t],c[a]=mn(o/i)*i);0===c[a];c.pop(),a--);if(a<0)c=[n=0];else{for(n=-1;0===c[0];c.splice(0,1),n-=14);for(a=1,i=c[0];i>=10;i/=10,a++);a<14&&(n-=14-a)}return u.e=n,u.c=c,u}),x.sum=function(){for(var t=1,e=arguments,r=new x(e[0]);t<e.length;)r=r.plus(e[t++]);return r},n=function(){var t="0123456789";function e(t,e,r,n){for(var o,i,s=[0],a=0,c=t.length;a<c;){for(i=s.length;i--;s[i]*=e);for(s[0]+=n.indexOf(t.charAt(a++)),o=0;o<s.length;o++)s[o]>r-1&&(null==s[o+1]&&(s[o+1]=0),s[o+1]+=s[o]/r|0,s[o]%=r)}return s.reverse()}return function(n,o,i,s,a){var c,u,l,d,h,f,y,g,w=n.indexOf("."),v=p,b=m;for(w>=0&&(d=_,_=0,n=n.replace(".",""),f=(g=new x(o)).pow(n.length-w),_=d,g.c=e(kn(_n(f.c),f.e,"0"),10,i,t),g.e=g.c.length),l=d=(y=e(n,o,i,a?(c=S,t):(c=t,S))).length;0==y[--d];y.pop());if(!y[0])return c.charAt(0);if(w<0?--l:(f.c=y,f.e=l,f.s=s,y=(f=r(f,g,v,b,i)).c,h=f.r,l=f.e),w=y[u=l+v+1],d=i/2,h=h||u<0||null!=y[u+1],h=b<4?(null!=w||h)&&(0==b||b==(f.s<0?3:2)):w>d||w==d&&(4==b||h||6==b&&1&y[u-1]||b==(f.s<0?8:7)),u<1||!y[0])n=h?kn(c.charAt(1),-v,c.charAt(0)):c.charAt(0);else{if(y.length=u,h)for(--i;++y[--u]>i;)y[u]=0,u||(++l,y=[1].concat(y));for(d=y.length;!y[--d];);for(w=0,n="";w<=d;n+=c.charAt(y[w++]));n=kn(n,l,c.charAt(0))}return n}}(),r=function(){function t(t,e,r){var n,o,i,s,a=0,c=t.length,u=e%1e7,l=e/1e7|0;for(t=t.slice();c--;)a=((o=u*(i=t[c]%1e7)+(n=l*i+(s=t[c]/1e7|0)*u)%1e7*1e7+a)/r|0)+(n/1e7|0)+l*s,t[c]=o%r;return a&&(t=[a].concat(t)),t}function e(t,e,r,n){var o,i;if(r!=n)i=r>n?1:-1;else for(o=i=0;o<r;o++)if(t[o]!=e[o]){i=t[o]>e[o]?1:-1;break}return i}function r(t,e,r,n){for(var o=0;r--;)t[r]-=o,o=t[r]<e[r]?1:0,t[r]=o*n+t[r]-e[r];for(;!t[0]&&t.length>1;t.splice(0,1));}return function(n,o,i,s,a){var c,u,l,d,h,f,p,m,y,g,w,v,b,E,_,A,S,I=n.s==o.s?1:-1,k=n.c,L=o.c;if(!(k&&k[0]&&L&&L[0]))return new x(n.s&&o.s&&(k?!L||k[0]!=L[0]:L)?k&&0==k[0]||!L?0*I:I/0:NaN);for(y=(m=new x(I)).c=[],I=i+(u=n.e-o.e)+1,a||(a=wn,u=En(n.e/14)-En(o.e/14),I=I/14|0),l=0;L[l]==(k[l]||0);l++);if(L[l]>(k[l]||0)&&u--,I<0)y.push(1),d=!0;else{for(E=k.length,A=L.length,l=0,I+=2,(h=mn(a/(L[0]+1)))>1&&(L=t(L,h,a),k=t(k,h,a),A=L.length,E=k.length),b=A,w=(g=k.slice(0,A)).length;w<A;g[w++]=0);S=L.slice(),S=[0].concat(S),_=L[0],L[1]>=a/2&&_++;do{if(h=0,(c=e(L,g,A,w))<0){if(v=g[0],A!=w&&(v=v*a+(g[1]||0)),(h=mn(v/_))>1)for(h>=a&&(h=a-1),p=(f=t(L,h,a)).length,w=g.length;1==e(f,g,p,w);)h--,r(f,A<p?S:L,p,a),p=f.length,c=1;else 0==h&&(c=h=1),p=(f=L.slice()).length;if(p<w&&(f=[0].concat(f)),r(g,f,w,a),w=g.length,-1==c)for(;e(L,g,A,w)<1;)h++,r(g,A<w?S:L,w,a),w=g.length}else 0===c&&(h++,g=[0]);y[l++]=h,g[0]?g[w++]=k[b]||0:(g=[k[b]],w=1)}while((b++<E||null!=g[0])&&I--);d=null!=g[0],y[0]||y.splice(0,1)}if(a==wn){for(l=1,I=y[0];I>=10;I/=10,l++);O(m,i+(m.e=l+14*u-1)+1,s,d)}else m.e=u,m.r=+d;return m}}(),a=/^(-?)0([xbo])(?=\w[\w.]*$)/i,c=/^([^.]+)\.$/,u=/^\.([^.]+)$/,l=/^-?(Infinity|NaN)$/,d=/^\s*\+(?=[\w.])|^\s+|\s+$/g,o=function(t,e,r,n){var o,i=r?e:e.replace(d,"");if(l.test(i))t.s=isNaN(i)?null:i<0?-1:1;else{if(!r&&(i=i.replace(a,(function(t,e,r){return o="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=o?t:e})),n&&(o=n,i=i.replace(c,"$1").replace(u,"0.$1")),e!=i))return new x(i,o);if(x.DEBUG)throw Error(yn+"Not a"+(n?" base "+n:"")+" number: "+e);t.s=null}t.c=t.e=null},h.absoluteValue=h.abs=function(){var t=new x(this);return t.s<0&&(t.s=1),t},h.comparedTo=function(t,e){return An(this,new x(t,e))},h.decimalPlaces=h.dp=function(t,e){var r,n,o,i=this;if(null!=t)return Sn(t,0,bn),null==e?e=m:Sn(e,0,8),O(new x(i),t+i.e+1,e);if(!(r=i.c))return null;if(n=14*((o=r.length-1)-En(this.e/14)),o=r[o])for(;o%10==0;o/=10,n--);return n<0&&(n=0),n},h.dividedBy=h.div=function(t,e){return r(this,new x(t,e),p,m)},h.dividedToIntegerBy=h.idiv=function(t,e){return r(this,new x(t,e),0,1)},h.exponentiatedBy=h.pow=function(t,e){var r,n,o,i,s,a,c,u,l=this;if((t=new x(t)).c&&!t.isInteger())throw Error(yn+"Exponent not an integer: "+B(t));if(null!=e&&(e=new x(e)),s=t.e>14,!l.c||!l.c[0]||1==l.c[0]&&!l.e&&1==l.c.length||!t.c||!t.c[0])return u=new x(Math.pow(+B(l),s?2-In(t):+B(t))),e?u.mod(e):u;if(a=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new x(NaN);(n=!a&&l.isInteger()&&e.isInteger())&&(l=l.mod(e))}else{if(t.e>9&&(l.e>0||l.e<-1||(0==l.e?l.c[0]>1||s&&l.c[1]>=24e7:l.c[0]<8e13||s&&l.c[0]<=9999975e7)))return i=l.s<0&&In(t)?-0:0,l.e>-1&&(i=1/i),new x(a?1/i:i);_&&(i=pn(_/14+2))}for(s?(r=new x(.5),a&&(t.s=1),c=In(t)):c=(o=Math.abs(+B(t)))%2,u=new x(f);;){if(c){if(!(u=u.times(l)).c)break;i?u.c.length>i&&(u.c.length=i):n&&(u=u.mod(e))}if(o){if(0===(o=mn(o/2)))break;c=o%2}else if(O(t=t.times(r),t.e+1,1),t.e>14)c=In(t);else{if(0==(o=+B(t)))break;c=o%2}l=l.times(l),i?l.c&&l.c.length>i&&(l.c.length=i):n&&(l=l.mod(e))}return n?u:(a&&(u=f.div(u)),e?u.mod(e):i?O(u,_,m,void 0):u)},h.integerValue=function(t){var e=new x(this);return null==t?t=m:Sn(t,0,8),O(e,e.e+1,t)},h.isEqualTo=h.eq=function(t,e){return 0===An(this,new x(t,e))},h.isFinite=function(){return!!this.c},h.isGreaterThan=h.gt=function(t,e){return An(this,new x(t,e))>0},h.isGreaterThanOrEqualTo=h.gte=function(t,e){return 1===(e=An(this,new x(t,e)))||0===e},h.isInteger=function(){return!!this.c&&En(this.e/14)>this.c.length-2},h.isLessThan=h.lt=function(t,e){return An(this,new x(t,e))<0},h.isLessThanOrEqualTo=h.lte=function(t,e){return-1===(e=An(this,new x(t,e)))||0===e},h.isNaN=function(){return!this.s},h.isNegative=function(){return this.s<0},h.isPositive=function(){return this.s>0},h.isZero=function(){return!!this.c&&0==this.c[0]},h.minus=function(t,e){var r,n,o,i,s=this,a=s.s;if(e=(t=new x(t,e)).s,!a||!e)return new x(NaN);if(a!=e)return t.s=-e,s.plus(t);var c=s.e/14,u=t.e/14,l=s.c,d=t.c;if(!c||!u){if(!l||!d)return l?(t.s=-e,t):new x(d?s:NaN);if(!l[0]||!d[0])return d[0]?(t.s=-e,t):new x(l[0]?s:3==m?-0:0)}if(c=En(c),u=En(u),l=l.slice(),a=c-u){for((i=a<0)?(a=-a,o=l):(u=c,o=d),o.reverse(),e=a;e--;o.push(0));o.reverse()}else for(n=(i=(a=l.length)<(e=d.length))?a:e,a=e=0;e<n;e++)if(l[e]!=d[e]){i=l[e]<d[e];break}if(i&&(o=l,l=d,d=o,t.s=-t.s),(e=(n=d.length)-(r=l.length))>0)for(;e--;l[r++]=0);for(e=wn-1;n>a;){if(l[--n]<d[n]){for(r=n;r&&!l[--r];l[r]=e);--l[r],l[n]+=wn}l[n]-=d[n]}for(;0==l[0];l.splice(0,1),--u);return l[0]?T(t,l,u):(t.s=3==m?-1:1,t.c=[t.e=0],t)},h.modulo=h.mod=function(t,e){var n,o,i=this;return t=new x(t,e),!i.c||!t.s||t.c&&!t.c[0]?new x(NaN):!t.c||i.c&&!i.c[0]?new x(i):(9==E?(o=t.s,t.s=1,n=r(i,t,0,3),t.s=o,n.s*=o):n=r(i,t,0,E),(t=i.minus(n.times(t))).c[0]||1!=E||(t.s=i.s),t)},h.multipliedBy=h.times=function(t,e){var r,n,o,i,s,a,c,u,l,d,h,f,p,m,y,g=this,w=g.c,v=(t=new x(t,e)).c;if(!(w&&v&&w[0]&&v[0]))return!g.s||!t.s||w&&!w[0]&&!v||v&&!v[0]&&!w?t.c=t.e=t.s=null:(t.s*=g.s,w&&v?(t.c=[0],t.e=0):t.c=t.e=null),t;for(n=En(g.e/14)+En(t.e/14),t.s*=g.s,(c=w.length)<(d=v.length)&&(p=w,w=v,v=p,o=c,c=d,d=o),o=c+d,p=[];o--;p.push(0));for(m=wn,y=1e7,o=d;--o>=0;){for(r=0,h=v[o]%y,f=v[o]/y|0,i=o+(s=c);i>o;)r=((u=h*(u=w[--s]%y)+(a=f*u+(l=w[s]/y|0)*h)%y*y+p[i]+r)/m|0)+(a/y|0)+f*l,p[i--]=u%m;p[i]=r}return r?++n:p.splice(0,1),T(t,p,n)},h.negated=function(){var t=new x(this);return t.s=-t.s||null,t},h.plus=function(t,e){var r,n=this,o=n.s;if(e=(t=new x(t,e)).s,!o||!e)return new x(NaN);if(o!=e)return t.s=-e,n.minus(t);var i=n.e/14,s=t.e/14,a=n.c,c=t.c;if(!i||!s){if(!a||!c)return new x(o/0);if(!a[0]||!c[0])return c[0]?t:new x(a[0]?n:0*o)}if(i=En(i),s=En(s),a=a.slice(),o=i-s){for(o>0?(s=i,r=c):(o=-o,r=a),r.reverse();o--;r.push(0));r.reverse()}for((o=a.length)-(e=c.length)<0&&(r=c,c=a,a=r,e=o),o=0;e;)o=(a[--e]=a[e]+c[e]+o)/wn|0,a[e]=wn===a[e]?0:a[e]%wn;return o&&(a=[o].concat(a),++s),T(t,a,s)},h.precision=h.sd=function(t,e){var r,n,o,i=this;if(null!=t&&t!==!!t)return Sn(t,1,bn),null==e?e=m:Sn(e,0,8),O(new x(i),t,e);if(!(r=i.c))return null;if(n=14*(o=r.length-1)+1,o=r[o]){for(;o%10==0;o/=10,n--);for(o=r[0];o>=10;o/=10,n++);}return t&&i.e+1>n&&(n=i.e+1),n},h.shiftedBy=function(t){return Sn(t,-9007199254740991,9007199254740991),this.times("1e"+t)},h.squareRoot=h.sqrt=function(){var t,e,n,o,i,s=this,a=s.c,c=s.s,u=s.e,l=p+4,d=new x("0.5");if(1!==c||!a||!a[0])return new x(!c||c<0&&(!a||a[0])?NaN:a?s:1/0);if(0==(c=Math.sqrt(+B(s)))||c==1/0?(((e=_n(a)).length+u)%2==0&&(e+="0"),c=Math.sqrt(+e),u=En((u+1)/2)-(u<0||u%2),n=new x(e=c==1/0?"5e"+u:(e=c.toExponential()).slice(0,e.indexOf("e")+1)+u)):n=new x(c+""),n.c[0])for((c=(u=n.e)+l)<3&&(c=0);;)if(i=n,n=d.times(i.plus(r(s,i,l,1))),_n(i.c).slice(0,c)===(e=_n(n.c)).slice(0,c)){if(n.e<u&&--c,"9999"!=(e=e.slice(c-3,c+1))&&(o||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(O(n,n.e+p+2,1),t=!n.times(n).eq(s));break}if(!o&&(O(i,i.e+p+2,0),i.times(i).eq(s))){n=i;break}l+=4,c+=4,o=1}return O(n,n.e+p+1,m,t)},h.toExponential=function(t,e){return null!=t&&(Sn(t,0,bn),t++),k(this,t,e,1)},h.toFixed=function(t,e){return null!=t&&(Sn(t,0,bn),t=t+this.e+1),k(this,t,e)},h.toFormat=function(t,e,r){var n,o=this;if(null==r)null!=t&&e&&"object"==typeof e?(r=e,e=null):t&&"object"==typeof t?(r=t,t=e=null):r=A;else if("object"!=typeof r)throw Error(yn+"Argument not an object: "+r);if(n=o.toFixed(t,e),o.c){var i,s=n.split("."),a=+r.groupSize,c=+r.secondaryGroupSize,u=r.groupSeparator||"",l=s[0],d=s[1],h=o.s<0,f=h?l.slice(1):l,p=f.length;if(c&&(i=a,a=c,c=i,p-=i),a>0&&p>0){for(i=p%a||a,l=f.substr(0,i);i<p;i+=a)l+=u+f.substr(i,a);c>0&&(l+=u+f.slice(i)),h&&(l="-"+l)}n=d?l+(r.decimalSeparator||"")+((c=+r.fractionGroupSize)?d.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):d):l}return(r.prefix||"")+n+(r.suffix||"")},h.toFraction=function(t){var e,n,o,i,s,a,c,u,l,d,h,p,y=this,g=y.c;if(null!=t&&(!(c=new x(t)).isInteger()&&(c.c||1!==c.s)||c.lt(f)))throw Error(yn+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+B(c));if(!g)return new x(y);for(e=new x(f),l=n=new x(f),o=u=new x(f),p=_n(g),s=e.e=p.length-y.e-1,e.c[0]=vn[(a=s%14)<0?14+a:a],t=!t||c.comparedTo(e)>0?s>0?e:l:c,a=v,v=1/0,c=new x(p),u.c[0]=0;d=r(c,e,0,1),1!=(i=n.plus(d.times(o))).comparedTo(t);)n=o,o=i,l=u.plus(d.times(i=l)),u=i,e=c.minus(d.times(i=e)),c=i;return i=r(t.minus(n),o,0,1),u=u.plus(i.times(l)),n=n.plus(i.times(o)),u.s=l.s=y.s,h=r(l,o,s*=2,m).minus(y).abs().comparedTo(r(u,n,s,m).minus(y).abs())<1?[l,o]:[u,n],v=a,h},h.toNumber=function(){return+B(this)},h.toPrecision=function(t,e){return null!=t&&Sn(t,1,bn),k(this,t,e,2)},h.toString=function(t){var e,r=this,o=r.s,i=r.e;return null===i?o?(e="Infinity",o<0&&(e="-"+e)):e="NaN":(null==t?e=i<=y||i>=g?xn(_n(r.c),i):kn(_n(r.c),i,"0"):10===t&&I?e=kn(_n((r=O(new x(r),p+i+1,m)).c),r.e,"0"):(Sn(t,2,S.length,"Base"),e=n(kn(_n(r.c),i,"0"),10,t,o,!0)),o<0&&r.c[0]&&(e="-"+e)),e},h.valueOf=h.toJSON=function(){return B(this)},h._isBigNumber=!0,h[Symbol.toStringTag]="BigNumber",h[Symbol.for("nodejs.util.inspect.custom")]=h.valueOf,null!=e&&x.set(e),x}();new Ln("1e+18");const Tn=e=>{const r=dn(32,e),{encode:n,decode:o}=(t=>({decode:t.decode.bind(t),encode:t.encode.bind(t)}))(r),i=r;return i.decode=(e,r)=>{const n=o(e,r);return new t(n)},i.encode=(t,e,r)=>{const o=t.toBuffer();return n(o,e,r)},i};function On(t){return new Bn(8,!1,t)}class Bn extends Sr{constructor(t,e,r){super(t,r),this.blob=dn(t),this.signed=e}encode(t,e,r=0){return this.signed&&(t=t.toTwos(8*this.span)),this.blob.encode(t.toArrayLike(Buffer,"le",this.span),e,r)}decode(t,e=0){const r=new c(this.blob.decode(t,e),10,"le");return this.signed?r.fromTwos(8*this.span).clone():r}}class Pn extends Sr{constructor(t,e){super(-1,e),this.layout=cn([an("length"),un(t,on(an(),-4),"src")],e)}encode(t,e,r=0){const n={src:t};return this.layout.encode(n,e,r)}decode(t,e=0){return this.layout.decode(t,e).src}getSpan(t,e=0){return this.layout.getSpan(t,e)}}class Mn{constructor(t){}encode(t,e){switch(t){case"Init":return function({seeds:t,numberOfSchedules:e}){return Dn({Init:{seeds:t,numberOfSchedules:e}},37)}(e);case"Create":return function({mintAddress:t,seeds:e,destToken:r,schedules:n}){return Dn({Create:{mintAddress:t,seeds:e,destToken:r,schedules:n}},101+16*n.length)}(e);case"Unlock":return function({seeds:t}){return Dn({Unlock:{seeds:t}},33)}(e);case"ChangeDestination":return function({seeds:t}){return Dn({ChangeDestination:{seeds:t}},33)}(e);default:throw new Error(`Invalid instruction: ${t}`)}}encodeState(t,e){throw new Error("TokenVesting does not have state")}}const Un=ln(sn("instruction"));function Dn(t,e){const r=Buffer.alloc(e);return Un.encode(t,r),r}Un.addVariant(0,cn([un(sn(),32,"seeds"),an("numberOfSchedules")]),"Init"),Un.addVariant(1,cn([Tn("mintAddress"),un(sn(),32,"seeds"),Tn("destToken"),function(t,e){return new Pn(t,e)}(cn([On("releaseTime"),On("amount")]),"schedules")]),"Create"),Un.addVariant(2,cn([un(sn(),32,"seeds")]),"Unlock"),Un.addVariant(3,cn([un(sn(),32,"seeds")]),"ChangeDestination");class Cn{constructor(t){}encode(t,e){throw new Error("TokenVesting does not have state")}decode(t){throw new Error("TokenVesting does not have state")}}class Nn{constructor(t){}encode(t,e){throw new Error("TokenVesting does not have user-defined types")}decode(t,e){throw new Error("TokenVesting does not have user-defined types")}}class zn{constructor(t){this.accounts=new gr(t),this.events=new wr(t),this.instruction=new Mn(t),this.state=new Cn(t),this.types=new Nn(t)}}const Rn=t.default;function jn(t){var e;return new yr(Vn,null!==(e=null==t?void 0:t.programId)&&void 0!==e?e:Rn,null==t?void 0:t.provider,new zn(Vn))}const Vn={version:"0.1.0",name:"token-vesting",instructions:[{name:"Init",accounts:[{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"payer",isMut:!0,isSigner:!0},{name:"vesting",isMut:!0,isSigner:!1}],args:[{name:"seeds",type:{array:["u8",32]}},{name:"numberOfSchedules",type:"u32"}]},{name:"Create",accounts:[{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"vesting",isMut:!0,isSigner:!1},{name:"vestingToken",isMut:!0,isSigner:!1},{name:"user",isMut:!1,isSigner:!0},{name:"userToken",isMut:!0,isSigner:!1}],args:[{name:"mintAddress",type:"publicKey"},{name:"seeds",type:{array:["u8",32]}},{name:"destToken",type:"publicKey"},{name:"schedules",type:{vec:{defined:"Schedule"}}}]},{name:"Unlock",accounts:[{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"vesting",isMut:!0,isSigner:!1},{name:"vestingToken",isMut:!0,isSigner:!1},{name:"destToken",isMut:!0,isSigner:!1}],args:[{name:"seeds",type:{array:["u8",32]}}]},{name:"ChangeDestination",accounts:[{name:"vesting",isMut:!0,isSigner:!1},{name:"currentDestToken",isMut:!1,isSigner:!1},{name:"currentDestAuthority",isMut:!1,isSigner:!0},{name:"targetDestToken",isMut:!1,isSigner:!1}],args:[{name:"seeds",type:{array:["u8",32]}}]}],types:[{name:"Schedule",type:{kind:"struct",fields:[{name:"releaseTime",type:"u64"},{name:"amount",type:"u64"}]}}],errors:[{code:0,name:"InvalidInstruction",msg:"Invalid Instruction"}]};export{jn as tokenVestingProgram};
//# sourceMappingURL=index.js.map
